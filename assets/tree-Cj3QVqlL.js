import{r as st,s as ne}from"./chunk-DZLz74EQ.js";import{t as gn}from"./react-BcIddLXZ.js";import{t as pn}from"./jsx-runtime-DvsdsEjx.js";import{t as vn}from"./shim-Bk8nzKPV.js";import{t as yn}from"./extends-C-tvimwN.js";import{t as mn}from"./fast-deep-equal-BmkHHxS9.js";function Oe(e,t){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Oe(e,t)}function bn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Oe(e,t)}function at(e){if(e===void 0)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var h=ne(gn());const ut=(0,h.createContext)(null);function P(){let e=(0,h.useContext)(ut);if(e===null)throw Error("No Tree Api Provided");return e}const lt=(0,h.createContext)(null);function On(){let e=(0,h.useContext)(lt);if(e===null)throw Error("Provide a NodesContext");return e}const ct=(0,h.createContext)(null);function In(){let e=(0,h.useContext)(ct);if(e===null)throw Error("Provide a DnDContext");return e}const dt=(0,h.createContext)(0);function ft(){(0,h.useContext)(dt)}var Sn=st({access:()=>Q,bound:()=>ie,dfs:()=>Ie,focusNextElement:()=>mt,focusPrevElement:()=>bt,getInsertIndex:()=>wt,getInsertParentId:()=>Tt,identify:()=>B,identifyNull:()=>It,indexOf:()=>yt,isClosed:()=>gt,isDescendant:()=>vt,isItem:()=>ht,isOpenWithEmptyChildren:()=>pt,mergeRefs:()=>En,noop:()=>Dn,safeRun:()=>St,waitFor:()=>Dt,walk:()=>oe});function ie(e,t,r){return Math.max(Math.min(e,r),t)}function ht(e){return e&&e.isLeaf}function gt(e){return e&&e.isInternal&&!e.isOpen}function pt(e){var t;return e&&e.isOpen&&!((t=e.children)!=null&&t.length)}const vt=(e,t)=>{let r=e;for(;r;){if(r.id===t.id)return!0;r=r.parent}return!1},yt=e=>{if(!e.parent)throw Error("Node does not have a parent");return e.parent.children.findIndex(t=>t.id===e.id)};function Dn(){}function Ie(e,t){if(!e)return null;if(e.id===t)return e;if(e.children)for(let r of e.children){let n=Ie(r,t);if(n)return n}return null}function oe(e,t){if(t(e),e.children)for(let r of e.children)oe(r,t)}function mt(e){let t=Ot(e),r;for(let n=0;n<t.length;++n)if(t[n]===e){r=wn(t,n);break}r==null||r.focus()}function bt(e){let t=Ot(e),r;for(let n=0;n<t.length;++n)if(t[n]===e){r=Tn(t,n);break}r==null||r.focus()}function wn(e,t){return t+1<e.length?e[t+1]:e[0]}function Tn(e,t){return t-1>=0?e[t-1]:e[e.length-1]}function Ot(e){return Array.from(document.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"]):not([disabled]), details:not([disabled]), summary:not(:disabled)')).filter(t=>t===e||!e.contains(t))}function Q(e,t){return typeof t=="boolean"?t:typeof t=="string"?e[t]:t(e)}function It(e){return e===null?null:B(e)}function B(e){return typeof e=="string"?e:e.id}function En(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}function St(e,...t){if(e)return e(...t)}function Dt(e){return new Promise((t,r)=>{let n=0;function i(){n+=1,n===100&&r(),e()?t():setTimeout(i,10)}i()})}function wt(e){var r;let t=e.focusedNode;return t?t.isOpen?0:t.parent?t.childIndex+1:0:((r=e.root.children)==null?void 0:r.length)??0}function Tt(e){let t=e.focusedNode;return t?t.isOpen?t.id:t.parent&&!t.parent.isRoot?t.parent.id:null:null}var m=ne(pn()),Cn={display:"flex",alignItems:"center",zIndex:1},xn={flex:1,height:"2px",background:"#4B91E2",borderRadius:"1px"},Nn={width:"4px",height:"4px",boxShadow:"0 0 0 3px #4B91E2",borderRadius:"50%"};const jn=h.memo(function({top:e,left:t,indent:r}){let n={position:"absolute",pointerEvents:"none",top:e-2+"px",left:t+"px",right:r+"px"};return(0,m.jsxs)("div",{style:Object.assign(Object.assign({},Cn),n),children:[(0,m.jsx)("div",{style:Object.assign({},Nn)}),(0,m.jsx)("div",{style:Object.assign({},xn)})]})});function Pn({node:e,attrs:t,innerRef:r,children:n}){return(0,m.jsx)("div",Object.assign({},t,{ref:r,onFocus:i=>i.stopPropagation(),onClick:e.handleClick,children:n}))}function kn(e){return(0,m.jsxs)("div",{ref:e.dragHandle,style:e.style,children:[(0,m.jsx)("span",{onClick:t=>{t.stopPropagation(),e.node.toggle()},children:e.node.isLeaf?"\u{1F333}":e.node.isOpen?"\u{1F5C1}":"\u{1F5C0}"})," ",e.node.isEditing?(0,m.jsx)(An,Object.assign({},e)):(0,m.jsx)(Rn,Object.assign({},e))]})}function Rn(e){return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("span",{children:e.node.data.name})})}function An({node:e}){let t=(0,h.useRef)();return(0,h.useEffect)(()=>{var r,n;(r=t.current)==null||r.focus(),(n=t.current)==null||n.select()},[]),(0,m.jsx)("input",{ref:t,defaultValue:e.data.name,onBlur:()=>e.reset(),onKeyDown:r=>{var n;r.key==="Escape"&&e.reset(),r.key==="Enter"&&e.submit(((n=t.current)==null?void 0:n.value)||"")}})}function Se(e){return{type:"EDIT",id:e}}function _n(e={id:null},t){return t.type==="EDIT"?Object.assign(Object.assign({},e),{id:t.id}):e}function G(e){return{type:"FOCUS",id:e}}function Mn(){return{type:"TREE_BLUR"}}function Ln(e={id:null,treeFocused:!1},t){return t.type==="FOCUS"?Object.assign(Object.assign({},e),{id:t.id,treeFocused:!0}):t.type==="TREE_BLUR"?Object.assign(Object.assign({},e),{treeFocused:!1}):e}var Et=class sn{constructor(t){this.handleClick=r=>{r.metaKey&&!this.tree.props.disableMultiSelection?this.isSelected?this.deselect():this.selectMulti():r.shiftKey&&!this.tree.props.disableMultiSelection?this.selectContiguous():(this.select(),this.activate())},this.tree=t.tree,this.id=t.id,this.data=t.data,this.level=t.level,this.children=t.children,this.parent=t.parent,this.isDraggable=t.isDraggable,this.rowIndex=t.rowIndex}get isRoot(){return this.id===De}get isLeaf(){return!Array.isArray(this.children)}get isInternal(){return!this.isLeaf}get isOpen(){return this.isLeaf?!1:this.tree.isOpen(this.id)}get isClosed(){return this.isLeaf?!1:!this.tree.isOpen(this.id)}get isEditable(){return this.tree.isEditable(this.data)}get isEditing(){return this.tree.editingId===this.id}get isSelected(){return this.tree.isSelected(this.id)}get isOnlySelection(){return this.isSelected&&this.tree.hasOneSelection}get isSelectedStart(){var t;return this.isSelected&&!((t=this.prev)!=null&&t.isSelected)}get isSelectedEnd(){var t;return this.isSelected&&!((t=this.next)!=null&&t.isSelected)}get isFocused(){return this.tree.isFocused(this.id)}get isDragging(){return this.tree.isDragging(this.id)}get willReceiveDrop(){return this.tree.willReceiveDrop(this.id)}get state(){return{isClosed:this.isClosed,isDragging:this.isDragging,isEditing:this.isEditing,isFocused:this.isFocused,isInternal:this.isInternal,isLeaf:this.isLeaf,isOpen:this.isOpen,isSelected:this.isSelected,isSelectedEnd:this.isSelectedEnd,isSelectedStart:this.isSelectedStart,willReceiveDrop:this.willReceiveDrop}}get childIndex(){return this.parent&&this.parent.children?this.parent.children.findIndex(t=>t.id===this.id):-1}get next(){return this.rowIndex===null?null:this.tree.at(this.rowIndex+1)}get prev(){return this.rowIndex===null?null:this.tree.at(this.rowIndex-1)}get nextSibling(){var r;let t=this.childIndex;return((r=this.parent)==null?void 0:r.children[t+1])??null}isAncestorOf(t){if(!t)return!1;let r=t;for(;r;){if(r.id===this.id)return!0;r=r.parent}return!1}select(){this.tree.select(this)}deselect(){this.tree.deselect(this)}selectMulti(){this.tree.selectMulti(this)}selectContiguous(){this.tree.selectContiguous(this)}activate(){this.tree.activate(this)}focus(){this.tree.focus(this)}toggle(){this.tree.toggle(this)}open(){this.tree.open(this)}openParents(){this.tree.openParents(this)}close(){this.tree.close(this)}submit(t){this.tree.submit(this,t)}reset(){this.tree.reset()}clone(){return new sn(Object.assign({},this))}edit(){return this.tree.edit(this)}};const De="__REACT_ARBORIST_INTERNAL_ROOT__";function Ct(e){function t(n,i,o){let s=new Et({tree:e,data:n,level:i,parent:o,id:e.accessId(n),children:null,isDraggable:e.isDraggable(n),rowIndex:null}),a=e.accessChildren(n);return a&&(s.children=a.map(l=>t(l,i+1,s))),s}let r=new Et({tree:e,id:De,data:{id:De},level:-1,parent:null,children:null,isDraggable:!0,rowIndex:null});return r.children=(e.props.data??[]).map(n=>t(n,0,r)),r}const we={open(e,t){return{type:"VISIBILITY_OPEN",id:e,filtered:t}},close(e,t){return{type:"VISIBILITY_CLOSE",id:e,filtered:t}},toggle(e,t){return{type:"VISIBILITY_TOGGLE",id:e,filtered:t}},clear(e){return{type:"VISIBILITY_CLEAR",filtered:e}}};function xt(e={},t){if(t.type==="VISIBILITY_OPEN")return Object.assign(Object.assign({},e),{[t.id]:!0});if(t.type==="VISIBILITY_CLOSE")return Object.assign(Object.assign({},e),{[t.id]:!1});if(t.type==="VISIBILITY_TOGGLE"){let r=e[t.id];return Object.assign(Object.assign({},e),{[t.id]:!r})}else return t.type==="VISIBILITY_CLEAR"?{}:e}function Hn(e={filtered:{},unfiltered:{}},t){return t.type.startsWith("VISIBILITY")?t.filtered?Object.assign(Object.assign({},e),{filtered:xt(e.filtered,t)}):Object.assign(Object.assign({},e),{unfiltered:xt(e.unfiltered,t)}):e}const K=e=>({nodes:{open:{filtered:{},unfiltered:(e==null?void 0:e.initialOpenState)??{}},focus:{id:null,treeFocused:!1},edit:{id:null},drag:{id:null,selectedIds:[],destinationParentId:null,destinationIndex:null},selection:{ids:new Set,anchor:null,mostRecent:null}},dnd:{cursor:{type:"none"},dragId:null,dragIds:[],parentId:null,index:-1}}),A={clear:()=>({type:"SELECTION_CLEAR"}),only:e=>({type:"SELECTION_ONLY",id:B(e)}),add:e=>({type:"SELECTION_ADD",ids:(Array.isArray(e)?e:[e]).map(B)}),remove:e=>({type:"SELECTION_REMOVE",ids:(Array.isArray(e)?e:[e]).map(B)}),set:e=>Object.assign({type:"SELECTION_SET"},e),mostRecent:e=>({type:"SELECTION_MOST_RECENT",id:e===null?null:B(e)}),anchor:e=>({type:"SELECTION_ANCHOR",id:e===null?null:B(e)})};function Fn(e=K().nodes.selection,t){let r=e.ids;switch(t.type){case"SELECTION_CLEAR":return Object.assign(Object.assign({},e),{ids:new Set});case"SELECTION_ONLY":return Object.assign(Object.assign({},e),{ids:new Set([t.id])});case"SELECTION_ADD":return t.ids.length===0?e:(t.ids.forEach(n=>r.add(n)),Object.assign(Object.assign({},e),{ids:new Set(r)}));case"SELECTION_REMOVE":return t.ids.length===0?e:(t.ids.forEach(n=>r.delete(n)),Object.assign(Object.assign({},e),{ids:new Set(r)}));case"SELECTION_SET":return Object.assign(Object.assign({},e),{ids:t.ids,mostRecent:t.mostRecent,anchor:t.anchor});case"SELECTION_MOST_RECENT":return Object.assign(Object.assign({},e),{mostRecent:t.id});case"SELECTION_ANCHOR":return Object.assign(Object.assign({},e),{anchor:t.id});default:return e}}const V={cursor(e){return{type:"DND_CURSOR",cursor:e}},dragStart(e,t){return{type:"DND_DRAG_START",id:e,dragIds:t}},dragEnd(){return{type:"DND_DRAG_END"}},hovering(e,t){return{type:"DND_HOVERING",parentId:e,index:t}}};function Un(e=K().dnd,t){switch(t.type){case"DND_CURSOR":return Object.assign(Object.assign({},e),{cursor:t.cursor});case"DND_DRAG_START":return Object.assign(Object.assign({},e),{dragId:t.id,dragIds:t.dragIds});case"DND_DRAG_END":return K().dnd;case"DND_HOVERING":return Object.assign(Object.assign({},e),{parentId:t.parentId,index:t.index});default:return e}}var Bn={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"},zn=e=>{if(!e)return{display:"none"};let{x:t,y:r}=e;return{transform:`translate(${t}px, ${r}px)`}},Wn=e=>{if(!e)return{display:"none"};let{x:t,y:r}=e;return{transform:`translate(${t+10}px, ${r+10}px)`}};function Nt({offset:e,mouse:t,id:r,dragIds:n,isDragging:i}){return(0,m.jsxs)($n,{isDragging:i,children:[(0,m.jsx)(Gn,{offset:e,children:(0,m.jsx)(Vn,{id:r,dragIds:n})}),(0,m.jsx)(Kn,{mouse:t,count:n.length})]})}var $n=(0,h.memo)(function(e){return e.isDragging?(0,m.jsx)("div",{style:Bn,children:e.children}):null});function Gn(e){return(0,m.jsx)("div",{className:"row preview",style:zn(e.offset),children:e.children})}function Kn(e){let{count:t,mouse:r}=e;return t>1?(0,m.jsx)("div",{className:"selected-count",style:Wn(r),children:t}):null}var Vn=(0,h.memo)(function(e){let t=P(),r=t.get(e.id);return r?(0,m.jsx)(t.renderNode,{preview:!0,node:r,style:{paddingLeft:r.level*t.indent,opacity:.2,background:"transparent"},tree:t}):null}),jt=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Yn(e,t){return!!(e===t||jt(e)&&jt(t))}function qn(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!Yn(e[r],t[r]))return!1;return!0}function Xn(e,t){t===void 0&&(t=qn);var r,n=[],i,o=!1;function s(){var a=[...arguments];return o&&r===this&&t(a,n)||(i=e.apply(this,a),o=!0,r=this,n=a),i}return s}var Te=Xn,Pt=typeof performance=="object"&&typeof performance.now=="function"?function(){return performance.now()}:function(){return Date.now()};function kt(e){cancelAnimationFrame(e.id)}function Jn(e,t){var r=Pt();function n(){Pt()-r>=t?e.call(null):i.id=requestAnimationFrame(n)}var i={id:requestAnimationFrame(n)};return i}var Ee=-1;function Rt(e){if(e===void 0&&(e=!1),Ee===-1||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(t),Ee=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Ee}var Z=null;function At(e){if(e===void 0&&(e=!1),Z===null||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),i=n.style;return i.width="100px",i.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?Z="positive-descending":(t.scrollLeft=1,Z=t.scrollLeft===0?"negative":"positive-ascending"),document.body.removeChild(t),Z}return Z}var Qn=150,Zn=function(e,t){return e};function ei(e){var t,r=e.getItemOffset,n=e.getEstimatedTotalSize,i=e.getItemSize,o=e.getOffsetForIndexAndAlignment,s=e.getStartIndexForOffset,a=e.getStopIndexForStartIndex,l=e.initInstanceProps,c=e.shouldResetStyleCacheOnItemSizeChange,p=e.validateProps;return t=(function(O){bn(y,O);function y(d){var u=O.call(this,d)||this;return u._instanceProps=l(u.props,at(u)),u._outerRef=void 0,u._resetIsScrollingTimeoutId=null,u.state={instance:at(u),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof u.props.initialScrollOffset=="number"?u.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},u._callOnItemsRendered=void 0,u._callOnItemsRendered=Te(function(g,f,v,D){return u.props.onItemsRendered({overscanStartIndex:g,overscanStopIndex:f,visibleStartIndex:v,visibleStopIndex:D})}),u._callOnScroll=void 0,u._callOnScroll=Te(function(g,f,v){return u.props.onScroll({scrollDirection:g,scrollOffset:f,scrollUpdateWasRequested:v})}),u._getItemStyle=void 0,u._getItemStyle=function(g){var f=u.props,v=f.direction,D=f.itemSize,T=f.layout,w=u._getItemStyleCache(c&&D,c&&T,c&&v),E;if(w.hasOwnProperty(g))E=w[g];else{var C=r(u.props,g,u._instanceProps),L=i(u.props,g,u._instanceProps),U=v==="horizontal"||T==="horizontal",$=v==="rtl",re=U?C:0;w[g]=E={position:"absolute",left:$?void 0:re,right:$?re:void 0,top:U?0:C,height:U?"100%":L,width:U?L:"100%"}}return E},u._getItemStyleCache=void 0,u._getItemStyleCache=Te(function(g,f,v){return{}}),u._onScrollHorizontal=function(g){var f=g.currentTarget,v=f.clientWidth,D=f.scrollLeft,T=f.scrollWidth;u.setState(function(w){if(w.scrollOffset===D)return null;var E=u.props.direction,C=D;if(E==="rtl")switch(At()){case"negative":C=-D;break;case"positive-descending":C=T-v-D;break}return C=Math.max(0,Math.min(C,T-v)),{isScrolling:!0,scrollDirection:w.scrollOffset<C?"forward":"backward",scrollOffset:C,scrollUpdateWasRequested:!1}},u._resetIsScrollingDebounced)},u._onScrollVertical=function(g){var f=g.currentTarget,v=f.clientHeight,D=f.scrollHeight,T=f.scrollTop;u.setState(function(w){if(w.scrollOffset===T)return null;var E=Math.max(0,Math.min(T,D-v));return{isScrolling:!0,scrollDirection:w.scrollOffset<E?"forward":"backward",scrollOffset:E,scrollUpdateWasRequested:!1}},u._resetIsScrollingDebounced)},u._outerRefSetter=function(g){var f=u.props.outerRef;u._outerRef=g,typeof f=="function"?f(g):typeof f=="object"&&f&&f.hasOwnProperty("current")&&(f.current=g)},u._resetIsScrollingDebounced=function(){u._resetIsScrollingTimeoutId!==null&&kt(u._resetIsScrollingTimeoutId),u._resetIsScrollingTimeoutId=Jn(u._resetIsScrolling,Qn)},u._resetIsScrolling=function(){u._resetIsScrollingTimeoutId=null,u.setState({isScrolling:!1},function(){u._getItemStyleCache(-1,null)})},u}y.getDerivedStateFromProps=function(d,u){return ti(d,u),p(d),null};var I=y.prototype;return I.scrollTo=function(d){d=Math.max(0,d),this.setState(function(u){return u.scrollOffset===d?null:{scrollDirection:u.scrollOffset<d?"forward":"backward",scrollOffset:d,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},I.scrollToItem=function(d,u){u===void 0&&(u="auto");var g=this.props,f=g.itemCount,v=g.layout,D=this.state.scrollOffset;d=Math.max(0,Math.min(d,f-1));var T=0;if(this._outerRef){var w=this._outerRef;T=v==="vertical"?w.scrollWidth>w.clientWidth?Rt():0:w.scrollHeight>w.clientHeight?Rt():0}this.scrollTo(o(this.props,d,u,D,this._instanceProps,T))},I.componentDidMount=function(){var d=this.props,u=d.direction,g=d.initialScrollOffset,f=d.layout;if(typeof g=="number"&&this._outerRef!=null){var v=this._outerRef;u==="horizontal"||f==="horizontal"?v.scrollLeft=g:v.scrollTop=g}this._callPropsCallbacks()},I.componentDidUpdate=function(){var d=this.props,u=d.direction,g=d.layout,f=this.state,v=f.scrollOffset;if(f.scrollUpdateWasRequested&&this._outerRef!=null){var D=this._outerRef;if(u==="horizontal"||g==="horizontal")if(u==="rtl")switch(At()){case"negative":D.scrollLeft=-v;break;case"positive-ascending":D.scrollLeft=v;break;default:var T=D.clientWidth;D.scrollLeft=D.scrollWidth-T-v;break}else D.scrollLeft=v;else D.scrollTop=v}this._callPropsCallbacks()},I.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&kt(this._resetIsScrollingTimeoutId)},I.render=function(){var d=this.props,u=d.children,g=d.className,f=d.direction,v=d.height,D=d.innerRef,T=d.innerElementType,w=d.innerTagName,E=d.itemCount,C=d.itemData,L=d.itemKey,U=L===void 0?Zn:L,$=d.layout,re=d.outerElementType,an=d.outerTagName,un=d.style,ln=d.useIsScrolling,cn=d.width,rt=this.state.isScrolling,be=f==="horizontal"||$==="horizontal",dn=be?this._onScrollHorizontal:this._onScrollVertical,nt=this._getRangeToRender(),fn=nt[0],hn=nt[1],it=[];if(E>0)for(var J=fn;J<=hn;J++)it.push((0,h.createElement)(u,{data:C,key:U(J,C),index:J,isScrolling:ln?rt:void 0,style:this._getItemStyle(J)}));var ot=n(this.props,this._instanceProps);return(0,h.createElement)(re||an||"div",{className:g,onScroll:dn,ref:this._outerRefSetter,style:yn({position:"relative",height:v,width:cn,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:f},un)},(0,h.createElement)(T||w||"div",{children:it,ref:D,style:{height:be?"100%":ot,pointerEvents:rt?"none":void 0,width:be?ot:"100%"}}))},I._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"&&this.props.itemCount>0){var d=this._getRangeToRender(),u=d[0],g=d[1],f=d[2],v=d[3];this._callOnItemsRendered(u,g,f,v)}if(typeof this.props.onScroll=="function"){var D=this.state,T=D.scrollDirection,w=D.scrollOffset,E=D.scrollUpdateWasRequested;this._callOnScroll(T,w,E)}},I._getRangeToRender=function(){var d=this.props,u=d.itemCount,g=d.overscanCount,f=this.state,v=f.isScrolling,D=f.scrollDirection,T=f.scrollOffset;if(u===0)return[0,0,0,0];var w=s(this.props,T,this._instanceProps),E=a(this.props,w,T,this._instanceProps),C=!v||D==="backward"?Math.max(1,g):1,L=!v||D==="forward"?Math.max(1,g):1;return[Math.max(0,w-C),Math.max(0,Math.min(u-1,E+L)),w,E]},y})(h.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var ti=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},ri=ei({getItemOffset:function(e,t){return t*e.itemSize},getItemSize:function(e,t){return e.itemSize},getEstimatedTotalSize:function(e){var t=e.itemCount;return e.itemSize*t},getOffsetForIndexAndAlignment:function(e,t,r,n,i,o){var s=e.direction,a=e.height,l=e.itemCount,c=e.itemSize,p=e.layout,O=e.width,y=s==="horizontal"||p==="horizontal"?O:a,I=Math.max(0,l*c-y),d=Math.min(I,t*c),u=Math.max(0,t*c-y+c+o);switch(r==="smart"&&(r=n>=u-y&&n<=d+y?"auto":"center"),r){case"start":return d;case"end":return u;case"center":var g=Math.round(u+(d-u)/2);return g<Math.ceil(y/2)?0:g>I+Math.floor(y/2)?I:g;case"auto":default:return n>=u&&n<=d?n:n<u?u:d}},getStartIndexForOffset:function(e,t){var r=e.itemCount,n=e.itemSize;return Math.max(0,Math.min(r-1,Math.floor(t/n)))},getStopIndexForStartIndex:function(e,t,r){var n=e.direction,i=e.height,o=e.itemCount,s=e.itemSize,a=e.layout,l=e.width,c=n==="horizontal"||a==="horizontal",p=t*s,O=c?l:i,y=Math.ceil((O+r-p)/s);return Math.max(0,Math.min(o-1,t+y-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});function ni(){let e=P(),t=In().cursor;if(!t||t.type!=="line")return null;let r=e.indent,n=e.rowHeight*t.index+(e.props.padding??e.props.paddingTop??0),i=r*t.level,o=e.renderCursor;return(0,m.jsx)(o,{top:n,left:i,indent:r})}var ii=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const oi=(0,h.forwardRef)(function(e,t){let{children:r}=e,n=ii(e,["children"]),i=P();return(0,m.jsxs)("div",Object.assign({ref:t},n,{onClick:o=>{o.currentTarget===o.target&&i.deselectAll()},children:[(0,m.jsx)(si,{}),r]}))});var si=()=>{let e=P();return(0,m.jsx)("div",{style:{height:e.visibleNodes.length*e.rowHeight,width:"100%",position:"absolute",left:"0",right:"0"},children:(0,m.jsx)(ni,{})})},ai=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const ui=(0,h.forwardRef)(function(e,t){var{style:r}=e,n=ai(e,["style"]);let i=P(),o=i.props.padding??i.props.paddingTop??0,s=i.props.padding??i.props.paddingBottom??0;return(0,m.jsx)("div",Object.assign({ref:t,style:Object.assign(Object.assign({},r),{height:`${parseFloat(r.height)+o+s}px`})},n))});var _t=(0,h.createContext)({dragDropManager:void 0}),_;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(_||(_={}));function b(e,t){var r=[...arguments].slice(2);if(!e){var n;if(t===void 0)n=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=0;n=Error(t.replace(/%s/g,function(){return r[i++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}var Ce="dnd-core/INIT_COORDS",se="dnd-core/BEGIN_DRAG",xe="dnd-core/PUBLISH_DRAG_SOURCE",ae="dnd-core/HOVER",ue="dnd-core/DROP",le="dnd-core/END_DRAG";function Mt(e,t){return{type:Ce,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}function Ne(e){"@babel/helpers - typeof";return Ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ne(e)}function li(e,t,r){return t.split(".").reduce(function(n,i){return n&&n[i]?n[i]:r||null},e)}function ci(e,t){return e.filter(function(r){return r!==t})}function Lt(e){return Ne(e)==="object"}function di(e,t){var r=new Map,n=function(o){r.set(o,r.has(o)?r.get(o)+1:1)};e.forEach(n),t.forEach(n);var i=[];return r.forEach(function(o,s){o===1&&i.push(s)}),i}function fi(e,t){return e.filter(function(r){return t.indexOf(r)>-1})}var hi={type:Ce,payload:{clientOffset:null,sourceClientOffset:null}};function gi(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{publishSource:!0},n=r.publishSource,i=n===void 0?!0:n,o=r.clientOffset,s=r.getSourceClientOffset,a=e.getMonitor(),l=e.getRegistry();e.dispatch(Mt(o)),pi(t,a,l);var c=mi(t,a);if(c===null){e.dispatch(hi);return}var p=null;if(o){if(!s)throw Error("getSourceClientOffset must be defined");vi(s),p=s(c)}e.dispatch(Mt(o,p));var O=l.getSource(c).beginDrag(a,c);if(O!=null)return yi(O),l.pinSource(c),{type:se,payload:{itemType:l.getSourceType(c),item:O,sourceId:c,clientOffset:o||null,sourceClientOffset:p||null,isSourcePublic:!!i}}}}function pi(e,t,r){b(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(n){b(r.getSource(n),"Expected sourceIds to be registered.")})}function vi(e){b(typeof e=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function yi(e){b(Lt(e),"Item must be an object.")}function mi(e,t){for(var r=null,n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}function bi(e){return function(){if(e.getMonitor().isDragging())return{type:xe}}}function je(e,t){return t===null?e===null:Array.isArray(e)?e.some(function(r){return r===t}):e===t}function Oi(e){return function(t){var r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).clientOffset;Ii(t);var n=t.slice(0),i=e.getMonitor(),o=e.getRegistry();return Si(n,i,o),Di(n,o,i.getItemType()),wi(n,i,o),{type:ae,payload:{targetIds:n,clientOffset:r||null}}}}function Ii(e){b(Array.isArray(e),"Expected targetIds to be an array.")}function Si(e,t,r){b(t.isDragging(),"Cannot call hover while not dragging."),b(!t.didDrop(),"Cannot call hover after drop.");for(var n=0;n<e.length;n++){var i=e[n];b(e.lastIndexOf(i)===n,"Expected targetIds to be unique in the passed array."),b(r.getTarget(i),"Expected targetIds to be registered.")}}function Di(e,t,r){for(var n=e.length-1;n>=0;n--){var i=e[n];je(t.getTargetType(i),r)||e.splice(n,1)}}function wi(e,t,r){e.forEach(function(n){r.getTarget(n).hover(t,n)})}function Ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ft(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]==null?{}:arguments[t];t%2?Ht(Object(r),!0).forEach(function(n){Ti(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ti(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ei(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.getMonitor(),n=e.getRegistry();Ci(r),ji(r).forEach(function(i,o){var s=xi(i,o,n,r),a={type:ue,payload:{dropResult:Ft(Ft({},t),s)}};e.dispatch(a)})}}function Ci(e){b(e.isDragging(),"Cannot call drop while not dragging."),b(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function xi(e,t,r,n){var i=r.getTarget(e),o=i?i.drop(n,e):void 0;return Ni(o),o===void 0&&(o=t===0?{}:n.getDropResult()),o}function Ni(e){b(e===void 0||Lt(e),"Drop result must either be an object or undefined.")}function ji(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function Pi(e){return function(){var t=e.getMonitor(),r=e.getRegistry();ki(t);var n=t.getSourceId();return n!=null&&(r.getSource(n,!0).endDrag(t,n),r.unpinSource()),{type:le}}}function ki(e){b(e.isDragging(),"Cannot call endDrag while not dragging.")}function Ri(e){return{beginDrag:gi(e),publishDragSource:bi(e),hover:Oi(e),drop:Ei(e),endDrag:Pi(e)}}function Ai(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function Ut(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _i(e,t,r){return t&&Ut(e.prototype,t),r&&Ut(e,r),e}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Mi=(function(){function e(t,r){var n=this;Ai(this,e),ee(this,"store",void 0),ee(this,"monitor",void 0),ee(this,"backend",void 0),ee(this,"isSetUp",!1),ee(this,"handleRefCountChange",function(){var i=n.store.getState().refCount>0;n.backend&&(i&&!n.isSetUp?(n.backend.setup(),n.isSetUp=!0):!i&&n.isSetUp&&(n.backend.teardown(),n.isSetUp=!1))}),this.store=t,this.monitor=r,t.subscribe(this.handleRefCountChange)}return _i(e,[{key:"receiveBackend",value:function(t){this.backend=t}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var t=this,r=this.store.dispatch;function n(o){return function(){var s=[...arguments],a=o.apply(t,s);a!==void 0&&r(a)}}var i=Ri(this);return Object.keys(i).reduce(function(o,s){var a=i[s];return o[s]=n(a),o},{})}},{key:"dispatch",value:function(t){this.store.dispatch(t)}}]),e})();function k(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Bt=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})(),Pe=function(){return Math.random().toString(36).substring(7).split("").join(".")},zt={INIT:"@@redux/INIT"+Pe(),REPLACE:"@@redux/REPLACE"+Pe(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Pe()}};function Li(e){if(typeof e!="object"||!e)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Wt(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw Error(k(0));if(typeof t=="function"&&r===void 0&&(r=t,t=void 0),r!==void 0){if(typeof r!="function")throw Error(k(1));return r(Wt)(e,t)}if(typeof e!="function")throw Error(k(2));var i=e,o=t,s=[],a=s,l=!1;function c(){a===s&&(a=s.slice())}function p(){if(l)throw Error(k(3));return o}function O(u){if(typeof u!="function")throw Error(k(4));if(l)throw Error(k(5));var g=!0;return c(),a.push(u),function(){if(g){if(l)throw Error(k(6));g=!1,c();var f=a.indexOf(u);a.splice(f,1),s=null}}}function y(u){if(!Li(u))throw Error(k(7));if(u.type===void 0)throw Error(k(8));if(l)throw Error(k(9));try{l=!0,o=i(o,u)}finally{l=!1}for(var g=s=a,f=0;f<g.length;f++){var v=g[f];v()}return u}function I(u){if(typeof u!="function")throw Error(k(10));i=u,y({type:zt.REPLACE})}function d(){var u,g=O;return u={subscribe:function(f){if(typeof f!="object"||!f)throw Error(k(11));function v(){f.next&&f.next(p())}return v(),{unsubscribe:g(v)}}},u[Bt]=function(){return this},u}return y({type:zt.INIT}),n={dispatch:y,subscribe:O,getState:p,replaceReducer:I},n[Bt]=d,n}var Hi=function(e,t){return e===t};function Fi(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function Ui(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Hi;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}function $t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Gt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]==null?{}:arguments[t];t%2?$t(Object(r),!0).forEach(function(n){Bi(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$t(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Kt={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function zi(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Kt,t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case Ce:case se:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case ae:return Fi(e.clientOffset,r.clientOffset)?e:Gt(Gt({},e),{},{clientOffset:r.clientOffset});case le:case ue:return Kt;default:return e}}var ke="dnd-core/ADD_SOURCE",Re="dnd-core/ADD_TARGET",Ae="dnd-core/REMOVE_SOURCE",ce="dnd-core/REMOVE_TARGET";function Wi(e){return{type:ke,payload:{sourceId:e}}}function $i(e){return{type:Re,payload:{targetId:e}}}function Gi(e){return{type:Ae,payload:{sourceId:e}}}function Ki(e){return{type:ce,payload:{targetId:e}}}function Vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]==null?{}:arguments[t];t%2?Vt(Object(r),!0).forEach(function(n){Vi(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Yi={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function qi(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Yi,t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case se:return R(R({},e),{},{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case xe:return R(R({},e),{},{isSourcePublic:!0});case ae:return R(R({},e),{},{targetIds:r.targetIds});case ce:return e.targetIds.indexOf(r.targetId)===-1?e:R(R({},e),{},{targetIds:ci(e.targetIds,r.targetId)});case ue:return R(R({},e),{},{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case le:return R(R({},e),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function Xi(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case ke:case Re:return e+1;case Ae:case ce:return e-1;default:return e}}var de=[],_e=[];de.__IS_NONE__=!0,_e.__IS_ALL__=!0;function Ji(e,t){return e===de?!1:e===_e||t===void 0?!0:fi(t,e).length>0}function Qi(){arguments.length>0&&arguments[0]!==void 0&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ae:break;case ke:case Re:case ce:case Ae:return de;case se:case xe:case le:case ue:default:return _e}var t=e.payload,r=t.targetIds,n=r===void 0?[]:r,i=t.prevTargetIds,o=i===void 0?[]:i,s=di(n,o);if(!(s.length>0||!Ui(n,o)))return de;var a=o[o.length-1],l=n[n.length-1];return a!==l&&(a&&s.push(a),l&&s.push(l)),s}function Zi(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:0)+1}function Yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function qt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]==null?{}:arguments[t];t%2?Yt(Object(r),!0).forEach(function(n){eo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function to(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:Qi(e.dirtyHandlerIds,{type:t.type,payload:qt(qt({},t.payload),{},{prevTargetIds:li(e,"dragOperation.targetIds",[])})}),dragOffset:zi(e.dragOffset,t),refCount:Xi(e.refCount,t),dragOperation:qi(e.dragOperation,t),stateId:Zi(e.stateId)}}function ro(e,t){return{x:e.x+t.x,y:e.y+t.y}}function Xt(e,t){return{x:e.x-t.x,y:e.y-t.y}}function no(e){var t=e.clientOffset,r=e.initialClientOffset,n=e.initialSourceClientOffset;return!t||!r||!n?null:Xt(ro(t,n),r)}function io(e){var t=e.clientOffset,r=e.initialClientOffset;return!t||!r?null:Xt(t,r)}function oo(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function Jt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function so(e,t,r){return t&&Jt(e.prototype,t),r&&Jt(e,r),e}function Qt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ao=(function(){function e(t,r){oo(this,e),Qt(this,"store",void 0),Qt(this,"registry",void 0),this.store=t,this.registry=r}return so(e,[{key:"subscribeToStateChange",value:function(t){var r=this,n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{handlerIds:void 0}).handlerIds;b(typeof t=="function","listener must be a function."),b(n===void 0||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");var i=this.store.getState().stateId;return this.store.subscribe(function(){var o=r.store.getState(),s=o.stateId;try{s===i||s===i+1&&!Ji(o.dirtyHandlerIds,n)||t()}finally{i=s}})}},{key:"subscribeToOffsetChange",value:function(t){var r=this;b(typeof t=="function","listener must be a function.");var n=this.store.getState().dragOffset;return this.store.subscribe(function(){var i=r.store.getState().dragOffset;i!==n&&(n=i,t())})}},{key:"canDragSource",value:function(t){if(!t)return!1;var r=this.registry.getSource(t);return b(r,`Expected to find a valid source. sourceId=${t}`),this.isDragging()?!1:r.canDrag(this,t)}},{key:"canDropOnTarget",value:function(t){if(!t)return!1;var r=this.registry.getTarget(t);return b(r,`Expected to find a valid target. targetId=${t}`),!this.isDragging()||this.didDrop()?!1:je(this.registry.getTargetType(t),this.getItemType())&&r.canDrop(this,t)}},{key:"isDragging",value:function(){return!!this.getItemType()}},{key:"isDraggingSource",value:function(t){if(!t)return!1;var r=this.registry.getSource(t,!0);return b(r,`Expected to find a valid source. sourceId=${t}`),!this.isDragging()||!this.isSourcePublic()||this.registry.getSourceType(t)!==this.getItemType()?!1:r.isDragging(this,t)}},{key:"isOverTarget",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shallow:!1};if(!t)return!1;var n=r.shallow;if(!this.isDragging())return!1;var i=this.registry.getTargetType(t),o=this.getItemType();if(o&&!je(i,o))return!1;var s=this.getTargetIds();if(!s.length)return!1;var a=s.indexOf(t);return n?a===s.length-1:a>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return!!this.store.getState().dragOperation.isSourcePublic}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return no(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function(){return io(this.store.getState().dragOffset)}}]),e})(),uo=0;function lo(){return uo++}function Me(e){"@babel/helpers - typeof";return Me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Me(e)}function co(e){b(typeof e.canDrag=="function","Expected canDrag to be a function."),b(typeof e.beginDrag=="function","Expected beginDrag to be a function."),b(typeof e.endDrag=="function","Expected endDrag to be a function.")}function fo(e){b(typeof e.canDrop=="function","Expected canDrop to be a function."),b(typeof e.hover=="function","Expected hover to be a function."),b(typeof e.drop=="function","Expected beginDrag to be a function.")}function Le(e,t){if(t&&Array.isArray(e)){e.forEach(function(r){return Le(r,!1)});return}b(typeof e=="string"||Me(e)==="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Zt=typeof global<"u"?global:self,er=Zt.MutationObserver||Zt.WebKitMutationObserver;function tr(e){return function(){let t=setTimeout(n,0),r=setInterval(n,50);function n(){clearTimeout(t),clearInterval(r),e()}}}function ho(e){let t=1,r=new er(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}const go=typeof er=="function"?ho:tr;var po=class{enqueueTask(e){let{queue:t,requestFlush:r}=this;t.length||(r(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{let{queue:e}=this;for(;this.index<e.length;){let t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let r=0,n=e.length-this.index;r<n;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=go(this.flush),this.requestErrorThrow=tr(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}},vo=class{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}},yo=class{create(e){let t=this.freeTasks,r=t.length?t.pop():new vo(this.onError,n=>t[t.length]=n);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}},rr=new po,mo=new yo(rr.registerPendingError);function bo(e){rr.enqueueTask(mo.create(e))}function Oo(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function nr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Io(e,t,r){return t&&nr(e.prototype,t),r&&nr(e,r),e}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function So(e,t){return Eo(e)||To(e,t)||wo(e,t)||Do()}function Do(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wo(e,t){if(e){if(typeof e=="string")return ir(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ir(e,t)}}function ir(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function To(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],i=!0,o=!1,s,a;try{for(r=r.call(e);!(i=(s=r.next()).done)&&(n.push(s.value),!(t&&n.length===t));i=!0);}catch(l){o=!0,a=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw a}}return n}}function Eo(e){if(Array.isArray(e))return e}function Co(e){var t=lo().toString();switch(e){case _.SOURCE:return`S${t}`;case _.TARGET:return`T${t}`;default:throw Error(`Unknown Handler Role: ${e}`)}}function or(e){switch(e[0]){case"S":return _.SOURCE;case"T":return _.TARGET;default:b(!1,`Cannot parse handler ID: ${e}`)}}function sr(e,t){var r=e.entries(),n=!1;do{var i=r.next(),o=i.done;if(So(i.value,2)[1]===t)return!0;n=!!o}while(!n);return!1}var xo=(function(){function e(t){Oo(this,e),Y(this,"types",new Map),Y(this,"dragSources",new Map),Y(this,"dropTargets",new Map),Y(this,"pinnedSourceId",null),Y(this,"pinnedSource",null),Y(this,"store",void 0),this.store=t}return Io(e,[{key:"addSource",value:function(t,r){Le(t),co(r);var n=this.addHandler(_.SOURCE,t,r);return this.store.dispatch(Wi(n)),n}},{key:"addTarget",value:function(t,r){Le(t,!0),fo(r);var n=this.addHandler(_.TARGET,t,r);return this.store.dispatch($i(n)),n}},{key:"containsHandler",value:function(t){return sr(this.dragSources,t)||sr(this.dropTargets,t)}},{key:"getSource",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return b(this.isSourceId(t),"Expected a valid source ID."),r&&t===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(t)}},{key:"getTarget",value:function(t){return b(this.isTargetId(t),"Expected a valid target ID."),this.dropTargets.get(t)}},{key:"getSourceType",value:function(t){return b(this.isSourceId(t),"Expected a valid source ID."),this.types.get(t)}},{key:"getTargetType",value:function(t){return b(this.isTargetId(t),"Expected a valid target ID."),this.types.get(t)}},{key:"isSourceId",value:function(t){return or(t)===_.SOURCE}},{key:"isTargetId",value:function(t){return or(t)===_.TARGET}},{key:"removeSource",value:function(t){var r=this;b(this.getSource(t),"Expected an existing source."),this.store.dispatch(Gi(t)),bo(function(){r.dragSources.delete(t),r.types.delete(t)})}},{key:"removeTarget",value:function(t){b(this.getTarget(t),"Expected an existing target."),this.store.dispatch(Ki(t)),this.dropTargets.delete(t),this.types.delete(t)}},{key:"pinSource",value:function(t){var r=this.getSource(t);b(r,"Expected an existing source."),this.pinnedSourceId=t,this.pinnedSource=r}},{key:"unpinSource",value:function(){b(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(t,r,n){var i=Co(t);return this.types.set(i,r),t===_.SOURCE?this.dragSources.set(i,n):t===_.TARGET&&this.dropTargets.set(i,n),i}}]),e})();function No(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=jo(arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1),i=new Mi(n,new ao(n,new xo(n))),o=e(i,t,r);return i.receiveBackend(o),i}function jo(e){var t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Wt(to,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}var Po=["children"];function ko(e,t){return Mo(e)||_o(e,t)||Ao(e,t)||Ro()}function Ro(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ao(e,t){if(e){if(typeof e=="string")return ar(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ar(e,t)}}function ar(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _o(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],i=!0,o=!1,s,a;try{for(r=r.call(e);!(i=(s=r.next()).done)&&(n.push(s.value),!(t&&n.length===t));i=!0);}catch(l){o=!0,a=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw a}}return n}}function Mo(e){if(Array.isArray(e))return e}function Lo(e,t){if(e==null)return{};var r=Ho(e,t),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ho(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var ur=0,fe=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),Fo=(0,h.memo)(function(e){var t=e.children,r=ko(Uo(Lo(e,Po)),2),n=r[0],i=r[1];return(0,h.useEffect)(function(){if(i){var o=lr();return++ur,function(){--ur===0&&(o[fe]=null)}}},[]),(0,m.jsx)(_t.Provider,Object.assign({value:n},{children:t}),void 0)});function Uo(e){return"manager"in e?[{dragDropManager:e.manager},!1]:[Bo(e.backend,e.context,e.options,e.debugMode),!e.context]}function Bo(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lr(),r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=t;return i[fe]||(i[fe]={dragDropManager:No(e,t,r,n)}),i[fe]}function lr(){return typeof global<"u"?global:window}function zo(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function cr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wo(e,t,r){return t&&cr(e.prototype,t),r&&cr(e,r),e}function dr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var He=!1,Fe=!1,$o=(function(){function e(t){zo(this,e),dr(this,"internalMonitor",void 0),dr(this,"sourceId",null),this.internalMonitor=t.getMonitor()}return Wo(e,[{key:"receiveHandlerId",value:function(t){this.sourceId=t}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){b(!He,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return He=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{He=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;b(!Fe,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Fe=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Fe=!1}}},{key:"subscribeToStateChange",value:function(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}},{key:"isDraggingSource",value:function(t){return this.internalMonitor.isDraggingSource(t)}},{key:"isOverTarget",value:function(t,r){return this.internalMonitor.isOverTarget(t,r)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(t){return this.internalMonitor.subscribeToOffsetChange(t)}},{key:"canDragSource",value:function(t){return this.internalMonitor.canDragSource(t)}},{key:"canDropOnTarget",value:function(t){return this.internalMonitor.canDropOnTarget(t)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e})();function Go(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function fr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ko(e,t,r){return t&&fr(e.prototype,t),r&&fr(e,r),e}function hr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ue=!1,Vo=(function(){function e(t){Go(this,e),hr(this,"internalMonitor",void 0),hr(this,"targetId",null),this.internalMonitor=t.getMonitor()}return Ko(e,[{key:"receiveHandlerId",value:function(t){this.targetId=t}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(t,r){return this.internalMonitor.subscribeToStateChange(t,r)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;b(!Ue,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Ue=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Ue=!1}}},{key:"isOver",value:function(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e})();function Yo(e){if(typeof e.type!="string"){var t=e.type.displayName||e.type.name||"the component";throw Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}}function qo(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!(0,h.isValidElement)(t)){var n=t;return e(n,r),n}var i=t;return Yo(i),Xo(i,r?function(o){return e(o,r)}:e)}}function gr(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{var i=qo(n);t[r]=function(){return i}}}),t}function pr(e,t){typeof e=="function"?e(t):e.current=t}function Xo(e,t){var r=e.ref;return b(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?(0,h.cloneElement)(e,{ref:function(n){pr(r,n),pr(t,n)}}):(0,h.cloneElement)(e,{ref:t})}function Be(e){"@babel/helpers - typeof";return Be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Be(e)}function ze(e){return e!==null&&Be(e)==="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function We(e,t,r,n){var i=r?r.call(n,e,t):void 0;if(i!==void 0)return!!i;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!a(c))return!1;var p=e[c],O=t[c];if(i=r?r.call(n,p,O,c):void 0,i===!1||i===void 0&&p!==O)return!1}return!0}function Jo(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qo(e,t,r){return t&&vr(e.prototype,t),r&&vr(e,r),e}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Zo=(function(){function e(t){var r=this;Jo(this,e),N(this,"hooks",gr({dragSource:function(n,i){r.clearDragSource(),r.dragSourceOptions=i||null,ze(n)?r.dragSourceRef=n:r.dragSourceNode=n,r.reconnectDragSource()},dragPreview:function(n,i){r.clearDragPreview(),r.dragPreviewOptions=i||null,ze(n)?r.dragPreviewRef=n:r.dragPreviewNode=n,r.reconnectDragPreview()}})),N(this,"handlerId",null),N(this,"dragSourceRef",null),N(this,"dragSourceNode",void 0),N(this,"dragSourceOptionsInternal",null),N(this,"dragSourceUnsubscribe",void 0),N(this,"dragPreviewRef",null),N(this,"dragPreviewNode",void 0),N(this,"dragPreviewOptionsInternal",null),N(this,"dragPreviewUnsubscribe",void 0),N(this,"lastConnectedHandlerId",null),N(this,"lastConnectedDragSource",null),N(this,"lastConnectedDragSourceOptions",null),N(this,"lastConnectedDragPreview",null),N(this,"lastConnectedDragPreviewOptions",null),N(this,"backend",void 0),this.backend=t}return Qo(e,[{key:"receiveHandlerId",value:function(t){this.handlerId!==t&&(this.handlerId=t,this.reconnect())}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(t){this.dragSourceOptionsInternal=t}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(t){this.dragPreviewOptionsInternal=t}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var t=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();if(r&&this.disconnectDragSource(),this.handlerId){if(!t){this.lastConnectedDragSource=t;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions))}}},{key:"reconnectDragPreview",value:function(){var t=this.dragPreview,r=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!We(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!We(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe=(this.dragSourceUnsubscribe(),void 0))}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}}]),e})();function es(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function yr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ts(e,t,r){return t&&yr(e.prototype,t),r&&yr(e,r),e}function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rs=(function(){function e(t){var r=this;es(this,e),H(this,"hooks",gr({dropTarget:function(n,i){r.clearDropTarget(),r.dropTargetOptions=i,ze(n)?r.dropTargetRef=n:r.dropTargetNode=n,r.reconnect()}})),H(this,"handlerId",null),H(this,"dropTargetRef",null),H(this,"dropTargetNode",void 0),H(this,"dropTargetOptionsInternal",null),H(this,"unsubscribeDropTarget",void 0),H(this,"lastConnectedHandlerId",null),H(this,"lastConnectedDropTarget",null),H(this,"lastConnectedDropTargetOptions",null),H(this,"backend",void 0),this.backend=t}return ts(e,[{key:"connectTarget",get:function(){return this.dropTarget}},{key:"reconnect",value:function(){var t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();var r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}},{key:"receiveHandlerId",value:function(t){t!==this.handlerId&&(this.handlerId=t,this.reconnect())}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(t){this.dropTargetOptionsInternal=t}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!We(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget=(this.unsubscribeDropTarget(),void 0))}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}}]),e})();function ns(e,t,r){var n=r.getRegistry(),i=n.addTarget(e,t);return[i,function(){return n.removeTarget(i)}]}function is(e,t,r){var n=r.getRegistry(),i=n.addSource(e,t);return[i,function(){return n.removeSource(i)}]}var z=typeof window<"u"?h.useLayoutEffect:h.useEffect;function $e(e){"@babel/helpers - typeof";return $e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$e(e)}function os(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function mr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ss(e,t,r){return t&&mr(e.prototype,t),r&&mr(e,r),e}function Ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var as=(function(){function e(t,r,n){os(this,e),Ge(this,"spec",void 0),Ge(this,"monitor",void 0),Ge(this,"connector",void 0),this.spec=t,this.monitor=r,this.connector=n}return ss(e,[{key:"beginDrag",value:function(){var t=this.spec,r=this.monitor,n=null;return n=$e(t.item)==="object"?t.item:typeof t.item=="function"?t.item(r):{},n??null}},{key:"canDrag",value:function(){var t=this.spec,r=this.monitor;return typeof t.canDrag=="boolean"?t.canDrag:typeof t.canDrag=="function"?t.canDrag(r):!0}},{key:"isDragging",value:function(t,r){var n=this.spec,i=this.monitor,o=n.isDragging;return o?o(i):r===t.getSourceId()}},{key:"endDrag",value:function(){var t=this.spec,r=this.monitor,n=this.connector,i=t.end;i&&i(r.getItem(),r),n.reconnect()}}]),e})();function us(e,t,r){var n=(0,h.useMemo)(function(){return new as(e,t,r)},[t,r]);return(0,h.useEffect)(function(){n.spec=e},[e]),n}function W(){var e=(0,h.useContext)(_t).dragDropManager;return b(e!=null,"Expected drag drop context"),e}function ls(e){return(0,h.useMemo)(function(){var t=e.type;return b(t!=null,"spec.type must be defined"),t},[e])}function cs(e,t){return gs(e)||hs(e,t)||fs(e,t)||ds()}function ds(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fs(e,t){if(e){if(typeof e=="string")return br(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return br(e,t)}}function br(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function hs(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],i=!0,o=!1,s,a;try{for(r=r.call(e);!(i=(s=r.next()).done)&&(n.push(s.value),!(t&&n.length===t));i=!0);}catch(l){o=!0,a=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw a}}return n}}function gs(e){if(Array.isArray(e))return e}function ps(e,t,r){var n=W(),i=us(e,t,r),o=ls(e);z(function(){if(o!=null){var s=cs(is(o,i,n),2),a=s[0],l=s[1];return t.receiveHandlerId(a),r.receiveHandlerId(a),l}},[n,t,r,i,o])}function vs(e){return Os(e)||bs(e)||ms(e)||ys()}function ys(){throw TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ms(e,t){if(e){if(typeof e=="string")return Ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ke(e,t)}}function bs(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Os(e){if(Array.isArray(e))return Ke(e)}function Ke(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Or(e,t){var r=vs(t||[]);return t==null&&typeof e!="function"&&r.push(e),(0,h.useMemo)(function(){return typeof e=="function"?e():e},r)}function Is(){var e=W();return(0,h.useMemo)(function(){return new $o(e)},[e])}function Ss(e,t){var r=W(),n=(0,h.useMemo)(function(){return new Zo(r.getBackend())},[r]);return z(function(){return n.dragSourceOptions=e||null,n.reconnect(),function(){return n.disconnectDragSource()}},[n,e]),z(function(){return n.dragPreviewOptions=t||null,n.reconnect(),function(){return n.disconnectDragPreview()}},[n,t]),n}var Ds=ne(mn());function ws(e,t){return xs(e)||Cs(e,t)||Es(e,t)||Ts()}function Ts(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Es(e,t){if(e){if(typeof e=="string")return Ir(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ir(e,t)}}function Ir(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Cs(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],i=!0,o=!1,s,a;try{for(r=r.call(e);!(i=(s=r.next()).done)&&(n.push(s.value),!(t&&n.length===t));i=!0);}catch(l){o=!0,a=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw a}}return n}}function xs(e){if(Array.isArray(e))return e}function Sr(e,t,r){var n=ws((0,h.useState)(function(){return t(e)}),2),i=n[0],o=n[1],s=(0,h.useCallback)(function(){var a=t(e);(0,Ds.default)(i,a)||(o(a),r&&r())},[i,e,r]);return z(s),[i,s]}function Ns(e,t){return Rs(e)||ks(e,t)||Ps(e,t)||js()}function js(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ps(e,t){if(e){if(typeof e=="string")return Dr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dr(e,t)}}function Dr(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ks(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],i=!0,o=!1,s,a;try{for(r=r.call(e);!(i=(s=r.next()).done)&&(n.push(s.value),!(t&&n.length===t));i=!0);}catch(l){o=!0,a=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw a}}return n}}function Rs(e){if(Array.isArray(e))return e}function As(e,t,r){var n=Ns(Sr(e,t,r),2),i=n[0],o=n[1];return z(function(){var s=e.getHandlerId();if(s!=null)return e.subscribeToStateChange(o,{handlerIds:[s]})},[e,o]),i}function wr(e,t,r){return As(t,e||function(){return{}},function(){return r.reconnect()})}function _s(e){return(0,h.useMemo)(function(){return e.hooks.dragSource()},[e])}function Ms(e){return(0,h.useMemo)(function(){return e.hooks.dragPreview()},[e])}function Ls(e,t){var r=Or(e,t);b(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");var n=Is(),i=Ss(r.options,r.previewOptions);return ps(r,n,i),[wr(r.collect,n,i),_s(i),Ms(i)]}function Hs(e){var t=e.accept;return(0,h.useMemo)(function(){return b(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]},[t])}function Fs(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function Tr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Us(e,t,r){return t&&Tr(e.prototype,t),r&&Tr(e,r),e}function Er(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Bs=(function(){function e(t,r){Fs(this,e),Er(this,"spec",void 0),Er(this,"monitor",void 0),this.spec=t,this.monitor=r}return Us(e,[{key:"canDrop",value:function(){var t=this.spec,r=this.monitor;return t.canDrop?t.canDrop(r.getItem(),r):!0}},{key:"hover",value:function(){var t=this.spec,r=this.monitor;t.hover&&t.hover(r.getItem(),r)}},{key:"drop",value:function(){var t=this.spec,r=this.monitor;if(t.drop)return t.drop(r.getItem(),r)}}]),e})();function zs(e,t){var r=(0,h.useMemo)(function(){return new Bs(e,t)},[t]);return(0,h.useEffect)(function(){r.spec=e},[e]),r}function Ws(e,t){return Vs(e)||Ks(e,t)||Gs(e,t)||$s()}function $s(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gs(e,t){if(e){if(typeof e=="string")return Cr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cr(e,t)}}function Cr(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ks(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],i=!0,o=!1,s,a;try{for(r=r.call(e);!(i=(s=r.next()).done)&&(n.push(s.value),!(t&&n.length===t));i=!0);}catch(l){o=!0,a=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw a}}return n}}function Vs(e){if(Array.isArray(e))return e}function Ys(e,t,r){var n=W(),i=zs(e,t),o=Hs(e);z(function(){var s=Ws(ns(o,i,n),2),a=s[0],l=s[1];return t.receiveHandlerId(a),r.receiveHandlerId(a),l},[n,t,i,r,o.map(function(s){return s.toString()}).join("|")])}function qs(){var e=W();return(0,h.useMemo)(function(){return new Vo(e)},[e])}function Xs(e){var t=W(),r=(0,h.useMemo)(function(){return new rs(t.getBackend())},[t]);return z(function(){return r.dropTargetOptions=e||null,r.reconnect(),function(){return r.disconnectDropTarget()}},[e]),r}function Js(e){return(0,h.useMemo)(function(){return e.hooks.dropTarget()},[e])}function xr(e,t){var r=Or(e,t),n=qs(),i=Xs(r.options);return Ys(r,n,i),[wr(r.collect,n,i),Js(i)]}function Qs(e,t){return ra(e)||ta(e,t)||ea(e,t)||Zs()}function Zs(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ea(e,t){if(e){if(typeof e=="string")return Nr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nr(e,t)}}function Nr(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ta(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],i=!0,o=!1,s,a;try{for(r=r.call(e);!(i=(s=r.next()).done)&&(n.push(s.value),!(t&&n.length===t));i=!0);}catch(l){o=!0,a=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw a}}return n}}function ra(e){if(Array.isArray(e))return e}function na(e){var t=W().getMonitor(),r=Qs(Sr(t,e),2),n=r[0],i=r[1];return(0,h.useEffect)(function(){return t.subscribeToOffsetChange(i)}),(0,h.useEffect)(function(){return t.subscribeToStateChange(i)}),n}function jr(e){var t=null;return function(){return t??(t=e()),t}}function ia(e,t){return e.filter(function(r){return r!==t})}function oa(e,t){var r=new Set,n=function(o){return r.add(o)};e.forEach(n),t.forEach(n);var i=[];return r.forEach(function(o){return i.push(o)}),i}function sa(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function Pr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function aa(e,t,r){return t&&Pr(e.prototype,t),r&&Pr(e,r),e}function kr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ua=(function(){function e(t){sa(this,e),kr(this,"entered",[]),kr(this,"isNodeInDocument",void 0),this.isNodeInDocument=t}return aa(e,[{key:"enter",value:function(t){var r=this,n=this.entered.length;return this.entered=oa(this.entered.filter(function(i){return r.isNodeInDocument(i)&&(!i.contains||i.contains(t))}),[t]),n===0&&this.entered.length>0}},{key:"leave",value:function(t){var r=this.entered.length;return this.entered=ia(this.entered.filter(this.isNodeInDocument),t),r>0&&this.entered.length===0}},{key:"reset",value:function(){this.entered=[]}}]),e})(),la=jr(function(){return/firefox/i.test(navigator.userAgent)}),Rr=jr(function(){return!!window.safari});function ca(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function Ar(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function da(e,t,r){return t&&Ar(e.prototype,t),r&&Ar(e,r),e}function te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _r=(function(){function e(t,r){ca(this,e),te(this,"xs",void 0),te(this,"ys",void 0),te(this,"c1s",void 0),te(this,"c2s",void 0),te(this,"c3s",void 0);for(var n=t.length,i=[],o=0;o<n;o++)i.push(o);i.sort(function(U,$){return t[U]<t[$]?-1:1});for(var s=[],a=[],l=[],c,p,O=0;O<n-1;O++)c=t[O+1]-t[O],p=r[O+1]-r[O],a.push(c),s.push(p),l.push(p/c);for(var y=[l[0]],I=0;I<a.length-1;I++){var d=l[I],u=l[I+1];if(d*u<=0)y.push(0);else{c=a[I];var g=a[I+1],f=c+g;y.push(3*f/((f+g)/d+(f+c)/u))}}y.push(l[l.length-1]);for(var v=[],D=[],T,w=0;w<y.length-1;w++){T=l[w];var E=y[w],C=1/a[w],L=E+y[w+1]-T-T;v.push((T-E-L)*C),D.push(L*C*C)}this.xs=t,this.ys=r,this.c1s=y,this.c2s=v,this.c3s=D}return da(e,[{key:"interpolate",value:function(t){var r=this.xs,n=this.ys,i=this.c1s,o=this.c2s,s=this.c3s,a=r.length-1;if(t===r[a])return n[a];for(var l=0,c=s.length-1,p;l<=c;){p=Math.floor(.5*(l+c));var O=r[p];if(O<t)l=p+1;else if(O>t)c=p-1;else return n[p]}a=Math.max(0,c);var y=t-r[a],I=y*y;return n[a]+i[a]*y+o[a]*I+s[a]*y*I}}]),e})(),fa=1;function Mr(e){var t=e.nodeType===fa?e:e.parentElement;if(!t)return null;var r=t.getBoundingClientRect(),n=r.top;return{x:r.left,y:n}}function he(e){return{x:e.clientX,y:e.clientY}}function ha(e){var t;return e.nodeName==="IMG"&&(la()||!((t=document.documentElement)!=null&&t.contains(e)))}function ga(e,t,r,n){var i=e?t.width:r,o=e?t.height:n;return Rr()&&e&&(o/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:o}}function pa(e,t,r,n,i){var o=ha(t),s=Mr(o?e:t),a={x:r.x-s.x,y:r.y-s.y},l=e.offsetWidth,c=e.offsetHeight,p=n.anchorX,O=n.anchorY,y=ga(o,t,l,c),I=y.dragPreviewWidth,d=y.dragPreviewHeight,u=function(){var w=new _r([0,.5,1],[a.y,a.y/c*d,a.y+d-c]).interpolate(O);return Rr()&&o&&(w+=(window.devicePixelRatio-1)*d),w},g=function(){return new _r([0,.5,1],[a.x,a.x/l*I,a.x+I-l]).interpolate(p)},f=i.offsetX,v=i.offsetY,D=f===0||f,T=v===0||v;return{x:D?f:g(),y:T?v:u()}}var Lr=st({FILE:()=>Hr,HTML:()=>Br,TEXT:()=>Ur,URL:()=>Fr}),Hr="__NATIVE_FILE__",Fr="__NATIVE_URL__",Ur="__NATIVE_TEXT__",Br="__NATIVE_HTML__";function Ve(e,t,r){return t.reduce(function(n,i){return n||e.getData(i)},"")??r}var q;function ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ye=(q={},ge(q,Hr,{exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items},dataTransfer:function(e){return e}},matchesTypes:["Files"]}),ge(q,Br,{exposeProperties:{html:function(e,t){return Ve(e,t,"")},dataTransfer:function(e){return e}},matchesTypes:["Html","text/html"]}),ge(q,Fr,{exposeProperties:{urls:function(e,t){return Ve(e,t,"").split(`
`)},dataTransfer:function(e){return e}},matchesTypes:["Url","text/uri-list"]}),ge(q,Ur,{exposeProperties:{text:function(e,t){return Ve(e,t,"")},dataTransfer:function(e){return e}},matchesTypes:["Text","text/plain"]}),q);function va(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function zr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ya(e,t,r){return t&&zr(e.prototype,t),r&&zr(e,r),e}function Wr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ma=(function(){function e(t){va(this,e),Wr(this,"item",void 0),Wr(this,"config",void 0),this.config=t,this.item={},this.initializeExposedProperties()}return ya(e,[{key:"initializeExposedProperties",value:function(){var t=this;Object.keys(this.config.exposeProperties).forEach(function(r){Object.defineProperty(t.item,r,{configurable:!0,enumerable:!0,get:function(){return console.warn(`Browser doesn't allow reading "${r}" until the drop event.`),null}})})}},{key:"loadDataTransfer",value:function(t){var r=this;if(t){var n={};Object.keys(this.config.exposeProperties).forEach(function(i){n[i]={value:r.config.exposeProperties[i](t,r.config.matchesTypes),configurable:!0,enumerable:!0}}),Object.defineProperties(this.item,n)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(t,r){return r===t.getSourceId()}},{key:"endDrag",value:function(){}}]),e})();function ba(e,t){var r=new ma(Ye[e]);return r.loadDataTransfer(t),r}function qe(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(Ye).filter(function(r){return Ye[r].matchesTypes.some(function(n){return t.indexOf(n)>-1})})[0]||null}function Oa(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function $r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ia(e,t,r){return t&&$r(e.prototype,t),r&&$r(e,r),e}function Xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Sa=(function(){function e(t,r){Oa(this,e),Xe(this,"ownerDocument",null),Xe(this,"globalContext",void 0),Xe(this,"optionsArgs",void 0),this.globalContext=t,this.optionsArgs=r}return Ia(e,[{key:"window",get:function(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}},{key:"document",get:function(){var t;if((t=this.globalContext)!=null&&t.document)return this.globalContext.document;if(this.window)return this.window.document}},{key:"rootElement",get:function(){var t;return((t=this.optionsArgs)==null?void 0:t.rootElement)||this.window}}]),e})();function Gr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Kr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]==null?{}:arguments[t];t%2?Gr(Object(r),!0).forEach(function(n){S(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gr(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Da(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function Vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wa(e,t,r){return t&&Vr(e.prototype,t),r&&Vr(e,r),e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ta=(function(){function e(t,r,n){var i=this;Da(this,e),S(this,"options",void 0),S(this,"actions",void 0),S(this,"monitor",void 0),S(this,"registry",void 0),S(this,"enterLeaveCounter",void 0),S(this,"sourcePreviewNodes",new Map),S(this,"sourcePreviewNodeOptions",new Map),S(this,"sourceNodes",new Map),S(this,"sourceNodeOptions",new Map),S(this,"dragStartSourceIds",null),S(this,"dropTargetIds",[]),S(this,"dragEnterTargetIds",[]),S(this,"currentNativeSource",null),S(this,"currentNativeHandle",null),S(this,"currentDragSourceNode",null),S(this,"altKeyPressed",!1),S(this,"mouseMoveTimeoutTimer",null),S(this,"asyncEndDragFrameId",null),S(this,"dragOverTargetIds",null),S(this,"lastClientOffset",null),S(this,"hoverRafId",null),S(this,"getSourceClientOffset",function(o){var s=i.sourceNodes.get(o);return s&&Mr(s)||null}),S(this,"endDragNativeItem",function(){i.isDraggingNativeItem()&&(i.actions.endDrag(),i.currentNativeHandle&&i.registry.removeSource(i.currentNativeHandle),i.currentNativeHandle=null,i.currentNativeSource=null)}),S(this,"isNodeInDocument",function(o){return!!(o&&i.document&&i.document.body&&i.document.body.contains(o))}),S(this,"endDragIfSourceWasRemovedFromDOM",function(){var o=i.currentDragSourceNode;o==null||i.isNodeInDocument(o)||i.clearCurrentDragSourceNode()&&i.monitor.isDragging()&&i.actions.endDrag()}),S(this,"handleTopDragStartCapture",function(){i.clearCurrentDragSourceNode(),i.dragStartSourceIds=[]}),S(this,"handleTopDragStart",function(o){if(!o.defaultPrevented){var s=i.dragStartSourceIds;i.dragStartSourceIds=null;var a=he(o);i.monitor.isDragging()&&i.actions.endDrag(),i.actions.beginDrag(s||[],{publishSource:!1,getSourceClientOffset:i.getSourceClientOffset,clientOffset:a});var l=o.dataTransfer,c=qe(l);if(i.monitor.isDragging()){if(l&&typeof l.setDragImage=="function"){var p=i.monitor.getSourceId(),O=i.sourceNodes.get(p),y=i.sourcePreviewNodes.get(p)||O;if(y){var I=i.getCurrentSourcePreviewNodeOptions(),d=I.anchorX,u=I.anchorY,g=I.offsetX,f=I.offsetY,v=pa(O,y,a,{anchorX:d,anchorY:u},{offsetX:g,offsetY:f});l.setDragImage(y,v.x,v.y)}}try{l==null||l.setData("application/json",{})}catch{}i.setCurrentDragSourceNode(o.target),i.getCurrentSourcePreviewNodeOptions().captureDraggingState?i.actions.publishDragSource():setTimeout(function(){return i.actions.publishDragSource()},0)}else if(c)i.beginDragNativeItem(c);else{if(l&&!l.types&&(o.target&&!o.target.hasAttribute||!o.target.hasAttribute("draggable")))return;o.preventDefault()}}}),S(this,"handleTopDragEndCapture",function(){i.clearCurrentDragSourceNode()&&i.monitor.isDragging()&&i.actions.endDrag()}),S(this,"handleTopDragEnterCapture",function(o){if(i.dragEnterTargetIds=[],!(!i.enterLeaveCounter.enter(o.target)||i.monitor.isDragging())){var s=o.dataTransfer,a=qe(s);a&&i.beginDragNativeItem(a,s)}}),S(this,"handleTopDragEnter",function(o){var s=i.dragEnterTargetIds;i.dragEnterTargetIds=[],i.monitor.isDragging()&&(i.altKeyPressed=o.altKey,s.length>0&&i.actions.hover(s,{clientOffset:he(o)}),s.some(function(a){return i.monitor.canDropOnTarget(a)})&&(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect=i.getCurrentDropEffect())))}),S(this,"handleTopDragOverCapture",function(){i.dragOverTargetIds=[]}),S(this,"handleTopDragOver",function(o){var s=i.dragOverTargetIds;if(i.dragOverTargetIds=[],!i.monitor.isDragging()){o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect="none");return}i.altKeyPressed=o.altKey,i.lastClientOffset=he(o),i.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(i.hoverRafId=requestAnimationFrame(function(){i.monitor.isDragging()&&i.actions.hover(s||[],{clientOffset:i.lastClientOffset}),i.hoverRafId=null})),(s||[]).some(function(a){return i.monitor.canDropOnTarget(a)})?(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect=i.getCurrentDropEffect())):i.isDraggingNativeItem()?o.preventDefault():(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect="none"))}),S(this,"handleTopDragLeaveCapture",function(o){i.isDraggingNativeItem()&&o.preventDefault(),i.enterLeaveCounter.leave(o.target)&&i.isDraggingNativeItem()&&setTimeout(function(){return i.endDragNativeItem()},0)}),S(this,"handleTopDropCapture",function(o){if(i.dropTargetIds=[],i.isDraggingNativeItem()){var s;o.preventDefault(),(s=i.currentNativeSource)==null||s.loadDataTransfer(o.dataTransfer)}else qe(o.dataTransfer)&&o.preventDefault();i.enterLeaveCounter.reset()}),S(this,"handleTopDrop",function(o){var s=i.dropTargetIds;i.dropTargetIds=[],i.actions.hover(s,{clientOffset:he(o)}),i.actions.drop({dropEffect:i.getCurrentDropEffect()}),i.isDraggingNativeItem()?i.endDragNativeItem():i.monitor.isDragging()&&i.actions.endDrag()}),S(this,"handleSelectStart",function(o){var s=o.target;typeof s.dragDrop=="function"&&(s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.isContentEditable||(o.preventDefault(),s.dragDrop()))}),this.options=new Sa(r,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new ua(this.isNodeInDocument)}return wa(e,[{key:"profile",value:function(){var t,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)==null?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)==null?void 0:r.length)||0}}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}},{key:"rootElement",get:function(){return this.options.rootElement}},{key:"setup",value:function(){var t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw Error("Cannot have two HTML5 backends at the same time.");t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}},{key:"teardown",value:function(){var t=this.rootElement;if(t!==void 0&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)==null||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}},{key:"connectDragPreview",value:function(t,r,n){var i=this;return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,r),function(){i.sourcePreviewNodes.delete(t),i.sourcePreviewNodeOptions.delete(t)}}},{key:"connectDragSource",value:function(t,r,n){var i=this;this.sourceNodes.set(t,r),this.sourceNodeOptions.set(t,n);var o=function(a){return i.handleDragStart(a,t)},s=function(a){return i.handleSelectStart(a)};return r.setAttribute("draggable","true"),r.addEventListener("dragstart",o),r.addEventListener("selectstart",s),function(){i.sourceNodes.delete(t),i.sourceNodeOptions.delete(t),r.removeEventListener("dragstart",o),r.removeEventListener("selectstart",s),r.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(t,r){var n=this,i=function(a){return n.handleDragEnter(a,t)},o=function(a){return n.handleDragOver(a,t)},s=function(a){return n.handleDrop(a,t)};return r.addEventListener("dragenter",i),r.addEventListener("dragover",o),r.addEventListener("drop",s),function(){r.removeEventListener("dragenter",i),r.removeEventListener("dragover",o),r.removeEventListener("drop",s)}}},{key:"addEventListeners",value:function(t){t.addEventListener&&(t.addEventListener("dragstart",this.handleTopDragStart),t.addEventListener("dragstart",this.handleTopDragStartCapture,!0),t.addEventListener("dragend",this.handleTopDragEndCapture,!0),t.addEventListener("dragenter",this.handleTopDragEnter),t.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.addEventListener("dragover",this.handleTopDragOver),t.addEventListener("dragover",this.handleTopDragOverCapture,!0),t.addEventListener("drop",this.handleTopDrop),t.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(t){t.removeEventListener&&(t.removeEventListener("dragstart",this.handleTopDragStart),t.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),t.removeEventListener("dragend",this.handleTopDragEndCapture,!0),t.removeEventListener("dragenter",this.handleTopDragEnter),t.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.removeEventListener("dragover",this.handleTopDragOver),t.removeEventListener("dragover",this.handleTopDragOverCapture,!0),t.removeEventListener("drop",this.handleTopDrop),t.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var t=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(t);return Kr({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var t=this.monitor.getSourceId();return Kr({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(t)||{})}},{key:"isDraggingNativeItem",value:function(){var t=this.monitor.getItemType();return Object.keys(Lr).some(function(r){return Lr[r]===t})}},{key:"beginDragNativeItem",value:function(t,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=ba(t,r),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(t){var r=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t,this.mouseMoveTimeoutTimer=setTimeout(function(){var n;return(n=r.rootElement)==null?void 0:n.addEventListener("mousemove",r.endDragIfSourceWasRemovedFromDOM,!0)},1e3)}},{key:"clearCurrentDragSourceNode",value:function(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)==null||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}},{key:"handleDragStart",value:function(t,r){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}},{key:"handleDragEnter",value:function(t,r){this.dragEnterTargetIds.unshift(r)}},{key:"handleDragOver",value:function(t,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}},{key:"handleDrop",value:function(t,r){this.dropTargetIds.unshift(r)}}]),e})(),pe;function Ea(){return pe||(pe=new Image,pe.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),pe}var Ca=function(e,t,r){return new Ta(e,t,r)};function xa(e){let t=P(),r=t.selectedIds,[n,i,o]=Ls(()=>({canDrag:()=>e.isDraggable,type:"NODE",item:()=>{let s=t.isSelected(e.id)?Array.from(r):[e.id];return t.dispatch(V.dragStart(e.id,s)),{id:e.id,dragIds:s}},end:()=>{t.hideCursor(),t.dispatch(V.dragEnd())}}),[r,e]);return(0,h.useEffect)(()=>{o(Ea())},[o]),i}function Na(e,t){let r=e.getBoundingClientRect(),n=t.x-Math.round(r.x),i=t.y-Math.round(r.y),o=r.height,s=i<o/2,a=!s,l=o/4,c=i>l&&i<o-l;return{x:n,inTopHalf:s,inBottomHalf:a,inMiddle:c,atTop:!c&&s,atBottom:!c&&a}}function ja(e,t,r,n){return e?e.isInternal?n.atTop?[t,e]:n.inMiddle?[e,e]:[e,r]:n.inTopHalf?[t,e]:[e,r]:[t,null]}function ve(e,t){return{parentId:e||null,index:t}}function X(e,t){return{type:"line",index:e,level:t}}function Pa(e){return{type:"highlight",id:e}}function Je(e,t){var n;let r=e;for(;r.parent&&r.level>t;)r=r.parent;return{parentId:((n=r.parent)==null?void 0:n.id)||null,index:yt(r)+1}}function Yr(e){var c;let t=Na(e.element,e.offset),r=e.indent,n=Math.round(Math.max(0,t.x-r)/r),{node:i,nextNode:o,prevNode:s}=e,[a,l]=ja(i,s,o,t);if(i&&i.isInternal&&t.inMiddle)return{drop:ve(i.id,null),cursor:Pa(i.id)};if(!a)return{drop:ve((c=l==null?void 0:l.parent)==null?void 0:c.id,0),cursor:X(0,0)};if(ht(a)){let p=ie(n,(l==null?void 0:l.level)||0,a.level);return{drop:Je(a,p),cursor:X(a.rowIndex+1,p)}}if(gt(a)){let p=ie(n,(l==null?void 0:l.level)||0,a.level);return{drop:Je(a,p),cursor:X(a.rowIndex+1,p)}}if(pt(a)){let p=ie(n,0,a.level+1);return p>a.level?{drop:ve(a.id,0),cursor:X(a.rowIndex+1,p)}:{drop:Je(a,p),cursor:X(a.rowIndex+1,p)}}return{drop:ve(a==null?void 0:a.id,0),cursor:X(a.rowIndex+1,a.level+1)}}function ka(e,t){let r=P(),[n,i]=xr(()=>({accept:"NODE",canDrop:()=>r.canDrop(),hover:(o,s)=>{let a=s.getClientOffset();if(!e.current||!a)return;let{cursor:l,drop:c}=Yr({element:e.current,offset:a,indent:r.indent,node:t,prevNode:t.prev,nextNode:t.next});c&&r.dispatch(V.hovering(c.parentId,c.index)),s.canDrop()?l&&r.showCursor(l):r.hideCursor()},drop:(o,s)=>{if(!s.canDrop())return null;let{parentId:a,index:l,dragIds:c}=r.state.dnd;St(r.props.onMove,{dragIds:c,parentId:a==="__REACT_ARBORIST_INTERNAL_ROOT__"?null:a,index:l===null?0:l,dragNodes:r.dragNodes,parentNode:r.get(a)}),r.open(a)}}),[t,e.current,r.props]);return i}function Ra(e){let t=P(),r=t.at(e);if(!r)throw Error(`Could not find node for index: ${e}`);return(0,h.useMemo)(()=>{let n=r.clone();return t.visibleNodes[e]=n,n},[...Object.values(r.state),r])}const Aa=h.memo(function({index:e,style:t}){ft(),On();let r=P(),n=Ra(e),i=(0,h.useRef)(null),o=xa(n),s=ka(i,n),a=(0,h.useCallback)(d=>{i.current=d,s(d)},[s]),l=r.indent*n.level,c=(0,h.useMemo)(()=>({paddingLeft:l}),[l]),p=(0,h.useMemo)(()=>Object.assign(Object.assign({},t),{top:parseFloat(t.top)+(r.props.padding??r.props.paddingTop??0)}),[t,r.props.padding,r.props.paddingTop]),O={role:"treeitem","aria-level":n.level+1,"aria-selected":n.isSelected,"aria-expanded":n.isOpen,style:p,tabIndex:-1,className:r.props.rowClassName};(0,h.useEffect)(()=>{var d;!n.isEditing&&n.isFocused&&((d=i.current)==null||d.focus({preventScroll:!0}))},[n.isEditing,n.isFocused,i.current]);let y=r.renderNode,I=r.renderRow;return(0,m.jsx)(I,{node:n,innerRef:a,attrs:O,children:(0,m.jsx)(y,{node:n,tree:r,style:c,dragHandle:o})})});var Qe="",qr=null;function Xr(){ft();let e=P();return(0,m.jsx)("div",{role:"tree",style:{height:e.height,width:e.width,minHeight:0,minWidth:0},onContextMenu:e.props.onContextMenu,onClick:e.props.onClick,tabIndex:0,onFocus:t=>{t.currentTarget.contains(t.relatedTarget)||e.onFocus()},onBlur:t=>{t.currentTarget.contains(t.relatedTarget)||e.onBlur()},onKeyDown:t=>{var n;if(e.isEditing)return;if(t.key==="Backspace"){if(!e.props.onDelete)return;let i=Array.from(e.selectedIds);if(i.length>1){let o=e.mostRecentNode;for(;o&&o.isSelected;)o=o.nextSibling;o||(o=e.lastNode),e.focus(o,{scroll:!1}),e.delete(Array.from(i))}else{let o=e.focusedNode;if(o){let s=o.nextSibling,a=o.parent;e.focus(s||a,{scroll:!1}),e.delete(o)}}return}if(t.key==="Tab"&&!t.shiftKey){t.preventDefault(),mt(t.currentTarget);return}if(t.key==="Tab"&&t.shiftKey){t.preventDefault(),bt(t.currentTarget);return}if(t.key==="ArrowDown"){t.preventDefault();let i=e.nextNode;if(t.metaKey){e.select(e.focusedNode),e.activate(e.focusedNode);return}else if(!t.shiftKey||e.props.disableMultiSelection){e.focus(i);return}else{if(!i)return;let o=e.focusedNode;o?o.isSelected?e.selectContiguous(i):e.selectMulti(i):e.focus(e.firstNode);return}}if(t.key==="ArrowUp"){t.preventDefault();let i=e.prevNode;if(!t.shiftKey||e.props.disableMultiSelection){e.focus(i);return}else{if(!i)return;let o=e.focusedNode;o?o.isSelected?e.selectContiguous(i):e.selectMulti(i):e.focus(e.lastNode);return}}if(t.key==="ArrowRight"){let i=e.focusedNode;if(!i)return;i.isInternal&&i.isOpen?e.focus(e.nextNode):i.isInternal&&e.open(i.id);return}if(t.key==="ArrowLeft"){let i=e.focusedNode;if(!i||i.isRoot)return;i.isInternal&&i.isOpen?e.close(i.id):(n=i.parent)!=null&&n.isRoot||e.focus(i.parent);return}if(t.key==="a"&&t.metaKey&&!e.props.disableMultiSelection){t.preventDefault(),e.selectAll();return}if(t.key==="a"&&!t.metaKey&&e.props.onCreate){e.createLeaf();return}if(t.key==="A"&&!t.metaKey){if(!e.props.onCreate)return;e.createInternal();return}if(t.key==="Home"){t.preventDefault(),e.focus(e.firstNode);return}if(t.key==="End"){t.preventDefault(),e.focus(e.lastNode);return}if(t.key==="Enter"){let i=e.focusedNode;if(!i||!i.isEditable||!e.props.onRename)return;setTimeout(()=>{i&&e.edit(i)});return}if(t.key===" "){t.preventDefault();let i=e.focusedNode;if(!i)return;i.isLeaf?(i.select(),i.activate()):i.toggle();return}if(t.key==="*"){let i=e.focusedNode;if(!i)return;e.openSiblings(i);return}if(t.key==="PageUp"){t.preventDefault(),e.pageUp();return}t.key==="PageDown"&&(t.preventDefault(),e.pageDown()),clearTimeout(qr),Qe+=t.key,qr=setTimeout(()=>{Qe=""},600);let r=e.visibleNodes.find(i=>{let o=i.data.name;return typeof o=="string"?o.toLowerCase().startsWith(Qe):!1});r&&e.focus(r.id)},children:(0,m.jsx)(ri,{className:e.props.className,outerRef:e.listEl,itemCount:e.visibleNodes.length,height:e.height,width:e.width,itemSize:e.rowHeight,overscanCount:e.overscanCount,itemKey:t=>{var r;return((r=e.visibleNodes[t])==null?void 0:r.id)||t},outerElementType:oi,innerElementType:ui,onScroll:e.props.onScroll,onItemsRendered:e.onItemsRendered.bind(e),ref:e.list,children:Aa})})}function Jr(e){return e.isFiltered?Ma(e.root,e.isMatch.bind(e)):_a(e.root)}function _a(e){let t=[];function r(n){var i;n.level>=0&&t.push(n),n.isOpen&&((i=n.children)==null||i.forEach(r))}return r(e),t.forEach(Qr),t}function Ma(e,t){let r={},n=[];function i(s){if(!s.isRoot&&t(s)){r[s.id]=!0;let a=s.parent;for(;a;)r[a.id]=!0,a=a.parent}if(s.children)for(let a of s.children)i(a)}function o(s){var a;s.level>=0&&r[s.id]&&n.push(s),s.isOpen&&((a=s.children)==null||a.forEach(o))}return i(e),o(e),n.forEach(Qr),n}function Qr(e,t){e.rowIndex=t}const Zr=e=>e.reduce((t,r,n)=>(t[r.id]=n,t),{});var Ze=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{c(n.next(p))}catch(O){s(O)}}function l(p){try{c(n.throw(p))}catch(O){s(O)}}function c(p){p.done?o(p.value):i(p.value).then(a,l)}c((n=n.apply(e,t||[])).next())})},{safeRun:x,identify:F,identifyNull:M}=Sn,La=class me{constructor(t,r,n,i){this.store=t,this.props=r,this.list=n,this.listEl=i,this.visibleStartIndex=0,this.visibleStopIndex=0,this.root=Ct(this),this.visibleNodes=Jr(this),this.idToIndex=Zr(this.visibleNodes)}update(t){this.props=t,this.root=Ct(this),this.visibleNodes=Jr(this),this.idToIndex=Zr(this.visibleNodes)}dispatch(t){return this.store.dispatch(t)}get state(){return this.store.getState()}get openState(){return this.state.nodes.open.unfiltered}get width(){return this.props.width??300}get height(){return this.props.height??500}get indent(){return this.props.indent??24}get rowHeight(){return this.props.rowHeight??24}get overscanCount(){return this.props.overscanCount??1}get searchTerm(){return(this.props.searchTerm||"").trim()}get matchFn(){let t=this.props.searchMatch??((r,n)=>JSON.stringify(Object.values(r.data)).toLocaleLowerCase().includes(n.toLocaleLowerCase()));return r=>t(r,this.searchTerm)}accessChildren(t){return Q(t,this.props.childrenAccessor||"children")??null}accessId(t){let r=Q(t,this.props.idAccessor||"id");if(!r)throw Error("Data must contain an 'id' property or props.idAccessor must return a string");return r}get firstNode(){return this.visibleNodes[0]??null}get lastNode(){return this.visibleNodes[this.visibleNodes.length-1]??null}get focusedNode(){return this.get(this.state.nodes.focus.id)??null}get mostRecentNode(){return this.get(this.state.nodes.selection.mostRecent)??null}get nextNode(){let t=this.indexOf(this.focusedNode);return t===null?null:this.at(t+1)}get prevNode(){let t=this.indexOf(this.focusedNode);return t===null?null:this.at(t-1)}get(t){return t&&t in this.idToIndex&&this.visibleNodes[this.idToIndex[t]]||null}at(t){return this.visibleNodes[t]||null}nodesBetween(t,r){if(t===null||r===null)return[];let n=this.indexOf(t)??0,i=this.indexOf(r);if(i===null)return[];let o=Math.min(n,i),s=Math.max(n,i);return this.visibleNodes.slice(o,s+1)}indexOf(t){let r=It(t);return r?this.idToIndex[r]:null}get editingId(){return this.state.nodes.edit.id}createInternal(){return this.create({type:"internal"})}createLeaf(){return this.create({type:"leaf"})}create(){return Ze(this,arguments,void 0,function*(t={}){let r=t.parentId===void 0?Tt(this):t.parentId,n=t.index??wt(this),i=t.type??"leaf",o=yield x(this.props.onCreate,{type:i,parentId:r,index:n,parentNode:this.get(r)});o&&(this.focus(o),setTimeout(()=>{this.edit(o).then(()=>{this.select(o),this.activate(o)})}))})}delete(t){return Ze(this,void 0,void 0,function*(){if(!t)return;let r=(Array.isArray(t)?t:[t]).map(F),n=r.map(i=>this.get(i)).filter(i=>!!i);yield x(this.props.onDelete,{nodes:n,ids:r})})}edit(t){let r=F(t);return this.resolveEdit({cancelled:!0}),this.scrollTo(r),this.dispatch(Se(r)),new Promise(n=>{me.editPromise=n})}submit(t,r){return Ze(this,void 0,void 0,function*(){if(!t)return;let n=F(t);yield x(this.props.onRename,{id:n,name:r,node:this.get(n)}),this.dispatch(Se(null)),this.resolveEdit({cancelled:!1,value:r}),setTimeout(()=>this.onFocus())})}reset(){this.dispatch(Se(null)),this.resolveEdit({cancelled:!0}),setTimeout(()=>this.onFocus())}activate(t){let r=this.get(M(t));r&&x(this.props.onActivate,r)}resolveEdit(t){let r=me.editPromise;r&&r(t),me.editPromise=null}get selectedIds(){return this.state.nodes.selection.ids}get selectedNodes(){let t=[];for(let r of Array.from(this.selectedIds)){let n=this.get(r);n&&t.push(n)}return t}focus(t,r={}){t&&(this.props.selectionFollowsFocus?this.select(t):(this.dispatch(G(F(t))),r.scroll!==!1&&this.scrollTo(t),this.focusedNode&&x(this.props.onFocus,this.focusedNode)))}pageUp(){var i;let t=this.visibleStartIndex,r=this.visibleStopIndex-t,n=((i=this.focusedNode)==null?void 0:i.rowIndex)??0;n=n>t?t:Math.max(t-r,0),this.focus(this.at(n))}pageDown(){var o;let t=this.visibleStartIndex,r=this.visibleStopIndex,n=r-t,i=((o=this.focusedNode)==null?void 0:o.rowIndex)??0;i=i<r?r:Math.min(i+n,this.visibleNodes.length-1),this.focus(this.at(i))}select(t,r={}){if(!t)return;let n=r.focus!==!1,i=F(t);n&&this.dispatch(G(i)),this.dispatch(A.only(i)),this.dispatch(A.anchor(i)),this.dispatch(A.mostRecent(i)),this.scrollTo(i,r.align),this.focusedNode&&n&&x(this.props.onFocus,this.focusedNode),x(this.props.onSelect,this.selectedNodes)}deselect(t){if(!t)return;let r=F(t);this.dispatch(A.remove(r)),x(this.props.onSelect,this.selectedNodes)}selectMulti(t){let r=this.get(M(t));r&&(this.dispatch(G(r.id)),this.dispatch(A.add(r.id)),this.dispatch(A.anchor(r.id)),this.dispatch(A.mostRecent(r.id)),this.scrollTo(r),this.focusedNode&&x(this.props.onFocus,this.focusedNode),x(this.props.onSelect,this.selectedNodes))}selectContiguous(t){if(!t)return;let r=F(t),{anchor:n,mostRecent:i}=this.state.nodes.selection;this.dispatch(G(r)),this.dispatch(A.remove(this.nodesBetween(n,i))),this.dispatch(A.add(this.nodesBetween(n,M(r)))),this.dispatch(A.mostRecent(r)),this.scrollTo(r),this.focusedNode&&x(this.props.onFocus,this.focusedNode),x(this.props.onSelect,this.selectedNodes)}deselectAll(){this.setSelection({ids:[],anchor:null,mostRecent:null}),x(this.props.onSelect,this.selectedNodes)}selectAll(){var t;this.setSelection({ids:Object.keys(this.idToIndex),anchor:this.firstNode,mostRecent:this.lastNode}),this.dispatch(G((t=this.lastNode)==null?void 0:t.id)),this.focusedNode&&x(this.props.onFocus,this.focusedNode),x(this.props.onSelect,this.selectedNodes)}setSelection(t){var o;let r=new Set((o=t.ids)==null?void 0:o.map(F)),n=M(t.anchor),i=M(t.mostRecent);this.dispatch(A.set({ids:r,anchor:n,mostRecent:i})),x(this.props.onSelect,this.selectedNodes)}get cursorParentId(){let{cursor:t}=this.state.dnd;switch(t.type){case"highlight":return t.id;default:return null}}get cursorOverFolder(){return this.state.dnd.cursor.type==="highlight"}get dragNodes(){return this.state.dnd.dragIds.map(t=>this.get(t)).filter(t=>!!t)}get dragNode(){return this.get(this.state.nodes.drag.id)}get dragDestinationParent(){return this.get(this.state.nodes.drag.destinationParentId)}get dragDestinationIndex(){return this.state.nodes.drag.destinationIndex}canDrop(){if(this.isFiltered)return!1;let t=this.get(this.state.dnd.parentId)??this.root,r=this.dragNodes,n=this.props.disableDrop;for(let i of r)if(!i||!t||i.isInternal&&vt(t,i))return!1;return typeof n=="function"?!n({parentNode:t,dragNodes:this.dragNodes,index:this.state.dnd.index||0}):typeof n=="string"?!t.data[n]:typeof n=="boolean"?!n:!0}hideCursor(){this.dispatch(V.cursor({type:"none"}))}showCursor(t){this.dispatch(V.cursor(t))}open(t){let r=M(t);r&&(this.isOpen(r)||(this.dispatch(we.open(r,this.isFiltered)),x(this.props.onToggle,r)))}close(t){let r=M(t);r&&this.isOpen(r)&&(this.dispatch(we.close(r,this.isFiltered)),x(this.props.onToggle,r))}toggle(t){let r=M(t);if(r)return this.isOpen(r)?this.close(r):this.open(r)}openParents(t){var i;let r=M(t);if(!r)return;let n=(i=Ie(this.root,r))==null?void 0:i.parent;for(;n;)this.open(n.id),n=n.parent}openSiblings(t){let r=t.parent;if(!r)this.toggle(t.id);else if(r.children){let n=t.isOpen;for(let i of r.children)i.isInternal&&(n?this.close(i.id):this.open(i.id));this.scrollTo(this.focusedNode)}}openAll(){oe(this.root,t=>{t.isInternal&&t.open()})}closeAll(){oe(this.root,t=>{t.isInternal&&t.close()})}scrollTo(t,r="smart"){if(!t)return;let n=F(t);return this.openParents(n),Dt(()=>n in this.idToIndex).then(()=>{var i;let o=this.idToIndex[n];o!==void 0&&((i=this.list.current)==null||i.scrollToItem(o,r))}).catch(()=>{})}get isEditing(){return this.state.nodes.edit.id!==null}get isFiltered(){var t;return!!((t=this.props.searchTerm)!=null&&t.trim())}get hasFocus(){return this.state.nodes.focus.treeFocused}get hasNoSelection(){return this.state.nodes.selection.ids.size===0}get hasOneSelection(){return this.state.nodes.selection.ids.size===1}get hasMultipleSelections(){return this.state.nodes.selection.ids.size>1}isSelected(t){return t?this.state.nodes.selection.ids.has(t):!1}isOpen(t){if(!t)return!1;if(t==="__REACT_ARBORIST_INTERNAL_ROOT__")return!0;let r=this.props.openByDefault??!0;return this.isFiltered?this.state.nodes.open.filtered[t]??!0:this.state.nodes.open.unfiltered[t]??r}isEditable(t){return!Q(t,this.props.disableEdit||(()=>!1))}isDraggable(t){return!Q(t,this.props.disableDrag||(()=>!1))}isDragging(t){let r=M(t);return r?this.state.nodes.drag.id===r:!1}isFocused(t){return this.hasFocus&&this.state.nodes.focus.id===t}isMatch(t){return this.matchFn(t)}willReceiveDrop(t){let r=M(t);if(!r)return!1;let{destinationParentId:n,destinationIndex:i}=this.state.nodes.drag;return r===n&&i===null}onFocus(){let t=this.focusedNode||this.firstNode;t&&this.dispatch(G(t.id))}onBlur(){this.dispatch(Mn())}onItemsRendered(t){this.visibleStartIndex=t.visibleStartIndex,this.visibleStopIndex=t.visibleStopIndex}get renderContainer(){return this.props.renderContainer||Xr}get renderRow(){return this.props.renderRow||Pn}get renderNode(){return this.props.children||kn}get renderDragPreview(){return this.props.renderDragPreview||Nt}get renderCursor(){return this.props.renderCursor||jn}};function j(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var en=typeof Symbol=="function"&&Symbol.observable||"@@observable",et=()=>Math.random().toString(36).substring(7).split("").join("."),ye={INIT:`@@redux/INIT${et()}`,REPLACE:`@@redux/REPLACE${et()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${et()}`};function Ha(e){if(typeof e!="object"||!e)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function tn(e,t,r){if(typeof e!="function")throw Error(j(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw Error(j(0));if(typeof t=="function"&&r===void 0&&(r=t,t=void 0),r!==void 0){if(typeof r!="function")throw Error(j(1));return r(tn)(e,t)}let n=e,i=t,o=new Map,s=o,a=0,l=!1;function c(){s===o&&(s=new Map,o.forEach((u,g)=>{s.set(g,u)}))}function p(){if(l)throw Error(j(3));return i}function O(u){if(typeof u!="function")throw Error(j(4));if(l)throw Error(j(5));let g=!0;c();let f=a++;return s.set(f,u),function(){if(g){if(l)throw Error(j(6));g=!1,c(),s.delete(f),o=null}}}function y(u){if(!Ha(u))throw Error(j(7));if(u.type===void 0)throw Error(j(8));if(typeof u.type!="string")throw Error(j(17));if(l)throw Error(j(9));try{l=!0,i=n(i,u)}finally{l=!1}return(o=s).forEach(g=>{g()}),u}function I(u){if(typeof u!="function")throw Error(j(10));n=u,y({type:ye.REPLACE})}function d(){let u=O;return{subscribe(g){if(typeof g!="object"||!g)throw Error(j(11));function f(){let v=g;v.next&&v.next(p())}return f(),{unsubscribe:u(f)}},[en](){return this}}}return y({type:ye.INIT}),{dispatch:y,subscribe:O,getState:p,replaceReducer:I,[en]:d}}function Fa(e){Object.keys(e).forEach(t=>{let r=e[t];if(r(void 0,{type:ye.INIT})===void 0)throw Error(j(12));if(r(void 0,{type:ye.PROBE_UNKNOWN_ACTION()})===void 0)throw Error(j(13))})}function rn(e){let t=Object.keys(e),r={};for(let o=0;o<t.length;o++){let s=t[o];typeof e[s]=="function"&&(r[s]=e[s])}let n=Object.keys(r),i;try{Fa(r)}catch(o){i=o}return function(o={},s){if(i)throw i;let a=!1,l={};for(let c=0;c<n.length;c++){let p=n[c],O=r[p],y=o[p],I=O(y,s);if(I===void 0)throw s&&s.type,Error(j(14));l[p]=I,a||(a=I!==y)}return a||(a=n.length!==Object.keys(o).length),a?l:o}}function Ua(e=K().nodes.drag,t){switch(t.type){case"DND_DRAG_START":return Object.assign(Object.assign({},e),{id:t.id,selectedIds:t.dragIds});case"DND_DRAG_END":return Object.assign(Object.assign({},e),{id:null,destinationParentId:null,destinationIndex:null,selectedIds:[]});case"DND_HOVERING":return t.parentId!==e.destinationParentId||t.index!=e.destinationIndex?Object.assign(Object.assign({},e),{destinationParentId:t.parentId,destinationIndex:t.index}):e;default:return e}}const Ba=rn({nodes:rn({focus:Ln,edit:_n,open:Hn,selection:Fn,drag:Ua}),dnd:Un});var za=ne(vn()),Wa=K();function $a({treeProps:e,imperativeHandle:t,children:r}){let n=(0,h.useRef)(null),i=(0,h.useRef)(null),o=(0,h.useRef)(tn(Ba,K(e))),s=(0,za.useSyncExternalStore)(o.current.subscribe,o.current.getState,()=>Wa),a=(0,h.useMemo)(()=>new La(o.current,e,n,i),[]),l=(0,h.useRef)(0);return(0,h.useMemo)(()=>{l.current+=1,a.update(e)},[...Object.values(e),s.nodes.open]),(0,h.useImperativeHandle)(t,()=>a),(0,h.useEffect)(()=>{a.props.selection?a.select(a.props.selection,{focus:!1}):a.deselectAll()},[a.props.selection]),(0,h.useEffect)(()=>{a.props.searchTerm||o.current.dispatch(we.clear(!0))},[a.props.searchTerm]),(0,m.jsx)(ut.Provider,{value:a,children:(0,m.jsx)(dt.Provider,{value:l.current,children:(0,m.jsx)(lt.Provider,{value:s.nodes,children:(0,m.jsx)(ct.Provider,{value:s.dnd,children:(0,m.jsx)(Fo,Object.assign({backend:Ca,options:{rootElement:a.props.dndRootElement||void 0}},e.dndManager&&{manager:e.dndManager},{children:r}))})})})})}function Ga(){let e=P(),[,t]=xr(()=>({accept:"NODE",canDrop:(r,n)=>n.isOver({shallow:!0})?e.canDrop():!1,hover:(r,n)=>{if(!n.isOver({shallow:!0}))return;let i=n.getClientOffset();if(!e.listEl.current||!i)return;let{cursor:o,drop:s}=Yr({element:e.listEl.current,offset:i,indent:e.indent,node:null,prevNode:e.visibleNodes[e.visibleNodes.length-1],nextNode:null});s&&e.dispatch(V.hovering(s.parentId,s.index)),n.canDrop()?o&&e.showCursor(o):e.hideCursor()}}),[e]);t(e.listEl)}function Ka(e){return Ga(),e.children}function Va(){return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(P().props.renderContainer||Xr,{})})}function Ya(){let e=P(),{offset:t,mouse:r,item:n,isDragging:i}=na(o=>({offset:o.getSourceClientOffset(),mouse:o.getClientOffset(),item:o.getItem(),isDragging:o.isDragging()}));return(0,m.jsx)(e.props.renderDragPreview||Nt,{offset:t,mouse:r,id:(n==null?void 0:n.id)||null,dragIds:(n==null?void 0:n.dragIds)||[],isDragging:i})}var nn=class{constructor(e){this.root=qa(e)}get data(){var e;return((e=this.root.children)==null?void 0:e.map(t=>t.data))??[]}create(e){let t=e.parentId?this.find(e.parentId):this.root;if(!t)return null;t.addChild(e.data,e.index)}move(e){let t=this.find(e.id),r=e.parentId?this.find(e.parentId):this.root;!t||!r||(r.addChild(t.data,e.index),t.drop())}update(e){let t=this.find(e.id);t&&t.update(e.changes)}drop(e){let t=this.find(e.id);t&&t.drop()}find(e,t=this.root){if(!t)return null;if(t.id===e)return t;if(t.children){for(let r of t.children){let n=this.find(e,r);if(n)return n}return null}return null}};function qa(e){let t=new on({id:"ROOT"},null);return t.children=e.map(r=>tt(r,t)),t}function tt(e,t){let r=new on(e,t);return e.children&&(r.children=e.children.map(n=>tt(n,r))),r}var on=class{constructor(e,t){this.data=e,this.parent=t,this.id=e.id}hasParent(){return!!this.parent}get childIndex(){return this.hasParent()?this.parent.children.indexOf(this):-1}addChild(e,t){let r=tt(e,this);this.children=this.children??[],this.children.splice(t,0,r),this.data.children=this.data.children??[],this.data.children.splice(t,0,e)}removeChild(e){var t,r;(t=this.children)==null||t.splice(e,1),(r=this.data.children)==null||r.splice(e,1)}update(e){if(this.hasParent()){let t=this.childIndex;this.parent.addChild(Object.assign(Object.assign({},this.data),e),t),this.drop()}}drop(){this.hasParent()&&this.parent.removeChild(this.childIndex)}},Xa=0;function Ja(e){let[t,r]=(0,h.useState)(e),n=(0,h.useMemo)(()=>new nn(t),[t]);return[t,{onMove:i=>{for(let o of i.dragIds)n.move({id:o,parentId:i.parentId,index:i.index});r(n.data)},onRename:({name:i,id:o})=>{n.update({id:o,changes:{name:i}}),r(n.data)},onCreate:({parentId:i,index:o,type:s})=>{let a={id:`simple-tree-id-${Xa++}`,name:""};return s==="internal"&&(a.children=[]),n.create({parentId:i,index:o,data:a}),r(n.data),a},onDelete:i=>{i.ids.forEach(o=>n.drop({id:o})),r(n.data)}}]}function Qa(e){if(e.initialData&&e.data)throw Error("React Arborist Tree => Provide either a data or initialData prop, but not both.");if(e.initialData&&(e.onCreate||e.onDelete||e.onMove||e.onRename))throw Error(`React Arborist Tree => You passed the initialData prop along with a data handler.
Use the data prop if you want to provide your own handlers.`);if(e.initialData){let[t,r]=Ja(e.initialData);return Object.assign(Object.assign(Object.assign({},e),r),{data:t})}else return e}function Za(e,t){return(0,m.jsxs)($a,{treeProps:Qa(e),imperativeHandle:t,children:[(0,m.jsx)(Ka,{children:(0,m.jsx)(Va,{})}),(0,m.jsx)(Ya,{})]})}const eu=(0,h.forwardRef)(Za);export{nn as n,eu as t};
