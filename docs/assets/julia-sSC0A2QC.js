function a(n,e,t){return t===void 0&&(t=""),e===void 0&&(e="\\b"),RegExp("^"+t+"(("+n.join(")|(")+"))"+e)}var d="\\\\[0-7]{1,3}",F="\\\\x[A-Fa-f0-9]{1,2}",k=`\\\\[abefnrtv0%?'"\\\\]`,b="([^\\u0027\\u005C\\uD800-\\uDFFF]|[\\uD800-\\uDFFF][\\uDC00-\\uDFFF])",o=["[<>]:","[<>=]=","<<=?",">>>?=?","=>","--?>","<--[->]?","\\/\\/","\\.{2,3}","[\\.\\\\%*+\\-<>!\\/^|&]=?","\\?","\\$","~",":"],v=a("[<>]:,[<>=]=,[!=]==,<<=?,>>>?=?,=>?,--?>,<--[->]?,\\/\\/,[\\\\%*+\\-<>!\\/^|&\\u00F7\\u22BB]=?,\\?,\\$,~,:,\\u00D7,\\u2208,\\u2209,\\u220B,\\u220C,\\u2218,\\u221A,\\u221B,\\u2229,\\u222A,\\u2260,\\u2264,\\u2265,\\u2286,\\u2288,\\u228A,\\u22C5,\\b(in|isa)\\b(?!.?\\()".split(","),""),g=/^[;,()[\]{}]/,x=/^[_A-Za-z\u00A1-\u2217\u2219-\uFFFF][\w\u00A1-\u2217\u2219-\uFFFF]*!*/,A=a([d,F,k,b],"'"),z=["begin","function","type","struct","immutable","let","macro","for","while","quote","if","else","elseif","try","finally","catch","do"],y=["end","else","elseif","catch","finally"],c="if.else.elseif.while.for.begin.let.end.do.try.catch.finally.return.break.continue.global.local.const.export.import.importall.using.function.where.macro.module.baremodule.struct.type.mutable.immutable.quote.typealias.abstract.primitive.bitstype".split("."),m=["true","false","nothing","NaN","Inf"],E=a(z),_=a(y),D=a(c),T=a(m),C=/^@[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/,w=/^:[_A-Za-z\u00A1-\uFFFF][\w\u00A1-\uFFFF]*!*/,P=/^(`|([_A-Za-z\u00A1-\uFFFF]*"("")?))/,B=a(o,"","@"),$=a(o,"",":");function l(n){return n.nestedArrays>0}function G(n){return n.nestedGenerators>0}function f(n,e){return e===void 0&&(e=0),n.scopes.length<=e?null:n.scopes[n.scopes.length-(e+1)]}function u(n,e){if(n.match("#=",!1))return e.tokenize=Z,e.tokenize(n,e);var t=e.leavingExpr;if(n.sol()&&(t=!1),e.leavingExpr=!1,t&&n.match(/^'+/))return"operator";if(n.match(/\.{4,}/))return"error";if(n.match(/\.{1,3}/))return"operator";if(n.eatSpace())return null;var r=n.peek();if(r==="#")return n.skipToEnd(),"comment";if(r==="["&&(e.scopes.push("["),e.nestedArrays++),r==="("&&(e.scopes.push("("),e.nestedGenerators++),l(e)&&r==="]"){for(;e.scopes.length&&f(e)!=="[";)e.scopes.pop();e.scopes.pop(),e.nestedArrays--,e.leavingExpr=!0}if(G(e)&&r===")"){for(;e.scopes.length&&f(e)!=="(";)e.scopes.pop();e.scopes.pop(),e.nestedGenerators--,e.leavingExpr=!0}if(l(e)){if(e.lastToken=="end"&&n.match(":"))return"operator";if(n.match("end"))return"number"}var i;if((i=n.match(E,!1))&&e.scopes.push(i[0]),n.match(_,!1)&&e.scopes.pop(),n.match(/^::(?![:\$])/))return e.tokenize=I,e.tokenize(n,e);if(!t&&(n.match(w)||n.match($)))return"builtin";if(n.match(v))return"operator";if(n.match(/^\.?\d/,!1)){var p=RegExp(/^im\b/),s=!1;if(n.match(/^0x\.[0-9a-f_]+p[\+\-]?[_\d]+/i)&&(s=!0),n.match(/^0x[0-9a-f_]+/i)&&(s=!0),n.match(/^0b[01_]+/i)&&(s=!0),n.match(/^0o[0-7_]+/i)&&(s=!0),n.match(/^(?:(?:\d[_\d]*)?\.(?!\.)(?:\d[_\d]*)?|\d[_\d]*\.(?!\.)(?:\d[_\d]*))?([Eef][\+\-]?[_\d]+)?/i)&&(s=!0),n.match(/^\d[_\d]*(e[\+\-]?\d+)?/i)&&(s=!0),s)return n.match(p),e.leavingExpr=!0,"number"}if(n.match("'"))return e.tokenize=j,e.tokenize(n,e);if(n.match(P))return e.tokenize=S(n.current()),e.tokenize(n,e);if(n.match(C)||n.match(B))return"meta";if(n.match(g))return null;if(n.match(D))return"keyword";if(n.match(T))return"builtin";var h=e.isDefinition||e.lastToken=="function"||e.lastToken=="macro"||e.lastToken=="type"||e.lastToken=="struct"||e.lastToken=="immutable";return n.match(x)?h?n.peek()==="."?(e.isDefinition=!0,"variable"):(e.isDefinition=!1,"def"):(e.leavingExpr=!0,"variable"):(n.next(),"error")}function I(n,e){return n.match(/.*?(?=[,;{}()=\s]|$)/),n.match("{")?e.nestedParameters++:n.match("}")&&e.nestedParameters>0&&e.nestedParameters--,e.nestedParameters>0?n.match(/.*?(?={|})/)||n.next():e.nestedParameters==0&&(e.tokenize=u),"builtin"}function Z(n,e){return n.match("#=")&&e.nestedComments++,n.match(/.*?(?=(#=|=#))/)||n.skipToEnd(),n.match("=#")&&(e.nestedComments--,e.nestedComments==0&&(e.tokenize=u)),"comment"}function j(n,e){var t=!1,r;if(n.match(A))t=!0;else if(r=n.match(/\\u([a-f0-9]{1,4})(?=')/i)){var i=parseInt(r[1],16);(i<=55295||i>=57344)&&(t=!0,n.next())}else if(r=n.match(/\\U([A-Fa-f0-9]{5,8})(?=')/)){var i=parseInt(r[1],16);i<=1114111&&(t=!0,n.next())}return t?(e.leavingExpr=!0,e.tokenize=u,"string"):(n.match(/^[^']+(?=')/)||n.skipToEnd(),n.match("'")&&(e.tokenize=u),"error")}function S(n){n.substr(-3)==='"""'?n='"""':n.substr(-1)==='"'&&(n='"');function e(t,r){if(t.eat("\\"))t.next();else{if(t.match(n))return r.tokenize=u,r.leavingExpr=!0,"string";t.eat(/[`"]/)}return t.eatWhile(/[^\\`"]/),"string"}return e}const q={name:"julia",startState:function(){return{tokenize:u,scopes:[],lastToken:null,leavingExpr:!1,isDefinition:!1,nestedArrays:0,nestedComments:0,nestedGenerators:0,nestedParameters:0,firstParenPos:-1}},token:function(n,e){var t=e.tokenize(n,e),r=n.current();return r&&t&&(e.lastToken=r),t},indent:function(n,e,t){var r=0;return(e==="]"||e===")"||/^end\b/.test(e)||/^else/.test(e)||/^catch\b/.test(e)||/^elseif\b/.test(e)||/^finally/.test(e))&&(r=-1),(n.scopes.length+r)*t.unit},languageData:{indentOnInput:/^\s*(end|else|catch|finally)\b$/,commentTokens:{line:"#",block:{open:"#=",close:"=#"}},closeBrackets:{brackets:["(","[","{",'"']},autocomplete:c.concat(m)}};export{q as t};
