import{s as nt,t as V}from"./chunk-DZLz74EQ.js";import"./timer-9ePNNBwU.js";import{u as st}from"./src-D-O4qgKm.js";import{n as k,r as j}from"./src-Ci62OB0C.js";import{t as z}from"./cytoscape.esm-DY8vXQWa.js";var Z=V(((C,P)=>{(function(m,L){typeof C=="object"&&typeof P=="object"?P.exports=L():typeof define=="function"&&define.amd?define([],L):typeof C=="object"?C.layoutBase=L():m.layoutBase=L()})(C,function(){return(function(m){var L={};function A(n){if(L[n])return L[n].exports;var i=L[n]={i:n,l:!1,exports:{}};return m[n].call(i.exports,i,i.exports,A),i.l=!0,i.exports}return A.m=m,A.c=L,A.i=function(n){return n},A.d=function(n,i,t){A.o(n,i)||Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:t})},A.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return A.d(i,"a",i),i},A.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},A.p="",A(A.s=26)})([(function(m,L,A){function n(){}n.QUALITY=1,n.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,n.DEFAULT_INCREMENTAL=!1,n.DEFAULT_ANIMATION_ON_LAYOUT=!0,n.DEFAULT_ANIMATION_DURING_LAYOUT=!1,n.DEFAULT_ANIMATION_PERIOD=50,n.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,n.DEFAULT_GRAPH_MARGIN=15,n.NODE_DIMENSIONS_INCLUDE_LABELS=!1,n.SIMPLE_NODE_SIZE=40,n.SIMPLE_NODE_HALF_SIZE=n.SIMPLE_NODE_SIZE/2,n.EMPTY_COMPOUND_NODE_SIZE=40,n.MIN_EDGE_LENGTH=1,n.WORLD_BOUNDARY=1e6,n.INITIAL_WORLD_BOUNDARY=n.WORLD_BOUNDARY/1e3,n.WORLD_CENTER_X=1200,n.WORLD_CENTER_Y=900,m.exports=n}),(function(m,L,A){var n=A(2),i=A(8),t=A(9);function e(h,o,N){n.call(this,N),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=N,this.bendpoints=[],this.source=h,this.target=o}for(var r in e.prototype=Object.create(n.prototype),n)e[r]=n[r];e.prototype.getSource=function(){return this.source},e.prototype.getTarget=function(){return this.target},e.prototype.isInterGraph=function(){return this.isInterGraph},e.prototype.getLength=function(){return this.length},e.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},e.prototype.getBendpoints=function(){return this.bendpoints},e.prototype.getLca=function(){return this.lca},e.prototype.getSourceInLca=function(){return this.sourceInLca},e.prototype.getTargetInLca=function(){return this.targetInLca},e.prototype.getOtherEnd=function(h){if(this.source===h)return this.target;if(this.target===h)return this.source;throw"Node is not incident with this edge"},e.prototype.getOtherEndInGraph=function(h,o){for(var N=this.getOtherEnd(h),s=o.getGraphManager().getRoot();;){if(N.getOwner()==o)return N;if(N.getOwner()==s)break;N=N.getOwner().getParent()}return null},e.prototype.updateLength=function(){var h=[,,,,];this.isOverlapingSourceAndTarget=i.getIntersection(this.target.getRect(),this.source.getRect(),h),this.isOverlapingSourceAndTarget||(this.lengthX=h[0]-h[2],this.lengthY=h[1]-h[3],Math.abs(this.lengthX)<1&&(this.lengthX=t.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=t.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},e.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=t.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=t.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},m.exports=e}),(function(m,L,A){function n(i){this.vGraphObject=i}m.exports=n}),(function(m,L,A){var n=A(2),i=A(10),t=A(13),e=A(0),r=A(16),h=A(4);function o(s,g,u,p){u==null&&p==null&&(p=g),n.call(this,p),s.graphManager!=null&&(s=s.graphManager),this.estimatedSize=i.MIN_VALUE,this.inclusionTreeDepth=i.MAX_VALUE,this.vGraphObject=p,this.edges=[],this.graphManager=s,u!=null&&g!=null?this.rect=new t(g.x,g.y,u.width,u.height):this.rect=new t}for(var N in o.prototype=Object.create(n.prototype),n)o[N]=n[N];o.prototype.getEdges=function(){return this.edges},o.prototype.getChild=function(){return this.child},o.prototype.getOwner=function(){return this.owner},o.prototype.getWidth=function(){return this.rect.width},o.prototype.setWidth=function(s){this.rect.width=s},o.prototype.getHeight=function(){return this.rect.height},o.prototype.setHeight=function(s){this.rect.height=s},o.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},o.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},o.prototype.getCenter=function(){return new h(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},o.prototype.getLocation=function(){return new h(this.rect.x,this.rect.y)},o.prototype.getRect=function(){return this.rect},o.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},o.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},o.prototype.setRect=function(s,g){this.rect.x=s.x,this.rect.y=s.y,this.rect.width=g.width,this.rect.height=g.height},o.prototype.setCenter=function(s,g){this.rect.x=s-this.rect.width/2,this.rect.y=g-this.rect.height/2},o.prototype.setLocation=function(s,g){this.rect.x=s,this.rect.y=g},o.prototype.moveBy=function(s,g){this.rect.x+=s,this.rect.y+=g},o.prototype.getEdgeListToNode=function(s){var g=[],u=this;return u.edges.forEach(function(p){if(p.target==s){if(p.source!=u)throw"Incorrect edge source!";g.push(p)}}),g},o.prototype.getEdgesBetween=function(s){var g=[],u=this;return u.edges.forEach(function(p){if(!(p.source==u||p.target==u))throw"Incorrect edge source and/or target";(p.target==s||p.source==s)&&g.push(p)}),g},o.prototype.getNeighborsList=function(){var s=new Set,g=this;return g.edges.forEach(function(u){if(u.source==g)s.add(u.target);else{if(u.target!=g)throw"Incorrect incidency!";s.add(u.source)}}),s},o.prototype.withChildren=function(){var s=new Set,g,u;if(s.add(this),this.child!=null)for(var p=this.child.getNodes(),y=0;y<p.length;y++)g=p[y],u=g.withChildren(),u.forEach(function(c){s.add(c)});return s},o.prototype.getNoOfChildren=function(){var s=0,g;if(this.child==null)s=1;else for(var u=this.child.getNodes(),p=0;p<u.length;p++)g=u[p],s+=g.getNoOfChildren();return s==0&&(s=1),s},o.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},o.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},o.prototype.scatter=function(){var s,g,u=-e.INITIAL_WORLD_BOUNDARY,p=e.INITIAL_WORLD_BOUNDARY;s=e.WORLD_CENTER_X+r.nextDouble()*(p-u)+u;var y=-e.INITIAL_WORLD_BOUNDARY,c=e.INITIAL_WORLD_BOUNDARY;g=e.WORLD_CENTER_Y+r.nextDouble()*(c-y)+y,this.rect.x=s,this.rect.y=g},o.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var s=this.getChild();if(s.updateBounds(!0),this.rect.x=s.getLeft(),this.rect.y=s.getTop(),this.setWidth(s.getRight()-s.getLeft()),this.setHeight(s.getBottom()-s.getTop()),e.NODE_DIMENSIONS_INCLUDE_LABELS){var g=s.getRight()-s.getLeft(),u=s.getBottom()-s.getTop();this.labelWidth>g&&(this.rect.x-=(this.labelWidth-g)/2,this.setWidth(this.labelWidth)),this.labelHeight>u&&(this.labelPos=="center"?this.rect.y-=(this.labelHeight-u)/2:this.labelPos=="top"&&(this.rect.y-=this.labelHeight-u),this.setHeight(this.labelHeight))}}},o.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==i.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},o.prototype.transform=function(s){var g=this.rect.x;g>e.WORLD_BOUNDARY?g=e.WORLD_BOUNDARY:g<-e.WORLD_BOUNDARY&&(g=-e.WORLD_BOUNDARY);var u=this.rect.y;u>e.WORLD_BOUNDARY?u=e.WORLD_BOUNDARY:u<-e.WORLD_BOUNDARY&&(u=-e.WORLD_BOUNDARY);var p=new h(g,u),y=s.inverseTransformPoint(p);this.setLocation(y.x,y.y)},o.prototype.getLeft=function(){return this.rect.x},o.prototype.getRight=function(){return this.rect.x+this.rect.width},o.prototype.getTop=function(){return this.rect.y},o.prototype.getBottom=function(){return this.rect.y+this.rect.height},o.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},m.exports=o}),(function(m,L,A){function n(i,t){i==null&&t==null?(this.x=0,this.y=0):(this.x=i,this.y=t)}n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.setX=function(i){this.x=i},n.prototype.setY=function(i){this.y=i},n.prototype.getDifference=function(i){return new DimensionD(this.x-i.x,this.y-i.y)},n.prototype.getCopy=function(){return new n(this.x,this.y)},n.prototype.translate=function(i){return this.x+=i.width,this.y+=i.height,this},m.exports=n}),(function(m,L,A){var n=A(2),i=A(10),t=A(0),e=A(6),r=A(3),h=A(1),o=A(13),N=A(12),s=A(11);function g(p,y,c){n.call(this,c),this.estimatedSize=i.MIN_VALUE,this.margin=t.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=p,y!=null&&y instanceof e?this.graphManager=y:y!=null&&y instanceof Layout&&(this.graphManager=y.graphManager)}for(var u in g.prototype=Object.create(n.prototype),n)g[u]=n[u];g.prototype.getNodes=function(){return this.nodes},g.prototype.getEdges=function(){return this.edges},g.prototype.getGraphManager=function(){return this.graphManager},g.prototype.getParent=function(){return this.parent},g.prototype.getLeft=function(){return this.left},g.prototype.getRight=function(){return this.right},g.prototype.getTop=function(){return this.top},g.prototype.getBottom=function(){return this.bottom},g.prototype.isConnected=function(){return this.isConnected},g.prototype.add=function(p,y,c){if(y==null&&c==null){var f=p;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(f)>-1)throw"Node already in graph!";return f.owner=this,this.getNodes().push(f),f}else{var T=p;if(!(this.getNodes().indexOf(y)>-1&&this.getNodes().indexOf(c)>-1))throw"Source or target not in graph!";if(!(y.owner==c.owner&&y.owner==this))throw"Both owners must be this graph!";return y.owner==c.owner?(T.source=y,T.target=c,T.isInterGraph=!1,this.getEdges().push(T),y.edges.push(T),c!=y&&c.edges.push(T),T):null}},g.prototype.remove=function(p){var y=p;if(p instanceof r){if(y==null)throw"Node is null!";if(!(y.owner!=null&&y.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var c=y.edges.slice(),f,T=c.length,E=0;E<T;E++)f=c[E],f.isInterGraph?this.graphManager.remove(f):f.source.owner.remove(f);var O=this.nodes.indexOf(y);if(O==-1)throw"Node not in owner node list!";this.nodes.splice(O,1)}else if(p instanceof h){var f=p;if(f==null)throw"Edge is null!";if(!(f.source!=null&&f.target!=null))throw"Source and/or target is null!";if(!(f.source.owner!=null&&f.target.owner!=null&&f.source.owner==this&&f.target.owner==this))throw"Source and/or target owner is invalid!";var a=f.source.edges.indexOf(f),d=f.target.edges.indexOf(f);if(!(a>-1&&d>-1))throw"Source and/or target doesn't know this edge!";f.source.edges.splice(a,1),f.target!=f.source&&f.target.edges.splice(d,1);var O=f.source.owner.getEdges().indexOf(f);if(O==-1)throw"Not in owner's edge list!";f.source.owner.getEdges().splice(O,1)}},g.prototype.updateLeftTop=function(){for(var p=i.MAX_VALUE,y=i.MAX_VALUE,c,f,T,E=this.getNodes(),O=E.length,a=0;a<O;a++){var d=E[a];c=d.getTop(),f=d.getLeft(),p>c&&(p=c),y>f&&(y=f)}return p==i.MAX_VALUE?null:(T=E[0].getParent().paddingLeft==null?this.margin:E[0].getParent().paddingLeft,this.left=y-T,this.top=p-T,new N(this.left,this.top))},g.prototype.updateBounds=function(p){for(var y=i.MAX_VALUE,c=-i.MAX_VALUE,f=i.MAX_VALUE,T=-i.MAX_VALUE,E,O,a,d,l,v=this.nodes,_=v.length,D=0;D<_;D++){var I=v[D];p&&I.child!=null&&I.updateBounds(),E=I.getLeft(),O=I.getRight(),a=I.getTop(),d=I.getBottom(),y>E&&(y=E),c<O&&(c=O),f>a&&(f=a),T<d&&(T=d)}var w=new o(y,f,c-y,T-f);y==i.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),l=v[0].getParent().paddingLeft==null?this.margin:v[0].getParent().paddingLeft,this.left=w.x-l,this.right=w.x+w.width+l,this.top=w.y-l,this.bottom=w.y+w.height+l},g.calculateBounds=function(p){for(var y=i.MAX_VALUE,c=-i.MAX_VALUE,f=i.MAX_VALUE,T=-i.MAX_VALUE,E,O,a,d,l=p.length,v=0;v<l;v++){var _=p[v];E=_.getLeft(),O=_.getRight(),a=_.getTop(),d=_.getBottom(),y>E&&(y=E),c<O&&(c=O),f>a&&(f=a),T<d&&(T=d)}return new o(y,f,c-y,T-f)},g.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},g.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},g.prototype.calcEstimatedSize=function(){for(var p=0,y=this.nodes,c=y.length,f=0;f<c;f++){var T=y[f];p+=T.calcEstimatedSize()}return p==0?this.estimatedSize=t.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=p/Math.sqrt(this.nodes.length),this.estimatedSize},g.prototype.updateConnected=function(){var p=this;if(this.nodes.length==0){this.isConnected=!0;return}var y=new s,c=new Set,f=this.nodes[0],T,E;for(f.withChildren().forEach(function(l){y.push(l),c.add(l)});y.length!==0;){f=y.shift(),T=f.getEdges();for(var O=T.length,a=0;a<O;a++)E=T[a].getOtherEndInGraph(f,this),E!=null&&!c.has(E)&&E.withChildren().forEach(function(l){y.push(l),c.add(l)})}if(this.isConnected=!1,c.size>=this.nodes.length){var d=0;c.forEach(function(l){l.owner==p&&d++}),d==this.nodes.length&&(this.isConnected=!0)}},m.exports=g}),(function(m,L,A){var n,i=A(1);function t(e){n=A(5),this.layout=e,this.graphs=[],this.edges=[]}t.prototype.addRoot=function(){var e=this.layout.newGraph(),r=this.layout.newNode(null),h=this.add(e,r);return this.setRootGraph(h),this.rootGraph},t.prototype.add=function(e,r,h,o,N){if(h==null&&o==null&&N==null){if(e==null)throw"Graph is null!";if(r==null)throw"Parent node is null!";if(this.graphs.indexOf(e)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(e),e.parent!=null)throw"Already has a parent!";if(r.child!=null)throw"Already has a child!";return e.parent=r,r.child=e,e}else{N=h,o=r,h=e;var s=o.getOwner(),g=N.getOwner();if(!(s!=null&&s.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(g!=null&&g.getGraphManager()==this))throw"Target not in this graph mgr!";if(s==g)return h.isInterGraph=!1,s.add(h,o,N);if(h.isInterGraph=!0,h.source=o,h.target=N,this.edges.indexOf(h)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(h),!(h.source!=null&&h.target!=null))throw"Edge source and/or target is null!";if(!(h.source.edges.indexOf(h)==-1&&h.target.edges.indexOf(h)==-1))throw"Edge already in source and/or target incidency list!";return h.source.edges.push(h),h.target.edges.push(h),h}},t.prototype.remove=function(e){if(e instanceof n){var r=e;if(r.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(r==this.rootGraph||r.parent!=null&&r.parent.graphManager==this))throw"Invalid parent node!";var h=[];h=h.concat(r.getEdges());for(var o,N=h.length,s=0;s<N;s++)o=h[s],r.remove(o);var g=[];g=g.concat(r.getNodes());var u;N=g.length;for(var s=0;s<N;s++)u=g[s],r.remove(u);r==this.rootGraph&&this.setRootGraph(null);var p=this.graphs.indexOf(r);this.graphs.splice(p,1),r.parent=null}else if(e instanceof i){if(o=e,o==null)throw"Edge is null!";if(!o.isInterGraph)throw"Not an inter-graph edge!";if(!(o.source!=null&&o.target!=null))throw"Source and/or target is null!";if(!(o.source.edges.indexOf(o)!=-1&&o.target.edges.indexOf(o)!=-1))throw"Source and/or target doesn't know this edge!";var p=o.source.edges.indexOf(o);if(o.source.edges.splice(p,1),p=o.target.edges.indexOf(o),o.target.edges.splice(p,1),!(o.source.owner!=null&&o.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(o.source.owner.getGraphManager().edges.indexOf(o)==-1)throw"Not in owner graph manager's edge list!";var p=o.source.owner.getGraphManager().edges.indexOf(o);o.source.owner.getGraphManager().edges.splice(p,1)}},t.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},t.prototype.getGraphs=function(){return this.graphs},t.prototype.getAllNodes=function(){if(this.allNodes==null){for(var e=[],r=this.getGraphs(),h=r.length,o=0;o<h;o++)e=e.concat(r[o].getNodes());this.allNodes=e}return this.allNodes},t.prototype.resetAllNodes=function(){this.allNodes=null},t.prototype.resetAllEdges=function(){this.allEdges=null},t.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},t.prototype.getAllEdges=function(){if(this.allEdges==null){var e=[],r=this.getGraphs();r.length;for(var h=0;h<r.length;h++)e=e.concat(r[h].getEdges());e=e.concat(this.edges),this.allEdges=e}return this.allEdges},t.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},t.prototype.setAllNodesToApplyGravitation=function(e){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=e},t.prototype.getRoot=function(){return this.rootGraph},t.prototype.setRootGraph=function(e){if(e.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=e,e.parent??(e.parent=this.layout.newNode("Root node"))},t.prototype.getLayout=function(){return this.layout},t.prototype.isOneAncestorOfOther=function(e,r){if(!(e!=null&&r!=null))throw"assert failed";if(e==r)return!0;var h=e.getOwner(),o;do{if(o=h.getParent(),o==null)break;if(o==r)return!0;if(h=o.getOwner(),h==null)break}while(!0);h=r.getOwner();do{if(o=h.getParent(),o==null)break;if(o==e)return!0;if(h=o.getOwner(),h==null)break}while(!0);return!1},t.prototype.calcLowestCommonAncestors=function(){for(var e,r,h,o,N,s=this.getAllEdges(),g=s.length,u=0;u<g;u++){if(e=s[u],r=e.source,h=e.target,e.lca=null,e.sourceInLca=r,e.targetInLca=h,r==h){e.lca=r.getOwner();continue}for(o=r.getOwner();e.lca==null;){for(e.targetInLca=h,N=h.getOwner();e.lca==null;){if(N==o){e.lca=N;break}if(N==this.rootGraph)break;if(e.lca!=null)throw"assert failed";e.targetInLca=N.getParent(),N=e.targetInLca.getOwner()}if(o==this.rootGraph)break;e.lca??(e.sourceInLca=o.getParent(),o=e.sourceInLca.getOwner())}if(e.lca==null)throw"assert failed"}},t.prototype.calcLowestCommonAncestor=function(e,r){if(e==r)return e.getOwner();var h=e.getOwner();do{if(h==null)break;var o=r.getOwner();do{if(o==null)break;if(o==h)return o;o=o.getParent().getOwner()}while(!0);h=h.getParent().getOwner()}while(!0);return h},t.prototype.calcInclusionTreeDepths=function(e,r){e==null&&r==null&&(e=this.rootGraph,r=1);for(var h,o=e.getNodes(),N=o.length,s=0;s<N;s++)h=o[s],h.inclusionTreeDepth=r,h.child!=null&&this.calcInclusionTreeDepths(h.child,r+1)},t.prototype.includesInvalidEdge=function(){for(var e,r=this.edges.length,h=0;h<r;h++)if(e=this.edges[h],this.isOneAncestorOfOther(e.source,e.target))return!0;return!1},m.exports=t}),(function(m,L,A){var n=A(0);function i(){}for(var t in n)i[t]=n[t];i.MAX_ITERATIONS=2500,i.DEFAULT_EDGE_LENGTH=50,i.DEFAULT_SPRING_STRENGTH=.45,i.DEFAULT_REPULSION_STRENGTH=4500,i.DEFAULT_GRAVITY_STRENGTH=.4,i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,i.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,i.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,i.COOLING_ADAPTATION_FACTOR=.33,i.ADAPTATION_LOWER_NODE_LIMIT=1e3,i.ADAPTATION_UPPER_NODE_LIMIT=5e3,i.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,i.MAX_NODE_DISPLACEMENT=i.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,i.MIN_REPULSION_DIST=i.DEFAULT_EDGE_LENGTH/10,i.CONVERGENCE_CHECK_PERIOD=100,i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,i.MIN_EDGE_LENGTH=1,i.GRID_CALCULATION_CHECK_PERIOD=10,m.exports=i}),(function(m,L,A){var n=A(12);function i(){}i.calcSeparationAmount=function(t,e,r,h){if(!t.intersects(e))throw"assert failed";var o=[,,];this.decideDirectionsForOverlappingNodes(t,e,o),r[0]=Math.min(t.getRight(),e.getRight())-Math.max(t.x,e.x),r[1]=Math.min(t.getBottom(),e.getBottom())-Math.max(t.y,e.y),t.getX()<=e.getX()&&t.getRight()>=e.getRight()?r[0]+=Math.min(e.getX()-t.getX(),t.getRight()-e.getRight()):e.getX()<=t.getX()&&e.getRight()>=t.getRight()&&(r[0]+=Math.min(t.getX()-e.getX(),e.getRight()-t.getRight())),t.getY()<=e.getY()&&t.getBottom()>=e.getBottom()?r[1]+=Math.min(e.getY()-t.getY(),t.getBottom()-e.getBottom()):e.getY()<=t.getY()&&e.getBottom()>=t.getBottom()&&(r[1]+=Math.min(t.getY()-e.getY(),e.getBottom()-t.getBottom()));var N=Math.abs((e.getCenterY()-t.getCenterY())/(e.getCenterX()-t.getCenterX()));e.getCenterY()===t.getCenterY()&&e.getCenterX()===t.getCenterX()&&(N=1);var s=N*r[0],g=r[1]/N;r[0]<g?g=r[0]:s=r[1],r[0]=-1*o[0]*(g/2+h),r[1]=-1*o[1]*(s/2+h)},i.decideDirectionsForOverlappingNodes=function(t,e,r){t.getCenterX()<e.getCenterX()?r[0]=-1:r[0]=1,t.getCenterY()<e.getCenterY()?r[1]=-1:r[1]=1},i.getIntersection2=function(t,e,r){var h=t.getCenterX(),o=t.getCenterY(),N=e.getCenterX(),s=e.getCenterY();if(t.intersects(e))return r[0]=h,r[1]=o,r[2]=N,r[3]=s,!0;var g=t.getX(),u=t.getY(),p=t.getRight(),y=t.getX(),c=t.getBottom(),f=t.getRight(),T=t.getWidthHalf(),E=t.getHeightHalf(),O=e.getX(),a=e.getY(),d=e.getRight(),l=e.getX(),v=e.getBottom(),_=e.getRight(),D=e.getWidthHalf(),I=e.getHeightHalf(),w=!1,R=!1;if(h===N){if(o>s)return r[0]=h,r[1]=u,r[2]=N,r[3]=v,!1;if(o<s)return r[0]=h,r[1]=c,r[2]=N,r[3]=a,!1}else if(o===s){if(h>N)return r[0]=g,r[1]=o,r[2]=d,r[3]=s,!1;if(h<N)return r[0]=p,r[1]=o,r[2]=O,r[3]=s,!1}else{var G=t.height/t.width,x=e.height/e.width,M=(s-o)/(N-h),U=void 0,b=void 0,F=void 0,S=void 0,Y=void 0,X=void 0;if(-G===M?h>N?(r[0]=y,r[1]=c,w=!0):(r[0]=p,r[1]=u,w=!0):G===M&&(h>N?(r[0]=g,r[1]=u,w=!0):(r[0]=f,r[1]=c,w=!0)),-x===M?N>h?(r[2]=l,r[3]=v,R=!0):(r[2]=d,r[3]=a,R=!0):x===M&&(N>h?(r[2]=O,r[3]=a,R=!0):(r[2]=_,r[3]=v,R=!0)),w&&R)return!1;if(h>N?o>s?(U=this.getCardinalDirection(G,M,4),b=this.getCardinalDirection(x,M,2)):(U=this.getCardinalDirection(-G,M,3),b=this.getCardinalDirection(-x,M,1)):o>s?(U=this.getCardinalDirection(-G,M,1),b=this.getCardinalDirection(-x,M,3)):(U=this.getCardinalDirection(G,M,2),b=this.getCardinalDirection(x,M,4)),!w)switch(U){case 1:S=u,F=h+-E/M,r[0]=F,r[1]=S;break;case 2:F=f,S=o+T*M,r[0]=F,r[1]=S;break;case 3:S=c,F=h+E/M,r[0]=F,r[1]=S;break;case 4:F=y,S=o+-T*M,r[0]=F,r[1]=S;break}if(!R)switch(b){case 1:X=a,Y=N+-I/M,r[2]=Y,r[3]=X;break;case 2:Y=_,X=s+D*M,r[2]=Y,r[3]=X;break;case 3:X=v,Y=N+I/M,r[2]=Y,r[3]=X;break;case 4:Y=l,X=s+-D*M,r[2]=Y,r[3]=X;break}}return!1},i.getCardinalDirection=function(t,e,r){return t>e?r:1+r%4},i.getIntersection=function(t,e,r,h){if(h==null)return this.getIntersection2(t,e,r);var o=t.x,N=t.y,s=e.x,g=e.y,u=r.x,p=r.y,y=h.x,c=h.y,f=void 0,T=void 0,E=void 0,O=void 0,a=void 0,d=void 0,l=void 0,v=void 0,_=void 0;return E=g-N,a=o-s,l=s*N-o*g,O=c-p,d=u-y,v=y*p-u*c,_=E*d-O*a,_===0?null:(f=(a*v-d*l)/_,T=(O*l-E*v)/_,new n(f,T))},i.angleOfVector=function(t,e,r,h){var o=void 0;return t===r?o=h<e?this.ONE_AND_HALF_PI:this.HALF_PI:(o=Math.atan((h-e)/(r-t)),r<t?o+=Math.PI:h<e&&(o+=this.TWO_PI)),o},i.doIntersect=function(t,e,r,h){var o=t.x,N=t.y,s=e.x,g=e.y,u=r.x,p=r.y,y=h.x,c=h.y,f=(s-o)*(c-p)-(y-u)*(g-N);if(f===0)return!1;var T=((c-p)*(y-o)+(u-y)*(c-N))/f,E=((N-g)*(y-o)+(s-o)*(c-N))/f;return 0<T&&T<1&&0<E&&E<1},i.HALF_PI=.5*Math.PI,i.ONE_AND_HALF_PI=1.5*Math.PI,i.TWO_PI=2*Math.PI,i.THREE_PI=3*Math.PI,m.exports=i}),(function(m,L,A){function n(){}n.sign=function(i){return i>0?1:i<0?-1:0},n.floor=function(i){return i<0?Math.ceil(i):Math.floor(i)},n.ceil=function(i){return i<0?Math.floor(i):Math.ceil(i)},m.exports=n}),(function(m,L,A){function n(){}n.MAX_VALUE=2147483647,n.MIN_VALUE=-2147483648,m.exports=n}),(function(m,L,A){var n=(function(){function h(o,N){for(var s=0;s<N.length;s++){var g=N[s];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(o,g.key,g)}}return function(o,N,s){return N&&h(o.prototype,N),s&&h(o,s),o}})();function i(h,o){if(!(h instanceof o))throw TypeError("Cannot call a class as a function")}var t=function(h){return{value:h,next:null,prev:null}},e=function(h,o,N,s){return h===null?s.head=o:h.next=o,N===null?s.tail=o:N.prev=o,o.prev=h,o.next=N,s.length++,o},r=function(h,o){var N=h.prev,s=h.next;return N===null?o.head=s:N.next=s,s===null?o.tail=N:s.prev=N,h.prev=h.next=null,o.length--,h};m.exports=(function(){function h(o){var N=this;i(this,h),this.length=0,this.head=null,this.tail=null,o==null||o.forEach(function(s){return N.push(s)})}return n(h,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(o,N){return e(N.prev,t(o),N,this)}},{key:"insertAfter",value:function(o,N){return e(N,t(o),N.next,this)}},{key:"insertNodeBefore",value:function(o,N){return e(N.prev,o,N,this)}},{key:"insertNodeAfter",value:function(o,N){return e(N,o,N.next,this)}},{key:"push",value:function(o){return e(this.tail,t(o),null,this)}},{key:"unshift",value:function(o){return e(null,t(o),this.head,this)}},{key:"remove",value:function(o){return r(o,this)}},{key:"pop",value:function(){return r(this.tail,this).value}},{key:"popNode",value:function(){return r(this.tail,this)}},{key:"shift",value:function(){return r(this.head,this).value}},{key:"shiftNode",value:function(){return r(this.head,this)}},{key:"get_object_at",value:function(o){if(o<=this.length()){for(var N=1,s=this.head;N<o;)s=s.next,N++;return s.value}}},{key:"set_object_at",value:function(o,N){if(o<=this.length()){for(var s=1,g=this.head;s<o;)g=g.next,s++;g.value=N}}}]),h})()}),(function(m,L,A){function n(i,t,e){this.x=null,this.y=null,i==null&&t==null&&e==null?(this.x=0,this.y=0):typeof i=="number"&&typeof t=="number"&&e==null?(this.x=i,this.y=t):i.constructor.name=="Point"&&t==null&&e==null&&(e=i,this.x=e.x,this.y=e.y)}n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.getLocation=function(){return new n(this.x,this.y)},n.prototype.setLocation=function(i,t,e){i.constructor.name=="Point"&&t==null&&e==null?(e=i,this.setLocation(e.x,e.y)):typeof i=="number"&&typeof t=="number"&&e==null&&(parseInt(i)==i&&parseInt(t)==t?this.move(i,t):(this.x=Math.floor(i+.5),this.y=Math.floor(t+.5)))},n.prototype.move=function(i,t){this.x=i,this.y=t},n.prototype.translate=function(i,t){this.x+=i,this.y+=t},n.prototype.equals=function(i){if(i.constructor.name=="Point"){var t=i;return this.x==t.x&&this.y==t.y}return this==i},n.prototype.toString=function(){return new n().constructor.name+"[x="+this.x+",y="+this.y+"]"},m.exports=n}),(function(m,L,A){function n(i,t,e,r){this.x=0,this.y=0,this.width=0,this.height=0,i!=null&&t!=null&&e!=null&&r!=null&&(this.x=i,this.y=t,this.width=e,this.height=r)}n.prototype.getX=function(){return this.x},n.prototype.setX=function(i){this.x=i},n.prototype.getY=function(){return this.y},n.prototype.setY=function(i){this.y=i},n.prototype.getWidth=function(){return this.width},n.prototype.setWidth=function(i){this.width=i},n.prototype.getHeight=function(){return this.height},n.prototype.setHeight=function(i){this.height=i},n.prototype.getRight=function(){return this.x+this.width},n.prototype.getBottom=function(){return this.y+this.height},n.prototype.intersects=function(i){return!(this.getRight()<i.x||this.getBottom()<i.y||i.getRight()<this.x||i.getBottom()<this.y)},n.prototype.getCenterX=function(){return this.x+this.width/2},n.prototype.getMinX=function(){return this.getX()},n.prototype.getMaxX=function(){return this.getX()+this.width},n.prototype.getCenterY=function(){return this.y+this.height/2},n.prototype.getMinY=function(){return this.getY()},n.prototype.getMaxY=function(){return this.getY()+this.height},n.prototype.getWidthHalf=function(){return this.width/2},n.prototype.getHeightHalf=function(){return this.height/2},m.exports=n}),(function(m,L,A){var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(){}i.lastID=0,i.createID=function(t){return i.isPrimitive(t)?t:(t.uniqueID==null&&(t.uniqueID=i.getString(),i.lastID++),t.uniqueID)},i.getString=function(t){return t??(t=i.lastID),"Object#"+t},i.isPrimitive=function(t){var e=t===void 0?"undefined":n(t);return t==null||e!="object"&&e!="function"},m.exports=i}),(function(m,L,A){function n(u){if(Array.isArray(u)){for(var p=0,y=Array(u.length);p<u.length;p++)y[p]=u[p];return y}else return Array.from(u)}var i=A(0),t=A(6),e=A(3),r=A(1),h=A(5),o=A(4),N=A(17),s=A(27);function g(u){s.call(this),this.layoutQuality=i.QUALITY,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=i.DEFAULT_INCREMENTAL,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new t(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,u!=null&&(this.isRemoteUse=u)}g.RANDOM_SEED=1,g.prototype=Object.create(s.prototype),g.prototype.getGraphManager=function(){return this.graphManager},g.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},g.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},g.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},g.prototype.newGraphManager=function(){var u=new t(this);return this.graphManager=u,u},g.prototype.newGraph=function(u){return new h(null,this.graphManager,u)},g.prototype.newNode=function(u){return new e(this.graphManager,u)},g.prototype.newEdge=function(u){return new r(null,null,u)},g.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},g.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var u=this.checkLayoutSuccess()?!1:this.layout();return i.ANIMATE==="during"?!1:(u&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,u)},g.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},g.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var u=this.graphManager.getAllEdges(),p=0;p<u.length;p++)u[p];for(var y=this.graphManager.getRoot().getNodes(),p=0;p<y.length;p++)y[p];this.update(this.graphManager.getRoot())}},g.prototype.update=function(u){if(u==null)this.update2();else if(u instanceof e){var p=u;if(p.getChild()!=null)for(var y=p.getChild().getNodes(),c=0;c<y.length;c++)update(y[c]);p.vGraphObject!=null&&p.vGraphObject.update(p)}else if(u instanceof r){var f=u;f.vGraphObject!=null&&f.vGraphObject.update(f)}else if(u instanceof h){var T=u;T.vGraphObject!=null&&T.vGraphObject.update(T)}},g.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=i.QUALITY,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=i.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},g.prototype.transform=function(u){if(u==null)this.transform(new o(0,0));else{var p=new N,y=this.graphManager.getRoot().updateLeftTop();if(y!=null){p.setWorldOrgX(u.x),p.setWorldOrgY(u.y),p.setDeviceOrgX(y.x),p.setDeviceOrgY(y.y);for(var c=this.getAllNodes(),f,T=0;T<c.length;T++)f=c[T],f.transform(p)}}},g.prototype.positionNodesRandomly=function(u){if(u==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var p,y,c=u.getNodes(),f=0;f<c.length;f++)p=c[f],y=p.getChild(),y==null||y.getNodes().length==0?p.scatter():(this.positionNodesRandomly(y),p.updateBounds())},g.prototype.getFlatForest=function(){for(var u=[],p=!0,y=this.graphManager.getRoot().getNodes(),c=!0,f=0;f<y.length;f++)y[f].getChild()!=null&&(c=!1);if(!c)return u;var T=new Set,E=[],O=new Map,a=[];for(a=a.concat(y);a.length>0&&p;){for(E.push(a[0]);E.length>0&&p;){var d=E[0];E.splice(0,1),T.add(d);for(var l=d.getEdges(),f=0;f<l.length;f++){var v=l[f].getOtherEnd(d);if(O.get(d)!=v)if(!T.has(v))E.push(v),O.set(v,d);else{p=!1;break}}}if(!p)u=[];else{var _=[].concat(n(T));u.push(_);for(var f=0;f<_.length;f++){var D=_[f],I=a.indexOf(D);I>-1&&a.splice(I,1)}T=new Set,O=new Map}}return u},g.prototype.createDummyNodesForBendpoints=function(u){for(var p=[],y=u.source,c=this.graphManager.calcLowestCommonAncestor(u.source,u.target),f=0;f<u.bendpoints.length;f++){var T=this.newNode(null);T.setRect(new Point(0,0),new Dimension(1,1)),c.add(T);var E=this.newEdge(null);this.graphManager.add(E,y,T),p.add(T),y=T}var E=this.newEdge(null);return this.graphManager.add(E,y,u.target),this.edgeToDummyNodes.set(u,p),u.isInterGraph()?this.graphManager.remove(u):c.remove(u),p},g.prototype.createBendpointsFromDummyNodes=function(){var u=[];u=u.concat(this.graphManager.getAllEdges()),u=[].concat(n(this.edgeToDummyNodes.keys()),u);for(var p=0;p<u.length;p++){var y=u[p];if(y.bendpoints.length>0){for(var c=this.edgeToDummyNodes.get(y),f=0;f<c.length;f++){var T=c[f],E=new o(T.getCenterX(),T.getCenterY()),O=y.bendpoints.get(f);O.x=E.x,O.y=E.y,T.getOwner().remove(T)}this.graphManager.add(y,y.source,y.target)}}},g.transform=function(u,p,y,c){if(y!=null&&c!=null){var f=p;if(u<=50){var T=p/y;f-=(p-T)/50*(50-u)}else{var E=p*c;f+=(E-p)/50*(u-50)}return f}else{var O,a;return u<=50?(O=9*p/500,a=p/10):(O=9*p/50,a=-8*p),O*u+a}},g.findCenterOfTree=function(u){var p=[];p=p.concat(u);var y=[],c=new Map,f=!1,T=null;(p.length==1||p.length==2)&&(f=!0,T=p[0]);for(var E=0;E<p.length;E++){var O=p[E],a=O.getNeighborsList().size;c.set(O,O.getNeighborsList().size),a==1&&y.push(O)}var d=[];for(d=d.concat(y);!f;){var l=[];l=l.concat(d),d=[];for(var E=0;E<p.length;E++){var O=p[E],v=p.indexOf(O);v>=0&&p.splice(v,1),O.getNeighborsList().forEach(function(I){if(y.indexOf(I)<0){var w=c.get(I)-1;w==1&&d.push(I),c.set(I,w)}})}y=y.concat(d),(p.length==1||p.length==2)&&(f=!0,T=p[0])}return T},g.prototype.setGraphManager=function(u){this.graphManager=u},m.exports=g}),(function(m,L,A){function n(){}n.seed=1,n.x=0,n.nextDouble=function(){return n.x=Math.sin(n.seed++)*1e4,n.x-Math.floor(n.x)},m.exports=n}),(function(m,L,A){var n=A(4);function i(t,e){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}i.prototype.getWorldOrgX=function(){return this.lworldOrgX},i.prototype.setWorldOrgX=function(t){this.lworldOrgX=t},i.prototype.getWorldOrgY=function(){return this.lworldOrgY},i.prototype.setWorldOrgY=function(t){this.lworldOrgY=t},i.prototype.getWorldExtX=function(){return this.lworldExtX},i.prototype.setWorldExtX=function(t){this.lworldExtX=t},i.prototype.getWorldExtY=function(){return this.lworldExtY},i.prototype.setWorldExtY=function(t){this.lworldExtY=t},i.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},i.prototype.setDeviceOrgX=function(t){this.ldeviceOrgX=t},i.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},i.prototype.setDeviceOrgY=function(t){this.ldeviceOrgY=t},i.prototype.getDeviceExtX=function(){return this.ldeviceExtX},i.prototype.setDeviceExtX=function(t){this.ldeviceExtX=t},i.prototype.getDeviceExtY=function(){return this.ldeviceExtY},i.prototype.setDeviceExtY=function(t){this.ldeviceExtY=t},i.prototype.transformX=function(t){var e=0,r=this.lworldExtX;return r!=0&&(e=this.ldeviceOrgX+(t-this.lworldOrgX)*this.ldeviceExtX/r),e},i.prototype.transformY=function(t){var e=0,r=this.lworldExtY;return r!=0&&(e=this.ldeviceOrgY+(t-this.lworldOrgY)*this.ldeviceExtY/r),e},i.prototype.inverseTransformX=function(t){var e=0,r=this.ldeviceExtX;return r!=0&&(e=this.lworldOrgX+(t-this.ldeviceOrgX)*this.lworldExtX/r),e},i.prototype.inverseTransformY=function(t){var e=0,r=this.ldeviceExtY;return r!=0&&(e=this.lworldOrgY+(t-this.ldeviceOrgY)*this.lworldExtY/r),e},i.prototype.inverseTransformPoint=function(t){return new n(this.inverseTransformX(t.x),this.inverseTransformY(t.y))},m.exports=i}),(function(m,L,A){function n(s){if(Array.isArray(s)){for(var g=0,u=Array(s.length);g<s.length;g++)u[g]=s[g];return u}else return Array.from(s)}var i=A(15),t=A(7),e=A(0),r=A(8),h=A(9);function o(){i.call(this),this.useSmartIdealEdgeLengthCalculation=t.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=t.DEFAULT_EDGE_LENGTH,this.springConstant=t.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=t.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=t.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=t.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=t.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=t.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*t.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=t.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=t.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=t.MAX_ITERATIONS}for(var N in o.prototype=Object.create(i.prototype),i)o[N]=i[N];o.prototype.initParameters=function(){i.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=t.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},o.prototype.calcIdealEdgeLengths=function(){for(var s,g,u,p,y,c,f=this.getGraphManager().getAllEdges(),T=0;T<f.length;T++)s=f[T],s.idealLength=this.idealEdgeLength,s.isInterGraph&&(u=s.getSource(),p=s.getTarget(),y=s.getSourceInLca().getEstimatedSize(),c=s.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(s.idealLength+=y+c-2*e.SIMPLE_NODE_SIZE),g=s.getLca().getInclusionTreeDepth(),s.idealLength+=t.DEFAULT_EDGE_LENGTH*t.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(u.getInclusionTreeDepth()+p.getInclusionTreeDepth()-2*g))},o.prototype.initSpringEmbedder=function(){var s=this.getAllNodes().length;this.incremental?(s>t.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*t.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(s-t.ADAPTATION_LOWER_NODE_LIMIT)/(t.ADAPTATION_UPPER_NODE_LIMIT-t.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-t.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=t.MAX_NODE_DISPLACEMENT_INCREMENTAL):(s>t.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(t.COOLING_ADAPTATION_FACTOR,1-(s-t.ADAPTATION_LOWER_NODE_LIMIT)/(t.ADAPTATION_UPPER_NODE_LIMIT-t.ADAPTATION_LOWER_NODE_LIMIT)*(1-t.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=t.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},o.prototype.calcSpringForces=function(){for(var s=this.getAllEdges(),g,u=0;u<s.length;u++)g=s[u],this.calcSpringForce(g,g.idealLength)},o.prototype.calcRepulsionForces=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u,p,y,c,f=this.getAllNodes(),T;if(this.useFRGridVariant)for(this.totalIterations%t.GRID_CALCULATION_CHECK_PERIOD==1&&s&&this.updateGrid(),T=new Set,u=0;u<f.length;u++)y=f[u],this.calculateRepulsionForceOfANode(y,T,s,g),T.add(y);else for(u=0;u<f.length;u++)for(y=f[u],p=u+1;p<f.length;p++)c=f[p],y.getOwner()==c.getOwner()&&this.calcRepulsionForce(y,c)},o.prototype.calcGravitationalForces=function(){for(var s,g=this.getAllNodesToApplyGravitation(),u=0;u<g.length;u++)s=g[u],this.calcGravitationalForce(s)},o.prototype.moveNodes=function(){for(var s=this.getAllNodes(),g,u=0;u<s.length;u++)g=s[u],g.move()},o.prototype.calcSpringForce=function(s,g){var u=s.getSource(),p=s.getTarget(),y,c,f,T;if(this.uniformLeafNodeSizes&&u.getChild()==null&&p.getChild()==null)s.updateLengthSimple();else if(s.updateLength(),s.isOverlapingSourceAndTarget)return;y=s.getLength(),y!=0&&(c=this.springConstant*(y-g),f=c*(s.lengthX/y),T=c*(s.lengthY/y),u.springForceX+=f,u.springForceY+=T,p.springForceX-=f,p.springForceY-=T)},o.prototype.calcRepulsionForce=function(s,g){var u=s.getRect(),p=g.getRect(),y=[,,],c=[,,,,],f,T,E,O,a,d,l;if(u.intersects(p)){r.calcSeparationAmount(u,p,y,t.DEFAULT_EDGE_LENGTH/2),d=2*y[0],l=2*y[1];var v=s.noOfChildren*g.noOfChildren/(s.noOfChildren+g.noOfChildren);s.repulsionForceX-=v*d,s.repulsionForceY-=v*l,g.repulsionForceX+=v*d,g.repulsionForceY+=v*l}else this.uniformLeafNodeSizes&&s.getChild()==null&&g.getChild()==null?(f=p.getCenterX()-u.getCenterX(),T=p.getCenterY()-u.getCenterY()):(r.getIntersection(u,p,c),f=c[2]-c[0],T=c[3]-c[1]),Math.abs(f)<t.MIN_REPULSION_DIST&&(f=h.sign(f)*t.MIN_REPULSION_DIST),Math.abs(T)<t.MIN_REPULSION_DIST&&(T=h.sign(T)*t.MIN_REPULSION_DIST),E=f*f+T*T,O=Math.sqrt(E),a=this.repulsionConstant*s.noOfChildren*g.noOfChildren/E,d=a*f/O,l=a*T/O,s.repulsionForceX-=d,s.repulsionForceY-=l,g.repulsionForceX+=d,g.repulsionForceY+=l},o.prototype.calcGravitationalForce=function(s){var g=s.getOwner(),u=(g.getRight()+g.getLeft())/2,p=(g.getTop()+g.getBottom())/2,y=s.getCenterX()-u,c=s.getCenterY()-p,f=Math.abs(y)+s.getWidth()/2,T=Math.abs(c)+s.getHeight()/2,E;s.getOwner()==this.graphManager.getRoot()?(E=g.getEstimatedSize()*this.gravityRangeFactor,(f>E||T>E)&&(s.gravitationForceX=-this.gravityConstant*y,s.gravitationForceY=-this.gravityConstant*c)):(E=g.getEstimatedSize()*this.compoundGravityRangeFactor,(f>E||T>E)&&(s.gravitationForceX=-this.gravityConstant*y*this.compoundGravityConstant,s.gravitationForceY=-this.gravityConstant*c*this.compoundGravityConstant))},o.prototype.isConverged=function(){var s,g=!1;return this.totalIterations>this.maxIterations/3&&(g=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),s=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,s||g},o.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},o.prototype.calcNoOfChildrenForAllNodes=function(){for(var s,g=this.graphManager.getAllNodes(),u=0;u<g.length;u++)s=g[u],s.noOfChildren=s.getNoOfChildren()},o.prototype.calcGrid=function(s){var g=0,u=0;g=parseInt(Math.ceil((s.getRight()-s.getLeft())/this.repulsionRange)),u=parseInt(Math.ceil((s.getBottom()-s.getTop())/this.repulsionRange));for(var p=Array(g),y=0;y<g;y++)p[y]=Array(u);for(var y=0;y<g;y++)for(var c=0;c<u;c++)p[y][c]=[];return p},o.prototype.addNodeToGrid=function(s,g,u){var p=0,y=0,c=0,f=0;p=parseInt(Math.floor((s.getRect().x-g)/this.repulsionRange)),y=parseInt(Math.floor((s.getRect().width+s.getRect().x-g)/this.repulsionRange)),c=parseInt(Math.floor((s.getRect().y-u)/this.repulsionRange)),f=parseInt(Math.floor((s.getRect().height+s.getRect().y-u)/this.repulsionRange));for(var T=p;T<=y;T++)for(var E=c;E<=f;E++)this.grid[T][E].push(s),s.setGridCoordinates(p,y,c,f)},o.prototype.updateGrid=function(){var s,g,u=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),s=0;s<u.length;s++)g=u[s],this.addNodeToGrid(g,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},o.prototype.calculateRepulsionForceOfANode=function(s,g,u,p){if(this.totalIterations%t.GRID_CALCULATION_CHECK_PERIOD==1&&u||p){var y=new Set;s.surrounding=[];for(var c,f=this.grid,T=s.startX-1;T<s.finishX+2;T++)for(var E=s.startY-1;E<s.finishY+2;E++)if(!(T<0||E<0||T>=f.length||E>=f[0].length)){for(var O=0;O<f[T][E].length;O++)if(c=f[T][E][O],!(s.getOwner()!=c.getOwner()||s==c)&&!g.has(c)&&!y.has(c)){var a=Math.abs(s.getCenterX()-c.getCenterX())-(s.getWidth()/2+c.getWidth()/2),d=Math.abs(s.getCenterY()-c.getCenterY())-(s.getHeight()/2+c.getHeight()/2);a<=this.repulsionRange&&d<=this.repulsionRange&&y.add(c)}}s.surrounding=[].concat(n(y))}for(T=0;T<s.surrounding.length;T++)this.calcRepulsionForce(s,s.surrounding[T])},o.prototype.calcRepulsionRange=function(){return 0},m.exports=o}),(function(m,L,A){var n=A(1),i=A(7);function t(r,h,o){n.call(this,r,h,o),this.idealLength=i.DEFAULT_EDGE_LENGTH}for(var e in t.prototype=Object.create(n.prototype),n)t[e]=n[e];m.exports=t}),(function(m,L,A){var n=A(3);function i(e,r,h,o){n.call(this,e,r,h,o),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var t in i.prototype=Object.create(n.prototype),n)i[t]=n[t];i.prototype.setGridCoordinates=function(e,r,h,o){this.startX=e,this.finishX=r,this.startY=h,this.finishY=o},m.exports=i}),(function(m,L,A){function n(i,t){this.width=0,this.height=0,i!==null&&t!==null&&(this.height=t,this.width=i)}n.prototype.getWidth=function(){return this.width},n.prototype.setWidth=function(i){this.width=i},n.prototype.getHeight=function(){return this.height},n.prototype.setHeight=function(i){this.height=i},m.exports=n}),(function(m,L,A){var n=A(14);function i(){this.map={},this.keys=[]}i.prototype.put=function(t,e){var r=n.createID(t);this.contains(r)||(this.map[r]=e,this.keys.push(t))},i.prototype.contains=function(t){return n.createID(t),this.map[t]!=null},i.prototype.get=function(t){var e=n.createID(t);return this.map[e]},i.prototype.keySet=function(){return this.keys},m.exports=i}),(function(m,L,A){var n=A(14);function i(){this.set={}}i.prototype.add=function(t){var e=n.createID(t);this.contains(e)||(this.set[e]=t)},i.prototype.remove=function(t){delete this.set[n.createID(t)]},i.prototype.clear=function(){this.set={}},i.prototype.contains=function(t){return this.set[n.createID(t)]==t},i.prototype.isEmpty=function(){return this.size()===0},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAllTo=function(t){for(var e=Object.keys(this.set),r=e.length,h=0;h<r;h++)t.push(this.set[e[h]])},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAll=function(t){for(var e=t.length,r=0;r<e;r++){var h=t[r];this.add(h)}},m.exports=i}),(function(m,L,A){var n=(function(){function e(r,h){for(var o=0;o<h.length;o++){var N=h[o];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(r,N.key,N)}}return function(r,h,o){return h&&e(r.prototype,h),o&&e(r,o),r}})();function i(e,r){if(!(e instanceof r))throw TypeError("Cannot call a class as a function")}var t=A(11);m.exports=(function(){function e(r,h){i(this,e),(h!==null||h!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var o=void 0;o=r instanceof t?r.size():r.length,this._quicksort(r,0,o-1)}return n(e,[{key:"_quicksort",value:function(r,h,o){if(h<o){var N=this._partition(r,h,o);this._quicksort(r,h,N),this._quicksort(r,N+1,o)}}},{key:"_partition",value:function(r,h,o){for(var N=this._get(r,h),s=h,g=o;;){for(;this.compareFunction(N,this._get(r,g));)g--;for(;this.compareFunction(this._get(r,s),N);)s++;if(s<g)this._swap(r,s,g),s++,g--;else return g}}},{key:"_get",value:function(r,h){return r instanceof t?r.get_object_at(h):r[h]}},{key:"_set",value:function(r,h,o){r instanceof t?r.set_object_at(h,o):r[h]=o}},{key:"_swap",value:function(r,h,o){var N=this._get(r,h);this._set(r,h,this._get(r,o)),this._set(r,o,N)}},{key:"_defaultCompareFunction",value:function(r,h){return h>r}}]),e})()}),(function(m,L,A){var n=(function(){function t(e,r){for(var h=0;h<r.length;h++){var o=r[h];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,h){return r&&t(e.prototype,r),h&&t(e,h),e}})();function i(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}m.exports=(function(){function t(e,r){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,N=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;i(this,t),this.sequence1=e,this.sequence2=r,this.match_score=h,this.mismatch_penalty=o,this.gap_penalty=N,this.iMax=e.length+1,this.jMax=r.length+1,this.grid=Array(this.iMax);for(var s=0;s<this.iMax;s++){this.grid[s]=Array(this.jMax);for(var g=0;g<this.jMax;g++)this.grid[s][g]=0}this.tracebackGrid=Array(this.iMax);for(var u=0;u<this.iMax;u++){this.tracebackGrid[u]=Array(this.jMax);for(var p=0;p<this.jMax;p++)this.tracebackGrid[u][p]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return n(t,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var e=1;e<this.jMax;e++)this.grid[0][e]=this.grid[0][e-1]+this.gap_penalty,this.tracebackGrid[0][e]=[!1,!1,!0];for(var r=1;r<this.iMax;r++)this.grid[r][0]=this.grid[r-1][0]+this.gap_penalty,this.tracebackGrid[r][0]=[!1,!0,!1];for(var h=1;h<this.iMax;h++)for(var o=1;o<this.jMax;o++){var N=void 0;N=this.sequence1[h-1]===this.sequence2[o-1]?this.grid[h-1][o-1]+this.match_score:this.grid[h-1][o-1]+this.mismatch_penalty;var s=this.grid[h-1][o]+this.gap_penalty,g=this.grid[h][o-1]+this.gap_penalty,u=[N,s,g],p=this.arrayAllMaxIndexes(u);this.grid[h][o]=u[p[0]],this.tracebackGrid[h][o]=[p.includes(0),p.includes(1),p.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var e=[];for(e.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});e[0];){var r=e[0],h=this.tracebackGrid[r.pos[0]][r.pos[1]];h[0]&&e.push({pos:[r.pos[0]-1,r.pos[1]-1],seq1:this.sequence1[r.pos[0]-1]+r.seq1,seq2:this.sequence2[r.pos[1]-1]+r.seq2}),h[1]&&e.push({pos:[r.pos[0]-1,r.pos[1]],seq1:this.sequence1[r.pos[0]-1]+r.seq1,seq2:"-"+r.seq2}),h[2]&&e.push({pos:[r.pos[0],r.pos[1]-1],seq1:"-"+r.seq1,seq2:this.sequence2[r.pos[1]-1]+r.seq2}),r.pos[0]===0&&r.pos[1]===0&&this.alignments.push({sequence1:r.seq1,sequence2:r.seq2}),e.shift()}return this.alignments}},{key:"getAllIndexes",value:function(e,r){for(var h=[],o=-1;(o=e.indexOf(r,o+1))!==-1;)h.push(o);return h}},{key:"arrayAllMaxIndexes",value:function(e){return this.getAllIndexes(e,Math.max.apply(null,e))}}]),t})()}),(function(m,L,A){var n=function(){};n.FDLayout=A(18),n.FDLayoutConstants=A(7),n.FDLayoutEdge=A(19),n.FDLayoutNode=A(20),n.DimensionD=A(21),n.HashMap=A(22),n.HashSet=A(23),n.IGeometry=A(8),n.IMath=A(9),n.Integer=A(10),n.Point=A(12),n.PointD=A(4),n.RandomSeed=A(16),n.RectangleD=A(13),n.Transform=A(17),n.UniqueIDGeneretor=A(14),n.Quicksort=A(24),n.LinkedList=A(11),n.LGraphObject=A(2),n.LGraph=A(5),n.LEdge=A(1),n.LGraphManager=A(6),n.LNode=A(3),n.Layout=A(15),n.LayoutConstants=A(0),n.NeedlemanWunsch=A(25),m.exports=n}),(function(m,L,A){function n(){this.listeners=[]}var i=n.prototype;i.addListener=function(t,e){this.listeners.push({event:t,callback:e})},i.removeListener=function(t,e){for(var r=this.listeners.length;r>=0;r--){var h=this.listeners[r];h.event===t&&h.callback===e&&this.listeners.splice(r,1)}},i.emit=function(t,e){for(var r=0;r<this.listeners.length;r++){var h=this.listeners[r];t===h.event&&h.callback(e)}},m.exports=n})])})})),Q=V(((C,P)=>{(function(m,L){typeof C=="object"&&typeof P=="object"?P.exports=L(Z()):typeof define=="function"&&define.amd?define(["layout-base"],L):typeof C=="object"?C.coseBase=L(Z()):m.coseBase=L(m.layoutBase)})(C,function(m){return(function(L){var A={};function n(i){if(A[i])return A[i].exports;var t=A[i]={i,l:!1,exports:{}};return L[i].call(t.exports,t,t.exports,n),t.l=!0,t.exports}return n.m=L,n.c=A,n.i=function(i){return i},n.d=function(i,t,e){n.o(i,t)||Object.defineProperty(i,t,{configurable:!1,enumerable:!0,get:e})},n.n=function(i){var t=i&&i.__esModule?function(){return i.default}:function(){return i};return n.d(t,"a",t),t},n.o=function(i,t){return Object.prototype.hasOwnProperty.call(i,t)},n.p="",n(n.s=7)})([(function(L,A){L.exports=m}),(function(L,A,n){var i=n(0).FDLayoutConstants;function t(){}for(var e in i)t[e]=i[e];t.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,t.DEFAULT_RADIAL_SEPARATION=i.DEFAULT_EDGE_LENGTH,t.DEFAULT_COMPONENT_SEPERATION=60,t.TILE=!0,t.TILING_PADDING_VERTICAL=10,t.TILING_PADDING_HORIZONTAL=10,t.TREE_REDUCTION_ON_INCREMENTAL=!1,L.exports=t}),(function(L,A,n){var i=n(0).FDLayoutEdge;function t(r,h,o){i.call(this,r,h,o)}for(var e in t.prototype=Object.create(i.prototype),i)t[e]=i[e];L.exports=t}),(function(L,A,n){var i=n(0).LGraph;function t(r,h,o){i.call(this,r,h,o)}for(var e in t.prototype=Object.create(i.prototype),i)t[e]=i[e];L.exports=t}),(function(L,A,n){var i=n(0).LGraphManager;function t(r){i.call(this,r)}for(var e in t.prototype=Object.create(i.prototype),i)t[e]=i[e];L.exports=t}),(function(L,A,n){var i=n(0).FDLayoutNode,t=n(0).IMath;function e(h,o,N,s){i.call(this,h,o,N,s)}for(var r in e.prototype=Object.create(i.prototype),i)e[r]=i[r];e.prototype.move=function(){var h=this.graphManager.getLayout();this.displacementX=h.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=h.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>h.coolingFactor*h.maxNodeDisplacement&&(this.displacementX=h.coolingFactor*h.maxNodeDisplacement*t.sign(this.displacementX)),Math.abs(this.displacementY)>h.coolingFactor*h.maxNodeDisplacement&&(this.displacementY=h.coolingFactor*h.maxNodeDisplacement*t.sign(this.displacementY)),this.child==null||this.child.getNodes().length==0?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),h.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},e.prototype.propogateDisplacementToChildren=function(h,o){for(var N=this.getChild().getNodes(),s,g=0;g<N.length;g++)s=N[g],s.getChild()==null?(s.moveBy(h,o),s.displacementX+=h,s.displacementY+=o):s.propogateDisplacementToChildren(h,o)},e.prototype.setPred1=function(h){this.pred1=h},e.prototype.getPred1=function(){return pred1},e.prototype.getPred2=function(){return pred2},e.prototype.setNext=function(h){this.next=h},e.prototype.getNext=function(){return next},e.prototype.setProcessed=function(h){this.processed=h},e.prototype.isProcessed=function(){return processed},L.exports=e}),(function(L,A,n){var i=n(0).FDLayout,t=n(4),e=n(3),r=n(5),h=n(2),o=n(1),N=n(0).FDLayoutConstants,s=n(0).LayoutConstants,g=n(0).Point,u=n(0).PointD,p=n(0).Layout,y=n(0).Integer,c=n(0).IGeometry,f=n(0).LGraph,T=n(0).Transform;function E(){i.call(this),this.toBeTiled={}}for(var O in E.prototype=Object.create(i.prototype),i)E[O]=i[O];E.prototype.newGraphManager=function(){var a=new t(this);return this.graphManager=a,a},E.prototype.newGraph=function(a){return new e(null,this.graphManager,a)},E.prototype.newNode=function(a){return new r(this.graphManager,a)},E.prototype.newEdge=function(a){return new h(null,null,a)},E.prototype.initParameters=function(){i.prototype.initParameters.call(this,arguments),this.isSubLayout||(o.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=o.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=N.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=N.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=N.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=N.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=N.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=N.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/N.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=N.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},E.prototype.layout=function(){return s.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},E.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(o.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var a=new Set(this.getAllNodes()),d=this.nodesWithGravity.filter(function(v){return a.has(v)});this.graphManager.setAllNodesToApplyGravitation(d)}}else{var l=this.getFlatForest();if(l.length>0)this.positionNodesRadially(l);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var a=new Set(this.getAllNodes()),d=this.nodesWithGravity.filter(function(D){return a.has(D)});this.graphManager.setAllNodesToApplyGravitation(d),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},E.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%N.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-this.coolingCycle**+(Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var a=new Set(this.getAllNodes()),d=this.nodesWithGravity.filter(function(_){return a.has(_)});this.graphManager.setAllNodesToApplyGravitation(d),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=N.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=N.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var l=!this.isTreeGrowing&&!this.isGrowthFinished,v=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(l,v),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},E.prototype.getPositionsData=function(){for(var a=this.graphManager.getAllNodes(),d={},l=0;l<a.length;l++){var v=a[l].rect,_=a[l].id;d[_]={id:_,x:v.getCenterX(),y:v.getCenterY(),w:v.width,h:v.height}}return d},E.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var a=!1;if(N.ANIMATE==="during")this.emit("layoutstarted");else{for(;!a;)a=this.tick();this.graphManager.updateBounds()}},E.prototype.calculateNodesToApplyGravitationTo=function(){var a=[],d,l=this.graphManager.getGraphs(),v=l.length,_;for(_=0;_<v;_++)d=l[_],d.updateConnected(),d.isConnected||(a=a.concat(d.getNodes()));return a},E.prototype.createBendpoints=function(){var a=[];a=a.concat(this.graphManager.getAllEdges());var d=new Set,l;for(l=0;l<a.length;l++){var v=a[l];if(!d.has(v)){var _=v.getSource(),D=v.getTarget();if(_==D)v.getBendpoints().push(new u),v.getBendpoints().push(new u),this.createDummyNodesForBendpoints(v),d.add(v);else{var I=[];if(I=I.concat(_.getEdgeListToNode(D)),I=I.concat(D.getEdgeListToNode(_)),!d.has(I[0])){if(I.length>1){var w;for(w=0;w<I.length;w++){var R=I[w];R.getBendpoints().push(new u),this.createDummyNodesForBendpoints(R)}}I.forEach(function(G){d.add(G)})}}}if(d.size==a.length)break}},E.prototype.positionNodesRadially=function(a){for(var d=new g(0,0),l=Math.ceil(Math.sqrt(a.length)),v=0,_=0,D=0,I=new u(0,0),w=0;w<a.length;w++){w%l==0&&(D=0,_=v,w!=0&&(_+=o.DEFAULT_COMPONENT_SEPERATION),v=0);var R=a[w],G=p.findCenterOfTree(R);d.x=D,d.y=_,I=E.radialLayout(R,G,d),I.y>v&&(v=Math.floor(I.y)),D=Math.floor(I.x+o.DEFAULT_COMPONENT_SEPERATION)}this.transform(new u(s.WORLD_CENTER_X-I.x/2,s.WORLD_CENTER_Y-I.y/2))},E.radialLayout=function(a,d,l){var v=Math.max(this.maxDiagonalInTree(a),o.DEFAULT_RADIAL_SEPARATION);E.branchRadialLayout(d,null,0,359,0,v);var _=f.calculateBounds(a),D=new T;D.setDeviceOrgX(_.getMinX()),D.setDeviceOrgY(_.getMinY()),D.setWorldOrgX(l.x),D.setWorldOrgY(l.y);for(var I=0;I<a.length;I++)a[I].transform(D);var w=new u(_.getMaxX(),_.getMaxY());return D.inverseTransformPoint(w)},E.branchRadialLayout=function(a,d,l,v,_,D){var I=(v-l+1)/2;I<0&&(I+=180);var w=(I+l)%360*c.TWO_PI/360,R=_*Math.cos(w),G=_*Math.sin(w);a.setCenter(R,G);var x=[];x=x.concat(a.getEdges());var M=x.length;d!=null&&M--;for(var U=0,b=x.length,F,S=a.getEdgesBetween(d);S.length>1;){var Y=S[0];S.splice(0,1);var X=x.indexOf(Y);X>=0&&x.splice(X,1),b--,M--}F=d==null?0:(x.indexOf(S[0])+1)%b;for(var W=Math.abs(v-l)/M,B=F;U!=M;B=++B%b){var H=x[B].getOtherEnd(a);if(H!=d){var q=(l+U*W)%360,ot=(q+W)%360;E.branchRadialLayout(H,a,q,ot,_+D,D),U++}}},E.maxDiagonalInTree=function(a){for(var d=y.MIN_VALUE,l=0;l<a.length;l++){var v=a[l].getDiagonal();v>d&&(d=v)}return d},E.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},E.prototype.groupZeroDegreeMembers=function(){var a=this,d={};this.memberGroups={},this.idToDummyNode={};for(var l=[],v=this.graphManager.getAllNodes(),_=0;_<v.length;_++){var D=v[_],I=D.getParent();this.getNodeDegreeWithChildren(D)===0&&(I.id==null||!this.getToBeTiled(I))&&l.push(D)}for(var _=0;_<l.length;_++){var D=l[_],w=D.getParent().id;d[w]===void 0&&(d[w]=[]),d[w]=d[w].concat(D)}Object.keys(d).forEach(function(R){if(d[R].length>1){var G="DummyCompound_"+R;a.memberGroups[G]=d[R];var x=d[R][0].getParent(),M=new r(a.graphManager);M.id=G,M.paddingLeft=x.paddingLeft||0,M.paddingRight=x.paddingRight||0,M.paddingBottom=x.paddingBottom||0,M.paddingTop=x.paddingTop||0,a.idToDummyNode[G]=M;var U=a.getGraphManager().add(a.newGraph(),M),b=x.getChild();b.add(M);for(var F=0;F<d[R].length;F++){var S=d[R][F];b.remove(S),U.add(S)}}})},E.prototype.clearCompounds=function(){var a={},d={};this.performDFSOnCompounds();for(var l=0;l<this.compoundOrder.length;l++)d[this.compoundOrder[l].id]=this.compoundOrder[l],a[this.compoundOrder[l].id]=[].concat(this.compoundOrder[l].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[l].getChild()),this.compoundOrder[l].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(a,d)},E.prototype.clearZeroDegreeMembers=function(){var a=this,d=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(l){var v=a.idToDummyNode[l];d[l]=a.tileNodes(a.memberGroups[l],v.paddingLeft+v.paddingRight),v.rect.width=d[l].width,v.rect.height=d[l].height})},E.prototype.repopulateCompounds=function(){for(var a=this.compoundOrder.length-1;a>=0;a--){var d=this.compoundOrder[a],l=d.id,v=d.paddingLeft,_=d.paddingTop;this.adjustLocations(this.tiledMemberPack[l],d.rect.x,d.rect.y,v,_)}},E.prototype.repopulateZeroDegreeMembers=function(){var a=this,d=this.tiledZeroDegreePack;Object.keys(d).forEach(function(l){var v=a.idToDummyNode[l],_=v.paddingLeft,D=v.paddingTop;a.adjustLocations(d[l],v.rect.x,v.rect.y,_,D)})},E.prototype.getToBeTiled=function(a){var d=a.id;if(this.toBeTiled[d]!=null)return this.toBeTiled[d];var l=a.getChild();if(l==null)return this.toBeTiled[d]=!1,!1;for(var v=l.getNodes(),_=0;_<v.length;_++){var D=v[_];if(this.getNodeDegree(D)>0)return this.toBeTiled[d]=!1,!1;if(D.getChild()==null){this.toBeTiled[D.id]=!1;continue}if(!this.getToBeTiled(D))return this.toBeTiled[d]=!1,!1}return this.toBeTiled[d]=!0,!0},E.prototype.getNodeDegree=function(a){a.id;for(var d=a.getEdges(),l=0,v=0;v<d.length;v++){var _=d[v];_.getSource().id!==_.getTarget().id&&(l+=1)}return l},E.prototype.getNodeDegreeWithChildren=function(a){var d=this.getNodeDegree(a);if(a.getChild()==null)return d;for(var l=a.getChild().getNodes(),v=0;v<l.length;v++){var _=l[v];d+=this.getNodeDegreeWithChildren(_)}return d},E.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},E.prototype.fillCompexOrderByDFS=function(a){for(var d=0;d<a.length;d++){var l=a[d];l.getChild()!=null&&this.fillCompexOrderByDFS(l.getChild().getNodes()),this.getToBeTiled(l)&&this.compoundOrder.push(l)}},E.prototype.adjustLocations=function(a,d,l,v,_){d+=v,l+=_;for(var D=d,I=0;I<a.rows.length;I++){var w=a.rows[I];d=D;for(var R=0,G=0;G<w.length;G++){var x=w[G];x.rect.x=d,x.rect.y=l,d+=x.rect.width+a.horizontalPadding,x.rect.height>R&&(R=x.rect.height)}l+=R+a.verticalPadding}},E.prototype.tileCompoundMembers=function(a,d){var l=this;this.tiledMemberPack=[],Object.keys(a).forEach(function(v){var _=d[v];l.tiledMemberPack[v]=l.tileNodes(a[v],_.paddingLeft+_.paddingRight),_.rect.width=l.tiledMemberPack[v].width,_.rect.height=l.tiledMemberPack[v].height})},E.prototype.tileNodes=function(a,d){var l={rows:[],rowWidth:[],rowHeight:[],width:0,height:d,verticalPadding:o.TILING_PADDING_VERTICAL,horizontalPadding:o.TILING_PADDING_HORIZONTAL};a.sort(function(D,I){return D.rect.width*D.rect.height>I.rect.width*I.rect.height?-1:D.rect.width*D.rect.height<I.rect.width*I.rect.height?1:0});for(var v=0;v<a.length;v++){var _=a[v];l.rows.length==0?this.insertNodeToRow(l,_,0,d):this.canAddHorizontal(l,_.rect.width,_.rect.height)?this.insertNodeToRow(l,_,this.getShortestRowIndex(l),d):this.insertNodeToRow(l,_,l.rows.length,d),this.shiftToLastRow(l)}return l},E.prototype.insertNodeToRow=function(a,d,l,v){var _=v;l==a.rows.length&&(a.rows.push([]),a.rowWidth.push(_),a.rowHeight.push(0));var D=a.rowWidth[l]+d.rect.width;a.rows[l].length>0&&(D+=a.horizontalPadding),a.rowWidth[l]=D,a.width<D&&(a.width=D);var I=d.rect.height;l>0&&(I+=a.verticalPadding);var w=0;I>a.rowHeight[l]&&(w=a.rowHeight[l],a.rowHeight[l]=I,w=a.rowHeight[l]-w),a.height+=w,a.rows[l].push(d)},E.prototype.getShortestRowIndex=function(a){for(var d=-1,l=Number.MAX_VALUE,v=0;v<a.rows.length;v++)a.rowWidth[v]<l&&(d=v,l=a.rowWidth[v]);return d},E.prototype.getLongestRowIndex=function(a){for(var d=-1,l=Number.MIN_VALUE,v=0;v<a.rows.length;v++)a.rowWidth[v]>l&&(d=v,l=a.rowWidth[v]);return d},E.prototype.canAddHorizontal=function(a,d,l){var v=this.getShortestRowIndex(a);if(v<0)return!0;var _=a.rowWidth[v];if(_+a.horizontalPadding+d<=a.width)return!0;var D=0;a.rowHeight[v]<l&&v>0&&(D=l+a.verticalPadding-a.rowHeight[v]);var I=a.width-_>=d+a.horizontalPadding?(a.height+D)/(_+d+a.horizontalPadding):(a.height+D)/a.width;D=l+a.verticalPadding;var w=a.width<d?(a.height+D)/d:(a.height+D)/a.width;return w<1&&(w=1/w),I<1&&(I=1/I),I<w},E.prototype.shiftToLastRow=function(a){var d=this.getLongestRowIndex(a),l=a.rowWidth.length-1,v=a.rows[d],_=v[v.length-1],D=_.width+a.horizontalPadding;if(a.width-a.rowWidth[l]>D&&d!=l){v.splice(-1,1),a.rows[l].push(_),a.rowWidth[d]=a.rowWidth[d]-D,a.rowWidth[l]=a.rowWidth[l]+D,a.width=a.rowWidth[instance.getLongestRowIndex(a)];for(var I=Number.MIN_VALUE,w=0;w<v.length;w++)v[w].height>I&&(I=v[w].height);d>0&&(I+=a.verticalPadding);var R=a.rowHeight[d]+a.rowHeight[l];a.rowHeight[d]=I,a.rowHeight[l]<_.height+a.verticalPadding&&(a.rowHeight[l]=_.height+a.verticalPadding);var G=a.rowHeight[d]+a.rowHeight[l];a.height+=G-R,this.shiftToLastRow(a)}},E.prototype.tilingPreLayout=function(){o.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},E.prototype.tilingPostLayout=function(){o.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},E.prototype.reduceTrees=function(){for(var a=[],d=!0,l;d;){var v=this.graphManager.getAllNodes(),_=[];d=!1;for(var D=0;D<v.length;D++)l=v[D],l.getEdges().length==1&&!l.getEdges()[0].isInterGraph&&l.getChild()==null&&(_.push([l,l.getEdges()[0],l.getOwner()]),d=!0);if(d==1){for(var I=[],w=0;w<_.length;w++)_[w][0].getEdges().length==1&&(I.push(_[w]),_[w][0].getOwner().remove(_[w][0]));a.push(I),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=a},E.prototype.growTree=function(a){for(var d=a[a.length-1],l,v=0;v<d.length;v++)l=d[v],this.findPlaceforPrunedNode(l),l[2].add(l[0]),l[2].add(l[1],l[1].source,l[1].target);a.splice(a.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},E.prototype.findPlaceforPrunedNode=function(a){var d,l,v=a[0];l=v==a[1].source?a[1].target:a[1].source;var _=l.startX,D=l.finishX,I=l.startY,w=l.finishY,R=[0,0,0,0];if(I>0)for(var G=_;G<=D;G++)R[0]+=this.grid[G][I-1].length+this.grid[G][I].length-1;if(D<this.grid.length-1)for(var G=I;G<=w;G++)R[1]+=this.grid[D+1][G].length+this.grid[D][G].length-1;if(w<this.grid[0].length-1)for(var G=_;G<=D;G++)R[2]+=this.grid[G][w+1].length+this.grid[G][w].length-1;if(_>0)for(var G=I;G<=w;G++)R[3]+=this.grid[_-1][G].length+this.grid[_][G].length-1;for(var x=y.MAX_VALUE,M,U,b=0;b<R.length;b++)R[b]<x?(x=R[b],M=1,U=b):R[b]==x&&M++;if(M==3&&x==0)R[0]==0&&R[1]==0&&R[2]==0?d=1:R[0]==0&&R[1]==0&&R[3]==0?d=0:R[0]==0&&R[2]==0&&R[3]==0?d=3:R[1]==0&&R[2]==0&&R[3]==0&&(d=2);else if(M==2&&x==0){var F=Math.floor(Math.random()*2);d=R[0]==0&&R[1]==0?F==0?0:1:R[0]==0&&R[2]==0?F==0?0:2:R[0]==0&&R[3]==0?F==0?0:3:R[1]==0&&R[2]==0?F==0?1:2:R[1]==0&&R[3]==0?F==0?1:3:F==0?2:3}else if(M==4&&x==0){var F=Math.floor(Math.random()*4);d=F}else d=U;d==0?v.setCenter(l.getCenterX(),l.getCenterY()-l.getHeight()/2-N.DEFAULT_EDGE_LENGTH-v.getHeight()/2):d==1?v.setCenter(l.getCenterX()+l.getWidth()/2+N.DEFAULT_EDGE_LENGTH+v.getWidth()/2,l.getCenterY()):d==2?v.setCenter(l.getCenterX(),l.getCenterY()+l.getHeight()/2+N.DEFAULT_EDGE_LENGTH+v.getHeight()/2):v.setCenter(l.getCenterX()-l.getWidth()/2-N.DEFAULT_EDGE_LENGTH-v.getWidth()/2,l.getCenterY())},L.exports=E}),(function(L,A,n){var i={};i.layoutBase=n(0),i.CoSEConstants=n(1),i.CoSEEdge=n(2),i.CoSEGraph=n(3),i.CoSEGraphManager=n(4),i.CoSELayout=n(6),i.CoSENode=n(5),L.exports=i})])})})),at=nt(V(((C,P)=>{(function(m,L){typeof C=="object"&&typeof P=="object"?P.exports=L(Q()):typeof define=="function"&&define.amd?define(["cose-base"],L):typeof C=="object"?C.cytoscapeCoseBilkent=L(Q()):m.cytoscapeCoseBilkent=L(m.coseBase)})(C,function(m){return(function(L){var A={};function n(i){if(A[i])return A[i].exports;var t=A[i]={i,l:!1,exports:{}};return L[i].call(t.exports,t,t.exports,n),t.l=!0,t.exports}return n.m=L,n.c=A,n.i=function(i){return i},n.d=function(i,t,e){n.o(i,t)||Object.defineProperty(i,t,{configurable:!1,enumerable:!0,get:e})},n.n=function(i){var t=i&&i.__esModule?function(){return i.default}:function(){return i};return n.d(t,"a",t),t},n.o=function(i,t){return Object.prototype.hasOwnProperty.call(i,t)},n.p="",n(n.s=1)})([(function(L,A){L.exports=m}),(function(L,A,n){var i=n(0).layoutBase.LayoutConstants,t=n(0).layoutBase.FDLayoutConstants,e=n(0).CoSEConstants,r=n(0).CoSELayout,h=n(0).CoSENode,o=n(0).layoutBase.PointD,N=n(0).layoutBase.DimensionD,s={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function g(c,f){var T={};for(var E in c)T[E]=c[E];for(var E in f)T[E]=f[E];return T}function u(c){this.options=g(s,c),p(this.options)}var p=function(c){c.nodeRepulsion!=null&&(e.DEFAULT_REPULSION_STRENGTH=t.DEFAULT_REPULSION_STRENGTH=c.nodeRepulsion),c.idealEdgeLength!=null&&(e.DEFAULT_EDGE_LENGTH=t.DEFAULT_EDGE_LENGTH=c.idealEdgeLength),c.edgeElasticity!=null&&(e.DEFAULT_SPRING_STRENGTH=t.DEFAULT_SPRING_STRENGTH=c.edgeElasticity),c.nestingFactor!=null&&(e.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=t.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=c.nestingFactor),c.gravity!=null&&(e.DEFAULT_GRAVITY_STRENGTH=t.DEFAULT_GRAVITY_STRENGTH=c.gravity),c.numIter!=null&&(e.MAX_ITERATIONS=t.MAX_ITERATIONS=c.numIter),c.gravityRange!=null&&(e.DEFAULT_GRAVITY_RANGE_FACTOR=t.DEFAULT_GRAVITY_RANGE_FACTOR=c.gravityRange),c.gravityCompound!=null&&(e.DEFAULT_COMPOUND_GRAVITY_STRENGTH=t.DEFAULT_COMPOUND_GRAVITY_STRENGTH=c.gravityCompound),c.gravityRangeCompound!=null&&(e.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=t.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=c.gravityRangeCompound),c.initialEnergyOnIncremental!=null&&(e.DEFAULT_COOLING_FACTOR_INCREMENTAL=t.DEFAULT_COOLING_FACTOR_INCREMENTAL=c.initialEnergyOnIncremental),c.quality=="draft"?i.QUALITY=0:c.quality=="proof"?i.QUALITY=2:i.QUALITY=1,e.NODE_DIMENSIONS_INCLUDE_LABELS=t.NODE_DIMENSIONS_INCLUDE_LABELS=i.NODE_DIMENSIONS_INCLUDE_LABELS=c.nodeDimensionsIncludeLabels,e.DEFAULT_INCREMENTAL=t.DEFAULT_INCREMENTAL=i.DEFAULT_INCREMENTAL=!c.randomize,e.ANIMATE=t.ANIMATE=i.ANIMATE=c.animate,e.TILE=c.tile,e.TILING_PADDING_VERTICAL=typeof c.tilingPaddingVertical=="function"?c.tilingPaddingVertical.call():c.tilingPaddingVertical,e.TILING_PADDING_HORIZONTAL=typeof c.tilingPaddingHorizontal=="function"?c.tilingPaddingHorizontal.call():c.tilingPaddingHorizontal};u.prototype.run=function(){var c,f,T=this.options;this.idToLNode={};var E=this.layout=new r,O=this;O.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var a=E.newGraphManager();this.gm=a;var d=this.options.eles.nodes(),l=this.options.eles.edges();this.root=a.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(d),E);for(var v=0;v<l.length;v++){var _=l[v],D=this.idToLNode[_.data("source")],I=this.idToLNode[_.data("target")];if(D!==I&&D.getEdgesBetween(I).length==0){var w=a.add(E.newEdge(),D,I);w.id=_.id()}}var R=function(x,M){typeof x=="number"&&(x=M);var U=x.data("id"),b=O.idToLNode[U];return{x:b.getRect().getCenterX(),y:b.getRect().getCenterY()}},G=function x(){for(var M=function(){T.fit&&T.cy.fit(T.eles,T.padding),c||(c=!0,O.cy.one("layoutready",T.ready),O.cy.trigger({type:"layoutready",layout:O}))},U=O.options.refresh,b,F=0;F<U&&!b;F++)b=O.stopped||O.layout.tick();if(b){E.checkLayoutSuccess()&&!E.isSubLayout&&E.doPostLayout(),E.tilingPostLayout&&E.tilingPostLayout(),E.isLayoutFinished=!0,O.options.eles.nodes().positions(R),M(),O.cy.one("layoutstop",O.options.stop),O.cy.trigger({type:"layoutstop",layout:O}),f&&cancelAnimationFrame(f),c=!1;return}var S=O.layout.getPositionsData();T.eles.nodes().positions(function(Y,X){if(typeof Y=="number"&&(Y=X),!Y.isParent()){for(var W=Y.id(),B=S[W],H=Y;B==null&&(B=S[H.data("parent")]||S["DummyCompound_"+H.data("parent")],S[W]=B,H=H.parent()[0],H!=null););return B==null?{x:Y.position("x"),y:Y.position("y")}:{x:B.x,y:B.y}}}),M(),f=requestAnimationFrame(x)};return E.addListener("layoutstarted",function(){O.options.animate==="during"&&(f=requestAnimationFrame(G))}),E.runLayout(),this.options.animate!=="during"&&(O.options.eles.nodes().not(":parent").layoutPositions(O,O.options,R),c=!1),this},u.prototype.getTopMostNodes=function(c){for(var f={},T=0;T<c.length;T++)f[c[T].id()]=!0;return c.filter(function(E,O){typeof E=="number"&&(E=O);for(var a=E.parent()[0];a!=null;){if(f[a.id()])return!1;a=a.parent()[0]}return!0})},u.prototype.processChildrenList=function(c,f,T){for(var E=f.length,O=0;O<E;O++){var a=f[O],d=a.children(),l,v=a.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if(l=a.outerWidth()!=null&&a.outerHeight()!=null?c.add(new h(T.graphManager,new o(a.position("x")-v.w/2,a.position("y")-v.h/2),new N(parseFloat(v.w),parseFloat(v.h)))):c.add(new h(this.graphManager)),l.id=a.data("id"),l.paddingLeft=parseInt(a.css("padding")),l.paddingTop=parseInt(a.css("padding")),l.paddingRight=parseInt(a.css("padding")),l.paddingBottom=parseInt(a.css("padding")),this.options.nodeDimensionsIncludeLabels&&a.isParent()){var _=a.boundingBox({includeLabels:!0,includeNodes:!1}).w,D=a.boundingBox({includeLabels:!0,includeNodes:!1}).h,I=a.css("text-halign");l.labelWidth=_,l.labelHeight=D,l.labelPos=I}if(this.idToLNode[a.data("id")]=l,isNaN(l.rect.x)&&(l.rect.x=0),isNaN(l.rect.y)&&(l.rect.y=0),d!=null&&d.length>0){var w=T.getGraphManager().add(T.newGraph(),l);this.processChildrenList(w,d,T)}}},u.prototype.stop=function(){return this.stopped=!0,this};var y=function(c){c("layout","cose-bilkent",u)};typeof cytoscape<"u"&&y(cytoscape),L.exports=y})])})}))(),1);z.use(at.default);function $(C,P){C.forEach(m=>{let L={id:m.id,labelText:m.label,height:m.height,width:m.width,padding:m.padding??0};Object.keys(m).forEach(A=>{["id","label","height","width","padding","x","y"].includes(A)||(L[A]=m[A])}),P.add({group:"nodes",data:L,position:{x:m.x??0,y:m.y??0}})})}k($,"addNodes");function K(C,P){C.forEach(m=>{let L={id:m.id,source:m.start,target:m.end};Object.keys(m).forEach(A=>{["id","start","end"].includes(A)||(L[A]=m[A])}),P.add({group:"edges",data:L})})}k(K,"addEdges");function J(C){return new Promise(P=>{let m=st("body").append("div").attr("id","cy").attr("style","display:none"),L=z({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});m.remove(),$(C.nodes,L),K(C.edges,L),L.nodes().forEach(function(A){A.layoutDimensions=()=>{let n=A.data();return{w:n.width,h:n.height}}}),L.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),L.ready(A=>{j.info("Cytoscape ready",A),P(L)})})}k(J,"createCytoscapeInstance");function tt(C){return C.nodes().map(P=>{let m=P.data(),L=P.position(),A={id:m.id,x:L.x,y:L.y};return Object.keys(m).forEach(n=>{n!=="id"&&(A[n]=m[n])}),A})}k(tt,"extractPositionedNodes");function et(C){return C.edges().map(P=>{let m=P.data(),L=P._private.rscratch,A={id:m.id,source:m.source,target:m.target,startX:L.startX,startY:L.startY,midX:L.midX,midY:L.midY,endX:L.endX,endY:L.endY};return Object.keys(m).forEach(n=>{["id","source","target"].includes(n)||(A[n]=m[n])}),A})}k(et,"extractPositionedEdges");async function it(C,P){j.debug("Starting cose-bilkent layout algorithm");try{rt(C);let m=await J(C),L=tt(m),A=et(m);return j.debug(`Layout completed: ${L.length} nodes, ${A.length} edges`),{nodes:L,edges:A}}catch(m){throw j.error("Error in cose-bilkent layout algorithm:",m),m}}k(it,"executeCoseBilkentLayout");function rt(C){if(!C)throw Error("Layout data is required");if(!C.config)throw Error("Configuration is required in layout data");if(!C.rootNode)throw Error("Root node is required");if(!C.nodes||!Array.isArray(C.nodes))throw Error("No nodes found in layout data");if(!Array.isArray(C.edges))throw Error("Edges array is required in layout data");return!0}k(rt,"validateLayoutData");var ht=k(async(C,P,{insertCluster:m,insertEdge:L,insertEdgeLabel:A,insertMarkers:n,insertNode:i,log:t,positionEdgeLabel:e},{algorithm:r})=>{let h={},o={},N=P.select("g");n(N,C.markers,C.type,C.diagramId);let s=N.insert("g").attr("class","subgraphs"),g=N.insert("g").attr("class","edgePaths"),u=N.insert("g").attr("class","edgeLabels"),p=N.insert("g").attr("class","nodes");t.debug("Inserting nodes into DOM for dimension calculation"),await Promise.all(C.nodes.map(async c=>{if(c.isGroup){let f={...c};o[c.id]=f,h[c.id]=f,await m(s,c)}else{let f={...c};h[c.id]=f;let T=await i(p,c,{config:C.config,dir:C.direction||"TB"}),E=T.node().getBBox();f.width=E.width,f.height=E.height,f.domId=T,t.debug(`Node ${c.id} dimensions: ${E.width}x${E.height}`)}})),t.debug("Running cose-bilkent layout algorithm");let y=await it({...C,nodes:C.nodes.map(c=>{let f=h[c.id];return{...c,width:f.width,height:f.height}})},C.config);t.debug("Positioning nodes based on layout results"),y.nodes.forEach(c=>{let f=h[c.id];f!=null&&f.domId&&(f.domId.attr("transform",`translate(${c.x}, ${c.y})`),f.x=c.x,f.y=c.y,t.debug(`Positioned node ${f.id} at center (${c.x}, ${c.y})`))}),y.edges.forEach(c=>{let f=C.edges.find(T=>T.id===c.id);f&&(f.points=[{x:c.startX,y:c.startY},{x:c.midX,y:c.midY},{x:c.endX,y:c.endY}])}),t.debug("Inserting and positioning edges"),await Promise.all(C.edges.map(async c=>{await A(u,c);let f=h[c.start??""],T=h[c.end??""];if(f&&T){let E=y.edges.find(O=>O.id===c.id);if(E){t.debug("APA01 positionedEdge",E);let O={...c};e(O,L(g,O,o,C.type,f,T,C.diagramId))}else{let O={...c,points:[{x:f.x||0,y:f.y||0},{x:T.x||0,y:T.y||0}]};e(O,L(g,O,o,C.type,f,T,C.diagramId))}}})),t.debug("Cose-bilkent rendering completed")},"render");export{ht as render};
