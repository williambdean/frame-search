import{s as F}from"./chunk-DZLz74EQ.js";import{c as L,d as r,l as w,n as x,s as z}from"./jotai-DDOP7CKM.js";import{E as n,F as _,L as S,P as f,V as T,W as V,Y as W,b as o,j as l,w as c,z as t}from"./zod-U2NFpcFA.js";import{n as Y}from"./jsx-runtime-DvsdsEjx.js";import{t as A}from"./merge-BgA7kxZb.js";import{l as B,n as G,u as m}from"./hotkeys-Lbk6RHir.js";import{t as H}from"./invariant-DPGusy7Z.js";const j=["pip","uv","rye","poetry","pixi"];var M=["normal","compact","medium","full","columns"],$=["auto","native","polars","lazy-polars","pandas"];const I="openai/gpt-4o";var q=["html","markdown","ipynb"],J=["manual","ask","agent"],p=_({api_key:t().optional(),base_url:t().optional()}).loose(),K=_({chat_model:t().nullish(),edit_model:t().nullish(),autocomplete_model:t().nullish(),displayed_models:c(t()).default([]),custom_models:c(t()).default([])});const h=l({completion:_({activate_on_typing:n().prefault(!0),copilot:T([n(),o(["github","codeium","custom"])]).prefault(!1).transform(a=>a===!0?"github":a),codeium_api_key:t().nullish()}).prefault({}),save:l({autosave:o(["off","after_delay"]).prefault("after_delay"),autosave_delay:f().nonnegative().transform(a=>Math.max(a,1e3)).prefault(1e3),format_on_save:n().prefault(!1)}).prefault({}),formatting:l({line_length:f().nonnegative().prefault(79).transform(a=>Math.min(a,1e3))}).prefault({}),keymap:l({preset:o(["default","vim"]).prefault("default"),overrides:S(t(),t()).prefault({}),destructive_delete:n().prefault(!0)}).prefault({}),runtime:l({auto_instantiate:n().prefault(!0),on_cell_change:o(["lazy","autorun"]).prefault("autorun"),auto_reload:o(["off","lazy","autorun"]).prefault("off"),watcher_on_save:o(["lazy","autorun"]).prefault("lazy"),default_sql_output:o($).prefault("auto"),default_auto_download:c(o(q)).prefault([])}).prefault({}),display:l({theme:o(["light","dark","system"]).prefault("light"),code_editor_font_size:f().nonnegative().prefault(14),cell_output:o(["above","below"]).prefault("above"),dataframes:o(["rich","plain"]).prefault("rich"),default_table_page_size:f().prefault(10),default_table_max_columns:f().prefault(50),default_width:o(M).prefault("medium").transform(a=>a==="normal"?"compact":a),locale:t().nullable().optional(),reference_highlighting:n().prefault(!1)}).prefault({}),package_management:l({manager:o(j).prefault("pip")}).prefault({}),ai:l({rules:t().prefault(""),mode:o(J).prefault("manual"),inline_tooltip:n().prefault(!1),open_ai:p.optional(),anthropic:p.optional(),google:p.optional(),ollama:p.optional(),openrouter:p.optional(),open_ai_compatible:p.optional(),azure:p.optional(),bedrock:l({region_name:t().optional(),profile_name:t().optional(),aws_access_key_id:t().optional(),aws_secret_access_key:t().optional()}).optional(),models:K.prefault({displayed_models:[],custom_models:[]})}).prefault({}),experimental:l({markdown:n().optional(),rtc:n().optional()}).prefault(()=>({})),server:l({}).prefault(()=>({})),diagnostics:l({enabled:n().optional(),sql_linter:n().optional()}).prefault(()=>({})),sharing:l({html:n().optional(),wasm:n().optional()}).optional(),mcp:l({presets:c(o(["marimo","context7"])).optional()}).optional().prefault({})}).partial().prefault(()=>({completion:{},save:{},formatting:{},keymap:{},runtime:{},display:{},diagnostics:{},experimental:{},server:{},ai:{},package_management:{},mcp:{}})),E=t(),N=o($).prefault("auto"),y=_({width:o(M).prefault("medium").transform(a=>a==="normal"?"compact":a),app_title:E.nullish(),css_file:t().nullish(),html_head_file:t().nullish(),auto_download:c(o(q)).prefault([]),sql_output:N}).prefault(()=>({width:"medium",auto_download:[],sql_output:"auto"}));function O(a){try{return y.parse(a)}catch(e){return m.error(`Marimo got an unexpected value in the configuration file: ${e}`),y.parse({})}}function Q(a){try{let e=h.parse(a);for(let[u,s]of Object.entries(e.experimental??{}))s===!0&&m.log(`\u{1F9EA} Experimental feature "${u}" is enabled.`);return e}catch(e){return e instanceof V?m.error(`Marimo got an unexpected value in the configuration file: ${W(e)}`):m.error(`Marimo got an unexpected value in the configuration file: ${e}`),P()}}function R(a){try{let e=a;return H(typeof e=="object","internal-error: marimo-config-overrides is not an object"),Object.keys(e).length>0&&m.log("\u{1F527} Project configuration overrides:",e),e}catch(e){return m.error(`Marimo got an unexpected configuration overrides: ${e}`),{}}}function P(){return h.parse({completion:{},save:{},formatting:{},keymap:{},runtime:{},display:{},diagnostics:{},experimental:{},server:{},ai:{},package_management:{},mcp:{}})}var U=F(Y(),1);const g=r(P()),C=r({}),i=r(a=>{let e=a(C);return A({},a(g),e)}),X=r(a=>a(i).runtime.auto_instantiate),Z=r(a=>a(i).keymap.overrides??{}),aa=r(B()),ea=r(a=>new G(a(Z),{platform:a(aa)})),ta=r(a=>a(i).save),oa=r(a=>a(i).ai),ra=r(a=>a(i).completion),la=r(a=>a(i).keymap.preset);function na(){return z(g)}function ia(){let a=(0,U.c)(3),e=L(i),u=w(g),s;return a[0]!==e||a[1]!==u?(s=[e,u],a[0]=e,a[1]=u,a[2]=s):s=a[2],s}function sa(){return x.get(i)}const ua=r(a=>D(a(i)));r(a=>a(i).display.code_editor_font_size);const pa=r(a=>a(i).display.locale);function D(a){var e,u,s,v,b,k;return!!((u=(e=a.ai)==null?void 0:e.models)!=null&&u.chat_model)||!!((v=(s=a.ai)==null?void 0:s.models)!=null&&v.edit_model)||!!((k=(b=a.ai)==null?void 0:b.models)!=null&&k.autocomplete_model)}const d=r(O({}));function ma(){return z(d)}function fa(){return w(d)}function ca(){return x.get(d)}const da=r(a=>a(d).width);function _a(){return!1}export{E as C,O as D,h as E,R as O,y as S,j as T,ma as _,da as a,na as b,ra as c,sa as d,ea as f,i as g,pa as h,d as i,Q as k,C as l,la as m,oa as n,X as o,D as p,ua as r,ta as s,_a as t,ca as u,ia as v,I as w,g as x,fa as y};
