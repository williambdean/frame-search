const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./data-grid-overlay-editor--bKhiI3E.js","./emotion-is-prop-valid.esm-BgfwcIY_.js","./click-outside-container-B_HE7jMo.js","./react-BcIddLXZ.js","./chunk-DZLz74EQ.js","./dist-DMYo1bA3.js","./react-dom-D6bRRS5R.js","./number-overlay-editor-DINk-4Qy.js"])))=>i.map(i=>d[i]);
var C0=Object.defineProperty;var S0=(Vr,Cr,Yr)=>Cr in Vr?C0(Vr,Cr,{enumerable:!0,configurable:!0,writable:!0,value:Yr}):Vr[Cr]=Yr;var tt=(Vr,Cr,Yr)=>S0(Vr,typeof Cr!="symbol"?Cr+"":Cr,Yr);import{s as $t,t as q}from"./chunk-DZLz74EQ.js";import"./jotai-DDOP7CKM.js";import{t as An}from"./react-BcIddLXZ.js";import"./react-dom-D6bRRS5R.js";import"./zod-U2NFpcFA.js";import{n as k0,t as M0}from"./jsx-runtime-DvsdsEjx.js";import"./_Uint8Array-D5Z9rM2X.js";import"./isSymbol-xTSywenE.js";import"./_arrayMap-DQI2GUNb.js";import"./toString-CBnct2wx.js";import"./toNumber-CTOPJrpu.js";import"./isArrayLikeObject-DKyJYtr8.js";import"./_getTag-CVRrQL_Q.js";import"./_baseIsEqual-BF8660ot.js";import"./merge-BgA7kxZb.js";import"./_baseSlice-B27Cqkm6.js";import"./upperFirst-DOlTOwhh.js";import"./_hasUnicode-CPHpt5EV.js";import{t as R0}from"./capitalize-CkrfIDeS.js";import"./now-B6JN1xKT.js";import"./debounce-70y9MzDK.js";import{u as Bi}from"./hotkeys-Lbk6RHir.js";import"./invariant-DPGusy7Z.js";import"./utils-DnJCRgaX.js";import"./constants-DIZnpo2K.js";import{t as E0}from"./ErrorBoundary-7JQlouA1.js";import"./useEventListener-C5BS4xuN.js";import"./cn-C5VTNYKf.js";import{r as Wi,t as $i}from"./button-nRVaalxL.js";import"./once-Co7xi2Ip.js";import{t as $a}from"./preload-helper-BpItL31i.js";import{t as I0}from"./use-toast-BiL_AQz9.js";import{t as T0}from"./marked.esm-DCf1d_lA.js";import{r as P0}from"./useTheme-BMknLtnH.js";import"./createLucideIcon-DA8ZBm4D.js";import"./check-BUgsJwxM.js";import{c as O0,i as D0,n as H0,s as z0,t as A0}from"./select-DJ0A_oCR.js";import"./chevron-right-WxQzIptp.js";import{a as Xa,c as Ka,d as Va,f as Ya,r as L0,s as Ga,t as F0,u as Ua}from"./dropdown-menu-1SGi7wHR.js";import{t as j0}from"./copy-CWjpIcfl.js";import{n as _0,t as Go}from"./types-DZTeU1k8.js";import{t as N0}from"./plus-CmzxQYgQ.js";import{r as qa}from"./input-BPw9p_8N.js";import{t as B0}from"./trash-6fDSPVMB.js";import{r as Ja,t as W0}from"./useNonce-DECX9FAH.js";import"./Combination-DR4iFoRS.js";import"./dist-Cei_8ikW.js";import{t as $0}from"./useLifecycle-CuZnZLRp.js";import"./menu-items-DOc2hwO2.js";import"./tslib.es6-sakIzgHM.js";import"./context-BMtIGcq8.js";import"./useNumberFormatter-DynX1ecE.js";import"./numbers-Hxwz5HuE.js";import{n as X0}from"./useEvent-d8iQXgui.js";import"./useDebounce-BDmbJDbT.js";import{t as K0}from"./copy-DAqXDCGN.js";import"./emotion-is-prop-valid.esm-BgfwcIY_.js";import{t as V0}from"./prop-types-BdSU55sL.js";import{t as Xi}from"./label-6DIjJ2sP.js";import{A as Qa,B as ho,C as Jt,D as Y0,E as G0,F as Ki,G as Za,H as U0,I as es,J as Ln,K as pn,L as fo,M as q0,N as ts,O as Vi,P as rs,R as J0,S as ns,T as Uo,U as os,V as is,W as ls,_ as go,a as Or,b as po,c as mn,d as nt,f as pe,g as Yi,h as Xr,i as Q0,j as as,k as ss,m as cs,n as Z0,o as fr,p as Kr,q as ef,r as us,s as ds,t as tf,v as Fn,w as qo,x as Jo,y as rf,z as nf}from"./click-outside-container-B_HE7jMo.js";import{t as Qt}from"./dist-DMYo1bA3.js";let Gi,hs,of=(async()=>{const Vr=Qt("div")({name:"ImageOverlayEditorStyle",class:"gdg-i2iowwq",propsAsIs:!1});var Cr=q((e=>{(function(t,r){if(typeof define=="function"&&define.amd)define(["exports","react","prop-types"],r);else if(e!==void 0)r(e,An(),V0());else{var n={exports:{}};r(n.exports,t.react,t.propTypes),t.reactSwipe=n.exports}})(e,function(t,r,n){Object.defineProperty(t,"__esModule",{value:!0}),t.setHasSupportToCaptureOption=f;var o=a(r),i=a(n);function a(y){return y&&y.__esModule?y:{default:y}}var l=Object.assign||function(y){for(var S=1;S<arguments.length;S++){var T=arguments[S];for(var P in T)Object.prototype.hasOwnProperty.call(T,P)&&(y[P]=T[P])}return y};function s(y,S){var T={};for(var P in y)S.indexOf(P)>=0||Object.prototype.hasOwnProperty.call(y,P)&&(T[P]=y[P]);return T}function c(y,S){if(!(y instanceof S))throw TypeError("Cannot call a class as a function")}var u=(function(){function y(S,T){for(var P=0;P<T.length;P++){var E=T[P];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(S,E.key,E)}}return function(S,T,P){return T&&y(S.prototype,T),P&&y(S,P),S}})();function h(y,S){if(!y)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:y}function p(y,S){if(typeof S!="function"&&S!==null)throw TypeError("Super expression must either be null or a function, not "+typeof S);y.prototype=Object.create(S&&S.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(y,S):y.__proto__=S)}var m=!1;function f(y){m=y}try{addEventListener("test",null,Object.defineProperty({},"capture",{get:function(){f(!0)}}))}catch{}function v(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{capture:!0};return m?y:y.capture}function k(y){if("touches"in y){var S=y.touches[0];return{x:S.pageX,y:S.pageY}}return{x:y.screenX,y:y.screenY}}var M=(function(y){p(S,y);function S(){var T;c(this,S);var P=[...arguments],E=h(this,(T=S.__proto__||Object.getPrototypeOf(S)).call.apply(T,[this].concat(P)));return E._handleSwipeStart=E._handleSwipeStart.bind(E),E._handleSwipeMove=E._handleSwipeMove.bind(E),E._handleSwipeEnd=E._handleSwipeEnd.bind(E),E._onMouseDown=E._onMouseDown.bind(E),E._onMouseMove=E._onMouseMove.bind(E),E._onMouseUp=E._onMouseUp.bind(E),E._setSwiperRef=E._setSwiperRef.bind(E),E}return u(S,[{key:"componentDidMount",value:function(){this.swiper&&this.swiper.addEventListener("touchmove",this._handleSwipeMove,v({capture:!0,passive:!1}))}},{key:"componentWillUnmount",value:function(){this.swiper&&this.swiper.removeEventListener("touchmove",this._handleSwipeMove,v({capture:!0,passive:!1}))}},{key:"_onMouseDown",value:function(T){this.props.allowMouseEvents&&(this.mouseDown=!0,document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("mousemove",this._onMouseMove),this._handleSwipeStart(T))}},{key:"_onMouseMove",value:function(T){this.mouseDown&&this._handleSwipeMove(T)}},{key:"_onMouseUp",value:function(T){this.mouseDown=!1,document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("mousemove",this._onMouseMove),this._handleSwipeEnd(T)}},{key:"_handleSwipeStart",value:function(T){var P=k(T);this.moveStart={x:P.x,y:P.y},this.props.onSwipeStart(T)}},{key:"_handleSwipeMove",value:function(T){if(this.moveStart){var P=k(T),E=P.x,z=P.y,F=E-this.moveStart.x,C=z-this.moveStart.y;this.moving=!0,this.props.onSwipeMove({x:F,y:C},T)&&T.cancelable&&T.preventDefault(),this.movePosition={deltaX:F,deltaY:C}}}},{key:"_handleSwipeEnd",value:function(T){this.props.onSwipeEnd(T);var P=this.props.tolerance;this.moving&&this.movePosition&&(this.movePosition.deltaX<-P?this.props.onSwipeLeft(1,T):this.movePosition.deltaX>P&&this.props.onSwipeRight(1,T),this.movePosition.deltaY<-P?this.props.onSwipeUp(1,T):this.movePosition.deltaY>P&&this.props.onSwipeDown(1,T)),this.moveStart=null,this.moving=!1,this.movePosition=null}},{key:"_setSwiperRef",value:function(T){this.swiper=T,this.props.innerRef(T)}},{key:"render",value:function(){var T=this.props;T.tagName;var P=T.className,E=T.style,z=T.children;T.allowMouseEvents,T.onSwipeUp,T.onSwipeDown,T.onSwipeLeft,T.onSwipeRight,T.onSwipeStart,T.onSwipeMove,T.onSwipeEnd,T.innerRef,T.tolerance;var F=s(T,["tagName","className","style","children","allowMouseEvents","onSwipeUp","onSwipeDown","onSwipeLeft","onSwipeRight","onSwipeStart","onSwipeMove","onSwipeEnd","innerRef","tolerance"]);return o.default.createElement(this.props.tagName,l({ref:this._setSwiperRef,onMouseDown:this._onMouseDown,onTouchStart:this._handleSwipeStart,onTouchEnd:this._handleSwipeEnd,className:P,style:E},F),z)}}]),S})(r.Component);M.displayName="ReactSwipe",M.propTypes={tagName:i.default.string,className:i.default.string,style:i.default.object,children:i.default.node,allowMouseEvents:i.default.bool,onSwipeUp:i.default.func,onSwipeDown:i.default.func,onSwipeLeft:i.default.func,onSwipeRight:i.default.func,onSwipeStart:i.default.func,onSwipeMove:i.default.func,onSwipeEnd:i.default.func,innerRef:i.default.func,tolerance:i.default.number.isRequired},M.defaultProps={tagName:"div",allowMouseEvents:!1,onSwipeUp:function(){},onSwipeDown:function(){},onSwipeLeft:function(){},onSwipeRight:function(){},onSwipeStart:function(){},onSwipeMove:function(){},onSwipeEnd:function(){},innerRef:function(){},tolerance:0},t.default=M})})),Yr=q((e=>{(function(t,r){if(typeof define=="function"&&define.amd)define(["exports","./react-swipe"],r);else if(e!==void 0)r(e,Cr());else{var n={exports:{}};r(n.exports,t.reactSwipe),t.index=n.exports}})(e,function(t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=o(r);function o(i){return i&&i.__esModule?i:{default:i}}t.default=n.default})})),fs=q(((e,t)=>{(function(){var r={}.hasOwnProperty;function n(){for(var a="",l=0;l<arguments.length;l++){var s=arguments[l];s&&(a=i(a,o(s)))}return a}function o(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var l="";for(var s in a)r.call(a,s)&&a[s]&&(l=i(l,s));return l}function i(a,l){return l?a?a+" "+l:a+l:a}t!==void 0&&t.exports?(n.default=n,t.exports=n):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return n}):window.classNames=n})()})),Ui=q((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=r(fs());function r(o){return o&&o.__esModule?o:{default:o}}function n(o,i,a){return i in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,o}e.default={ROOT:function(o){return(0,t.default)(n({"carousel-root":!0},o||"",!!o))},CAROUSEL:function(o){return(0,t.default)({carousel:!0,"carousel-slider":o})},WRAPPER:function(o,i){return(0,t.default)({"thumbs-wrapper":!o,"slider-wrapper":o,"axis-horizontal":i==="horizontal","axis-vertical":i!=="horizontal"})},SLIDER:function(o,i){return(0,t.default)({thumbs:!o,slider:o,animated:!i})},ITEM:function(o,i,a){return(0,t.default)({thumb:!o,slide:o,selected:i,previous:a})},ARROW_PREV:function(o){return(0,t.default)({"control-arrow control-prev":!0,"control-disabled":o})},ARROW_NEXT:function(o){return(0,t.default)({"control-arrow control-next":!0,"control-disabled":o})},DOT:function(o){return(0,t.default)({dot:!0,selected:o})}}})),gs=q((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.outerWidth=function(t){var r=t.offsetWidth,n=getComputedStyle(t);return r+=parseInt(n.marginLeft)+parseInt(n.marginRight),r}})),Qo=q((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,r,n){var o=t===0?t:t+r;return"translate3d"+("("+(n==="horizontal"?[o,0,0]:[0,o,0]).join(",")+")")}})),qi=q((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return window}})),Ji=q((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=c(An()),r=l(Ui()),n=gs(),o=l(Qo()),i=l(Yr()),a=l(qi());function l(C){return C&&C.__esModule?C:{default:C}}function s(){if(typeof WeakMap!="function")return null;var C=new WeakMap;return s=function(){return C},C}function c(C){if(C&&C.__esModule)return C;if(C===null||u(C)!=="object"&&typeof C!="function")return{default:C};var R=s();if(R&&R.has(C))return R.get(C);var L={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in C)if(Object.prototype.hasOwnProperty.call(C,w)){var I=x?Object.getOwnPropertyDescriptor(C,w):null;I&&(I.get||I.set)?Object.defineProperty(L,w,I):L[w]=C[w]}return L.default=C,R&&R.set(C,L),L}function u(C){"@babel/helpers - typeof";return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},u(C)}function h(){return h=Object.assign||function(C){for(var R=1;R<arguments.length;R++){var L=arguments[R];for(var x in L)Object.prototype.hasOwnProperty.call(L,x)&&(C[x]=L[x])}return C},h.apply(this,arguments)}function p(C,R){if(!(C instanceof R))throw TypeError("Cannot call a class as a function")}function m(C,R){for(var L=0;L<R.length;L++){var x=R[L];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(C,x.key,x)}}function f(C,R,L){return R&&m(C.prototype,R),L&&m(C,L),C}function v(C,R){if(typeof R!="function"&&R!==null)throw TypeError("Super expression must either be null or a function");C.prototype=Object.create(R&&R.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),R&&k(C,R)}function k(C,R){return k=Object.setPrototypeOf||function(L,x){return L.__proto__=x,L},k(C,R)}function M(C){var R=T();return function(){var L=P(C),x;if(R){var w=P(this).constructor;x=Reflect.construct(L,arguments,w)}else x=L.apply(this,arguments);return y(this,x)}}function y(C,R){return R&&(u(R)==="object"||typeof R=="function")?R:S(C)}function S(C){if(C===void 0)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return C}function T(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function P(C){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},P(C)}function E(C,R,L){return R in C?Object.defineProperty(C,R,{value:L,enumerable:!0,configurable:!0,writable:!0}):C[R]=L,C}var z=function(C){return C.hasOwnProperty("key")},F=(function(C){v(L,C);var R=M(L);function L(x){var w;return p(this,L),w=R.call(this,x),E(S(w),"itemsWrapperRef",void 0),E(S(w),"itemsListRef",void 0),E(S(w),"thumbsRef",void 0),E(S(w),"setItemsWrapperRef",function(I){w.itemsWrapperRef=I}),E(S(w),"setItemsListRef",function(I){w.itemsListRef=I}),E(S(w),"setThumbsRef",function(I,O){w.thumbsRef||(w.thumbsRef=[]),w.thumbsRef[O]=I}),E(S(w),"updateSizes",function(){if(!(!w.props.children||!w.itemsWrapperRef||!w.thumbsRef)){var I=t.Children.count(w.props.children),O=w.itemsWrapperRef.clientWidth,b=w.props.thumbWidth?w.props.thumbWidth:(0,n.outerWidth)(w.thumbsRef[0]),G=Math.floor(O/b),_=G<I,Z=_?I-G:0;w.setState(function(ee,V){return{itemSize:b,visibleItems:G,firstItem:_?w.getFirstItem(V.selectedItem):0,lastPosition:Z,showArrows:_}})}}),E(S(w),"handleClickItem",function(I,O,b){if(!z(b)||b.key==="Enter"){var G=w.props.onSelectItem;typeof G=="function"&&G(I,O)}}),E(S(w),"onSwipeStart",function(){w.setState({swiping:!0})}),E(S(w),"onSwipeEnd",function(){w.setState({swiping:!1})}),E(S(w),"onSwipeMove",function(I){var O=I.x;if(!w.state.itemSize||!w.itemsWrapperRef||!w.state.visibleItems)return!1;var b=0,G=t.Children.count(w.props.children),_=-(w.state.firstItem*100)/w.state.visibleItems,Z=-Math.max(G-w.state.visibleItems,0)*100/w.state.visibleItems;_===b&&O>0&&(O=0),_===Z&&O<0&&(O=0);var ee=_+100/(w.itemsWrapperRef.clientWidth/O);return w.itemsListRef&&["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(V){w.itemsListRef.style[V]=(0,o.default)(ee,"%",w.props.axis)}),!0}),E(S(w),"slideRight",function(I){w.moveTo(w.state.firstItem-(typeof I=="number"?I:1))}),E(S(w),"slideLeft",function(I){w.moveTo(w.state.firstItem+(typeof I=="number"?I:1))}),E(S(w),"moveTo",function(I){I=I<0?0:I,I=I>=w.state.lastPosition?w.state.lastPosition:I,w.setState({firstItem:I})}),w.state={selectedItem:x.selectedItem,swiping:!1,showArrows:!1,firstItem:0,visibleItems:0,lastPosition:0},w}return f(L,[{key:"componentDidMount",value:function(){this.setupThumbs()}},{key:"componentDidUpdate",value:function(x){this.props.selectedItem!==this.state.selectedItem&&this.setState({selectedItem:this.props.selectedItem,firstItem:this.getFirstItem(this.props.selectedItem)}),this.props.children!==x.children&&this.updateSizes()}},{key:"componentWillUnmount",value:function(){this.destroyThumbs()}},{key:"setupThumbs",value:function(){(0,a.default)().addEventListener("resize",this.updateSizes),(0,a.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.updateSizes()}},{key:"destroyThumbs",value:function(){(0,a.default)().removeEventListener("resize",this.updateSizes),(0,a.default)().removeEventListener("DOMContentLoaded",this.updateSizes)}},{key:"getFirstItem",value:function(x){var w=x;return x>=this.state.lastPosition&&(w=this.state.lastPosition),x<this.state.firstItem+this.state.visibleItems&&(w=this.state.firstItem),x<this.state.firstItem&&(w=x),w}},{key:"renderItems",value:function(){var x=this;return this.props.children.map(function(w,I){var O={key:I,ref:function(b){return x.setThumbsRef(b,I)},className:r.default.ITEM(!1,I===x.state.selectedItem),onClick:x.handleClickItem.bind(x,I,x.props.children[I]),onKeyDown:x.handleClickItem.bind(x,I,x.props.children[I]),"aria-label":`${x.props.labels.item} ${I+1}`,style:{width:x.props.thumbWidth}};return t.default.createElement("li",h({},O,{role:"button",tabIndex:0}),w)})}},{key:"render",value:function(){var x=this;if(!this.props.children)return null;var w=t.Children.count(this.props.children)>1,I=this.state.showArrows&&this.state.firstItem>0,O=this.state.showArrows&&this.state.firstItem<this.state.lastPosition,b={},G=-this.state.firstItem*(this.state.itemSize||0),_=(0,o.default)(G,"px",this.props.axis),Z=this.props.transitionTime+"ms";return b={WebkitTransform:_,MozTransform:_,MsTransform:_,OTransform:_,transform:_,msTransform:_,WebkitTransitionDuration:Z,MozTransitionDuration:Z,MsTransitionDuration:Z,OTransitionDuration:Z,transitionDuration:Z,msTransitionDuration:Z},t.default.createElement("div",{className:r.default.CAROUSEL(!1)},t.default.createElement("div",{className:r.default.WRAPPER(!1),ref:this.setItemsWrapperRef},t.default.createElement("button",{type:"button",className:r.default.ARROW_PREV(!I),onClick:function(){return x.slideRight()},"aria-label":this.props.labels.leftArrow}),w?t.default.createElement(i.default,{tagName:"ul",className:r.default.SLIDER(!1,this.state.swiping),onSwipeLeft:this.slideLeft,onSwipeRight:this.slideRight,onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:b,innerRef:this.setItemsListRef,allowMouseEvents:this.props.emulateTouch},this.renderItems()):t.default.createElement("ul",{className:r.default.SLIDER(!1,this.state.swiping),ref:function(ee){return x.setItemsListRef(ee)},style:b},this.renderItems()),t.default.createElement("button",{type:"button",className:r.default.ARROW_NEXT(!O),onClick:function(){return x.slideLeft()},"aria-label":this.props.labels.rightArrow})))}}]),L})(t.Component);e.default=F,E(F,"displayName","Thumbs"),E(F,"defaultProps",{axis:"horizontal",labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},selectedItem:0,thumbWidth:80,transitionTime:350})})),ps=q((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return document}})),Qi=q((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=An(),r=n(Qo());function n(o){return o&&o.__esModule?o:{default:o}}e.noop=function(){},e.defaultStatusFormatter=function(o,i){return`${o} of ${i}`},e.isKeyboardEvent=function(o){return o?o.hasOwnProperty("key"):!1},e.getPosition=function(o,i){if(i.infiniteLoop&&++o,o===0)return 0;var a=t.Children.count(i.children);if(i.centerMode&&i.axis==="horizontal"){var l=-o*i.centerSlidePercentage,s=a-1;return o&&(o!==s||i.infiniteLoop)?l+=(100-i.centerSlidePercentage)/2:o===s&&(l+=100-i.centerSlidePercentage),l}return-o*100},e.setPosition=function(o,i){var a={};return["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(l){a[l]=(0,r.default)(o,"%",i)}),a}})),ms=q((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=An(),r=o(Qo()),n=Qi();function o(s){return s&&s.__esModule?s:{default:s}}function i(s,c){var u=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);c&&(h=h.filter(function(p){return Object.getOwnPropertyDescriptor(s,p).enumerable})),u.push.apply(u,h)}return u}function a(s){for(var c=1;c<arguments.length;c++){var u=arguments[c]==null?{}:arguments[c];c%2?i(Object(u),!0).forEach(function(h){l(s,h,u[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(u)):i(Object(u)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(u,h))})}return s}function l(s,c,u){return c in s?Object.defineProperty(s,c,{value:u,enumerable:!0,configurable:!0,writable:!0}):s[c]=u,s}e.slideAnimationHandler=function(s,c){var u={},h=c.selectedItem,p=h,m=t.Children.count(s.children)-1;if(s.infiniteLoop&&(h<0||h>m))return p<0?s.centerMode&&s.centerSlidePercentage&&s.axis==="horizontal"?u.itemListStyle=(0,n.setPosition)(-(m+2)*s.centerSlidePercentage-(100-s.centerSlidePercentage)/2,s.axis):u.itemListStyle=(0,n.setPosition)(-(m+2)*100,s.axis):p>m&&(u.itemListStyle=(0,n.setPosition)(0,s.axis)),u;var f=(0,n.getPosition)(h,s),v=(0,r.default)(f,"%",s.axis),k=s.transitionTime+"ms";return u.itemListStyle={WebkitTransform:v,msTransform:v,OTransform:v,transform:v},c.swiping||(u.itemListStyle=a(a({},u.itemListStyle),{},{WebkitTransitionDuration:k,MozTransitionDuration:k,OTransitionDuration:k,transitionDuration:k,msTransitionDuration:k})),u},e.slideSwipeAnimationHandler=function(s,c,u,h){var p={},m=c.axis==="horizontal",f=t.Children.count(c.children),v=0,k=(0,n.getPosition)(u.selectedItem,c),M=c.infiniteLoop?(0,n.getPosition)(f-1,c)-100:(0,n.getPosition)(f-1,c),y=m?s.x:s.y,S=y;k===v&&y>0&&(S=0),k===M&&y<0&&(S=0);var T=k+100/(u.itemSize/S),P=Math.abs(y)>c.swipeScrollTolerance;return c.infiniteLoop&&P&&(u.selectedItem===0&&T>-100?T-=f*100:u.selectedItem===f-1&&T<-f*100&&(T+=f*100)),(!c.preventMovementUntilSwipeScrollTolerance||P||u.swipeMovementStarted)&&(u.swipeMovementStarted||h({swipeMovementStarted:!0}),p.itemListStyle=(0,n.setPosition)(T,c.axis)),P&&!u.cancelClick&&h({cancelClick:!0}),p},e.slideStopSwipingHandler=function(s,c){var u=(0,n.getPosition)(c.selectedItem,s);return{itemListStyle:(0,n.setPosition)(u,s.axis)}},e.fadeAnimationHandler=function(s,c){var u=s.transitionTime+"ms",h="ease-in-out",p={position:"absolute",display:"block",zIndex:-2,minHeight:"100%",opacity:0,top:0,right:0,left:0,bottom:0,transitionTimingFunction:h,msTransitionTimingFunction:h,MozTransitionTimingFunction:h,WebkitTransitionTimingFunction:h,OTransitionTimingFunction:h};return c.swiping||(p=a(a({},p),{},{WebkitTransitionDuration:u,MozTransitionDuration:u,OTransitionDuration:u,transitionDuration:u,msTransitionDuration:u})),{slideStyle:p,selectedStyle:a(a({},p),{},{opacity:1,position:"relative"}),prevStyle:a({},p)}}})),vs=q((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=h(An()),r=c(Yr()),n=c(Ui()),o=c(Ji()),i=c(ps()),a=c(qi()),l=Qi(),s=ms();function c(x){return x&&x.__esModule?x:{default:x}}function u(){if(typeof WeakMap!="function")return null;var x=new WeakMap;return u=function(){return x},x}function h(x){if(x&&x.__esModule)return x;if(x===null||p(x)!=="object"&&typeof x!="function")return{default:x};var w=u();if(w&&w.has(x))return w.get(x);var I={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in x)if(Object.prototype.hasOwnProperty.call(x,b)){var G=O?Object.getOwnPropertyDescriptor(x,b):null;G&&(G.get||G.set)?Object.defineProperty(I,b,G):I[b]=x[b]}return I.default=x,w&&w.set(x,I),I}function p(x){"@babel/helpers - typeof";return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},p(x)}function m(){return m=Object.assign||function(x){for(var w=1;w<arguments.length;w++){var I=arguments[w];for(var O in I)Object.prototype.hasOwnProperty.call(I,O)&&(x[O]=I[O])}return x},m.apply(this,arguments)}function f(x,w){var I=Object.keys(x);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(x);w&&(O=O.filter(function(b){return Object.getOwnPropertyDescriptor(x,b).enumerable})),I.push.apply(I,O)}return I}function v(x){for(var w=1;w<arguments.length;w++){var I=arguments[w]==null?{}:arguments[w];w%2?f(Object(I),!0).forEach(function(O){R(x,O,I[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(I)):f(Object(I)).forEach(function(O){Object.defineProperty(x,O,Object.getOwnPropertyDescriptor(I,O))})}return x}function k(x,w){if(!(x instanceof w))throw TypeError("Cannot call a class as a function")}function M(x,w){for(var I=0;I<w.length;I++){var O=w[I];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(x,O.key,O)}}function y(x,w,I){return w&&M(x.prototype,w),I&&M(x,I),x}function S(x,w){if(typeof w!="function"&&w!==null)throw TypeError("Super expression must either be null or a function");x.prototype=Object.create(w&&w.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),w&&T(x,w)}function T(x,w){return T=Object.setPrototypeOf||function(I,O){return I.__proto__=O,I},T(x,w)}function P(x){var w=F();return function(){var I=C(x),O;if(w){var b=C(this).constructor;O=Reflect.construct(I,arguments,b)}else O=I.apply(this,arguments);return E(this,O)}}function E(x,w){return w&&(p(w)==="object"||typeof w=="function")?w:z(x)}function z(x){if(x===void 0)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function C(x){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)},C(x)}function R(x,w,I){return w in x?Object.defineProperty(x,w,{value:I,enumerable:!0,configurable:!0,writable:!0}):x[w]=I,x}var L=(function(x){S(I,x);var w=P(I);function I(O){var b;k(this,I),b=w.call(this,O),R(z(b),"thumbsRef",void 0),R(z(b),"carouselWrapperRef",void 0),R(z(b),"listRef",void 0),R(z(b),"itemsRef",void 0),R(z(b),"timer",void 0),R(z(b),"animationHandler",void 0),R(z(b),"setThumbsRef",function(_){b.thumbsRef=_}),R(z(b),"setCarouselWrapperRef",function(_){b.carouselWrapperRef=_}),R(z(b),"setListRef",function(_){b.listRef=_}),R(z(b),"setItemsRef",function(_,Z){b.itemsRef||(b.itemsRef=[]),b.itemsRef[Z]=_}),R(z(b),"autoPlay",function(){t.Children.count(b.props.children)<=1||(b.clearAutoPlay(),b.props.autoPlay&&(b.timer=setTimeout(function(){b.increment()},b.props.interval)))}),R(z(b),"clearAutoPlay",function(){b.timer&&clearTimeout(b.timer)}),R(z(b),"resetAutoPlay",function(){b.clearAutoPlay(),b.autoPlay()}),R(z(b),"stopOnHover",function(){b.setState({isMouseEntered:!0},b.clearAutoPlay)}),R(z(b),"startOnLeave",function(){b.setState({isMouseEntered:!1},b.autoPlay)}),R(z(b),"isFocusWithinTheCarousel",function(){return b.carouselWrapperRef?!!((0,i.default)().activeElement===b.carouselWrapperRef||b.carouselWrapperRef.contains((0,i.default)().activeElement)):!1}),R(z(b),"navigateWithKeyboard",function(_){if(b.isFocusWithinTheCarousel()){var Z=b.props.axis==="horizontal",ee={ArrowUp:38,ArrowRight:39,ArrowDown:40,ArrowLeft:37},V=Z?ee.ArrowRight:ee.ArrowDown,se=Z?ee.ArrowLeft:ee.ArrowUp;V===_.keyCode?b.increment():se===_.keyCode&&b.decrement()}}),R(z(b),"updateSizes",function(){if(!(!b.state.initialized||!b.itemsRef||b.itemsRef.length===0)){var _=b.props.axis==="horizontal",Z=b.itemsRef[0];if(Z){var ee=_?Z.clientWidth:Z.clientHeight;b.setState({itemSize:ee}),b.thumbsRef&&b.thumbsRef.updateSizes()}}}),R(z(b),"setMountState",function(){b.setState({hasMount:!0}),b.updateSizes()}),R(z(b),"handleClickItem",function(_,Z){if(t.Children.count(b.props.children)!==0){if(b.state.cancelClick){b.setState({cancelClick:!1});return}b.props.onClickItem(_,Z),_!==b.state.selectedItem&&b.setState({selectedItem:_})}}),R(z(b),"handleOnChange",function(_,Z){t.Children.count(b.props.children)<=1||b.props.onChange(_,Z)}),R(z(b),"handleClickThumb",function(_,Z){b.props.onClickThumb(_,Z),b.moveTo(_)}),R(z(b),"onSwipeStart",function(_){b.setState({swiping:!0}),b.props.onSwipeStart(_)}),R(z(b),"onSwipeEnd",function(_){b.setState({swiping:!1,cancelClick:!1,swipeMovementStarted:!1}),b.props.onSwipeEnd(_),b.clearAutoPlay(),b.state.autoPlay&&b.autoPlay()}),R(z(b),"onSwipeMove",function(_,Z){b.props.onSwipeMove(Z);var ee=b.props.swipeAnimationHandler(_,b.props,b.state,b.setState.bind(z(b)));return b.setState(v({},ee)),!!Object.keys(ee).length}),R(z(b),"decrement",function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;b.moveTo(b.state.selectedItem-(typeof _=="number"?_:1))}),R(z(b),"increment",function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;b.moveTo(b.state.selectedItem+(typeof _=="number"?_:1))}),R(z(b),"moveTo",function(_){if(typeof _=="number"){var Z=t.Children.count(b.props.children)-1;_<0&&(_=b.props.infiniteLoop?Z:0),_>Z&&(_=b.props.infiniteLoop?0:Z),b.selectItem({selectedItem:_}),b.state.autoPlay&&b.state.isMouseEntered===!1&&b.resetAutoPlay()}}),R(z(b),"onClickNext",function(){b.increment(1)}),R(z(b),"onClickPrev",function(){b.decrement(1)}),R(z(b),"onSwipeForward",function(){b.increment(1),b.props.emulateTouch&&b.setState({cancelClick:!0})}),R(z(b),"onSwipeBackwards",function(){b.decrement(1),b.props.emulateTouch&&b.setState({cancelClick:!0})}),R(z(b),"changeItem",function(_){return function(Z){(!(0,l.isKeyboardEvent)(Z)||Z.key==="Enter")&&b.moveTo(_)}}),R(z(b),"selectItem",function(_){b.setState(v({previousItem:b.state.selectedItem},_),function(){b.setState(b.animationHandler(b.props,b.state))}),b.handleOnChange(_.selectedItem,t.Children.toArray(b.props.children)[_.selectedItem])}),R(z(b),"getInitialImage",function(){var _=b.props.selectedItem,Z=b.itemsRef&&b.itemsRef[_];return(Z&&Z.getElementsByTagName("img")||[])[0]}),R(z(b),"getVariableItemHeight",function(_){var Z=b.itemsRef&&b.itemsRef[_];if(b.state.hasMount&&Z&&Z.children.length){var ee=Z.children[0].getElementsByTagName("img")||[];if(ee.length>0){var V=ee[0];V.complete||V.addEventListener("load",function oe(){b.forceUpdate(),V.removeEventListener("load",oe)})}var se=(ee[0]||Z.children[0]).clientHeight;return se>0?se:null}return null});var G={initialized:!1,previousItem:O.selectedItem,selectedItem:O.selectedItem,hasMount:!1,isMouseEntered:!1,autoPlay:O.autoPlay,swiping:!1,swipeMovementStarted:!1,cancelClick:!1,itemSize:1,itemListStyle:{},slideStyle:{},selectedStyle:{},prevStyle:{}};return b.animationHandler=typeof O.animationHandler=="function"&&O.animationHandler||O.animationHandler==="fade"&&s.fadeAnimationHandler||s.slideAnimationHandler,b.state=v(v({},G),b.animationHandler(O,G)),b}return y(I,[{key:"componentDidMount",value:function(){this.props.children&&this.setupCarousel()}},{key:"componentDidUpdate",value:function(O,b){!O.children&&this.props.children&&!this.state.initialized&&this.setupCarousel(),!O.autoFocus&&this.props.autoFocus&&this.forceFocus(),b.swiping&&!this.state.swiping&&this.setState(v({},this.props.stopSwipingHandler(this.props,this.state))),(O.selectedItem!==this.props.selectedItem||O.centerMode!==this.props.centerMode)&&(this.updateSizes(),this.moveTo(this.props.selectedItem)),O.autoPlay!==this.props.autoPlay&&(this.props.autoPlay?this.setupAutoPlay():this.destroyAutoPlay(),this.setState({autoPlay:this.props.autoPlay}))}},{key:"componentWillUnmount",value:function(){this.destroyCarousel()}},{key:"setupCarousel",value:function(){var O=this;this.bindEvents(),this.state.autoPlay&&t.Children.count(this.props.children)>1&&this.setupAutoPlay(),this.props.autoFocus&&this.forceFocus(),this.setState({initialized:!0},function(){var b=O.getInitialImage();b&&!b.complete?b.addEventListener("load",O.setMountState):O.setMountState()})}},{key:"destroyCarousel",value:function(){this.state.initialized&&(this.unbindEvents(),this.destroyAutoPlay())}},{key:"setupAutoPlay",value:function(){this.autoPlay();var O=this.carouselWrapperRef;this.props.stopOnHover&&O&&(O.addEventListener("mouseenter",this.stopOnHover),O.addEventListener("mouseleave",this.startOnLeave))}},{key:"destroyAutoPlay",value:function(){this.clearAutoPlay();var O=this.carouselWrapperRef;this.props.stopOnHover&&O&&(O.removeEventListener("mouseenter",this.stopOnHover),O.removeEventListener("mouseleave",this.startOnLeave))}},{key:"bindEvents",value:function(){(0,a.default)().addEventListener("resize",this.updateSizes),(0,a.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.props.useKeyboardArrows&&(0,i.default)().addEventListener("keydown",this.navigateWithKeyboard)}},{key:"unbindEvents",value:function(){(0,a.default)().removeEventListener("resize",this.updateSizes),(0,a.default)().removeEventListener("DOMContentLoaded",this.updateSizes);var O=this.getInitialImage();O&&O.removeEventListener("load",this.setMountState),this.props.useKeyboardArrows&&(0,i.default)().removeEventListener("keydown",this.navigateWithKeyboard)}},{key:"forceFocus",value:function(){var O;(O=this.carouselWrapperRef)==null||O.focus()}},{key:"renderItems",value:function(O){var b=this;return this.props.children?t.Children.map(this.props.children,function(G,_){var Z=_===b.state.selectedItem,ee=_===b.state.previousItem,V=Z&&b.state.selectedStyle||ee&&b.state.prevStyle||b.state.slideStyle||{};b.props.centerMode&&b.props.axis==="horizontal"&&(V=v(v({},V),{},{minWidth:b.props.centerSlidePercentage+"%"})),b.state.swiping&&b.state.swipeMovementStarted&&(V=v(v({},V),{},{pointerEvents:"none"}));var se={ref:function(oe){return b.setItemsRef(oe,_)},key:"itemKey"+_+(O?"clone":""),className:n.default.ITEM(!0,_===b.state.selectedItem,_===b.state.previousItem),onClick:b.handleClickItem.bind(b,_,G),style:V};return t.default.createElement("li",se,b.props.renderItem(G,{isSelected:_===b.state.selectedItem,isPrevious:_===b.state.previousItem}))}):[]}},{key:"renderControls",value:function(){var O=this,b=this.props,G=b.showIndicators,_=b.labels,Z=b.renderIndicator,ee=b.children;return G?t.default.createElement("ul",{className:"control-dots"},t.Children.map(ee,function(V,se){return Z&&Z(O.changeItem(se),se===O.state.selectedItem,se,_.item)})):null}},{key:"renderStatus",value:function(){return this.props.showStatus?t.default.createElement("p",{className:"carousel-status"},this.props.statusFormatter(this.state.selectedItem+1,t.Children.count(this.props.children))):null}},{key:"renderThumbs",value:function(){return!this.props.showThumbs||!this.props.children||t.Children.count(this.props.children)===0?null:t.default.createElement(o.default,{ref:this.setThumbsRef,onSelectItem:this.handleClickThumb,selectedItem:this.state.selectedItem,transitionTime:this.props.transitionTime,thumbWidth:this.props.thumbWidth,labels:this.props.labels,emulateTouch:this.props.emulateTouch},this.props.renderThumbs(this.props.children))}},{key:"render",value:function(){var O=this;if(!this.props.children||t.Children.count(this.props.children)===0)return null;var b=this.props.swipeable&&t.Children.count(this.props.children)>1,G=this.props.axis==="horizontal",_=this.props.showArrows&&t.Children.count(this.props.children)>1,Z=_&&(this.state.selectedItem>0||this.props.infiniteLoop)||!1,ee=_&&(this.state.selectedItem<t.Children.count(this.props.children)-1||this.props.infiniteLoop)||!1,V=this.renderItems(!0),se=V.shift(),oe=V.pop(),ue={className:n.default.SLIDER(!0,this.state.swiping),onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:this.state.itemListStyle,tolerance:this.props.swipeScrollTolerance},Te={};return G?(ue.onSwipeLeft=this.onSwipeForward,ue.onSwipeRight=this.onSwipeBackwards,this.props.dynamicHeight&&(Te.height=this.getVariableItemHeight(this.state.selectedItem)||"auto")):(ue.onSwipeUp=this.props.verticalSwipe==="natural"?this.onSwipeBackwards:this.onSwipeForward,ue.onSwipeDown=this.props.verticalSwipe==="natural"?this.onSwipeForward:this.onSwipeBackwards,ue.style=v(v({},ue.style),{},{height:this.state.itemSize}),Te.height=this.state.itemSize),t.default.createElement("div",{"aria-label":this.props.ariaLabel,className:n.default.ROOT(this.props.className),ref:this.setCarouselWrapperRef,tabIndex:this.props.useKeyboardArrows?0:void 0},t.default.createElement("div",{className:n.default.CAROUSEL(!0),style:{width:this.props.width}},this.renderControls(),this.props.renderArrowPrev(this.onClickPrev,Z,this.props.labels.leftArrow),t.default.createElement("div",{className:n.default.WRAPPER(!0,this.props.axis),style:Te},b?t.default.createElement(r.default,m({tagName:"ul",innerRef:this.setListRef},ue,{allowMouseEvents:this.props.emulateTouch}),this.props.infiniteLoop&&oe,this.renderItems(),this.props.infiniteLoop&&se):t.default.createElement("ul",{className:n.default.SLIDER(!0,this.state.swiping),ref:function(te){return O.setListRef(te)},style:this.state.itemListStyle||{}},this.props.infiniteLoop&&oe,this.renderItems(),this.props.infiniteLoop&&se)),this.props.renderArrowNext(this.onClickNext,ee,this.props.labels.rightArrow),this.renderStatus()),this.renderThumbs())}}]),I})(t.default.Component);e.default=L,R(L,"displayName","Carousel"),R(L,"defaultProps",{ariaLabel:void 0,axis:"horizontal",centerSlidePercentage:80,interval:3e3,labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},onClickItem:l.noop,onClickThumb:l.noop,onChange:l.noop,onSwipeStart:function(){},onSwipeEnd:function(){},onSwipeMove:function(){return!1},preventMovementUntilSwipeScrollTolerance:!1,renderArrowPrev:function(x,w,I){return t.default.createElement("button",{type:"button","aria-label":I,className:n.default.ARROW_PREV(!w),onClick:x})},renderArrowNext:function(x,w,I){return t.default.createElement("button",{type:"button","aria-label":I,className:n.default.ARROW_NEXT(!w),onClick:x})},renderIndicator:function(x,w,I,O){return t.default.createElement("li",{className:n.default.DOT(w),onClick:x,onKeyDown:x,value:I,key:I,role:"button",tabIndex:0,"aria-label":`${O} ${I+1}`})},renderItem:function(x){return x},renderThumbs:function(x){var w=t.Children.map(x,function(I){var O=I;if(I.type!=="img"&&(O=t.Children.toArray(I.props.children).find(function(b){return b.type==="img"})),O)return O});return w.filter(function(I){return I}).length===0?(console.warn("No images found! Can't build the thumb list without images. If you don't need thumbs, set showThumbs={false} in the Carousel. Note that it's not possible to get images rendered inside custom components. More info at https://github.com/leandrowd/react-responsive-carousel/blob/master/TROUBLESHOOTING.md"),[]):w},statusFormatter:l.defaultStatusFormatter,selectedItem:0,showArrows:!0,showIndicators:!0,showStatus:!0,showThumbs:!0,stopOnHover:!0,swipeScrollTolerance:5,swipeable:!0,transitionTime:350,verticalSwipe:"standard",width:"100%",animationHandler:"slide",swipeAnimationHandler:s.slideSwipeAnimationHandler,stopSwipingHandler:s.slideStopSwipingHandler})})),ws=q((()=>{})),ys=q((e=>{Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Carousel",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"CarouselProps",{enumerable:!0,get:function(){return r.CarouselProps}}),Object.defineProperty(e,"Thumbs",{enumerable:!0,get:function(){return n.default}});var t=o(vs()),r=ws(),n=o(Ji());function o(i){return i&&i.__esModule?i:{default:i}}})),bs=q(((e,t)=>{var r=pn();t.exports=function(){return r.Date.now()}})),xs=q(((e,t)=>{var r=/\s/;function n(o){for(var i=o.length;i--&&r.test(o.charAt(i)););return i}t.exports=n})),Cs=q(((e,t)=>{var r=xs(),n=/^\s+/;function o(i){return i&&i.slice(0,r(i)+1).replace(n,"")}t.exports=o})),Zo=q(((e,t)=>{var r=Cs(),n=ho(),o=U0(),i=NaN,a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;function u(h){if(typeof h=="number")return h;if(o(h))return i;if(n(h)){var p=typeof h.valueOf=="function"?h.valueOf():h;h=n(p)?p+"":p}if(typeof h!="string")return h===0?h:+h;h=r(h);var m=l.test(h);return m||s.test(h)?c(h.slice(2),m?2:8):a.test(h)?i:+h}t.exports=u})),ei=q(((e,t)=>{var r=ho(),n=bs(),o=Zo(),i="Expected a function",a=Math.max,l=Math.min;function s(c,u,h){var p,m,f,v,k,M,y=0,S=!1,T=!1,P=!0;if(typeof c!="function")throw TypeError(i);u=o(u)||0,r(h)&&(S=!!h.leading,T="maxWait"in h,f=T?a(o(h.maxWait)||0,u):f,P="trailing"in h?!!h.trailing:P);function E(O){var b=p,G=m;return p=m=void 0,y=O,v=c.apply(G,b),v}function z(O){return y=O,k=setTimeout(R,u),S?E(O):v}function F(O){var b=O-M,G=O-y,_=u-b;return T?l(_,f-G):_}function C(O){var b=O-M,G=O-y;return M===void 0||b>=u||b<0||T&&G>=f}function R(){var O=n();if(C(O))return L(O);k=setTimeout(R,F(O))}function L(O){return k=void 0,P&&p?E(O):(p=m=void 0,v)}function x(){k!==void 0&&clearTimeout(k),y=0,p=M=m=k=void 0}function w(){return k===void 0?v:L(n())}function I(){var O=n(),b=C(O);if(p=arguments,m=this,M=O,b){if(k===void 0)return z(M);if(T)return clearTimeout(k),k=setTimeout(R,u),E(M)}return k===void 0&&(k=setTimeout(R,u)),v}return I.cancel=x,I.flush=w,I}t.exports=s})),d=$t(An(),1),Ss=$t(ei(),1);function jt(e,t,r,n,o=!1){let i=d.useRef();i.current=t,d.useEffect(()=>{if(r===null||r.addEventListener===void 0)return;let a=r,l=s=>{var c;(c=i.current)==null||c.call(a,s)};return a.addEventListener(e,l,{passive:n,capture:o}),()=>{a.removeEventListener(e,l,{capture:o})}},[e,r,n,o])}function Dr(e,t){return e===void 0?void 0:t}var ks=Math.PI;function Zi(e){return e*ks/180}const el=(e,t,r)=>({x1:e-r/2,y1:t-r/2,x2:e+r/2,y2:t+r/2}),tl=(e,t,r,n,o)=>{switch(e){case"left":return Math.floor(t)+n+o/2;case"center":return Math.floor(t+r/2);case"right":return Math.floor(t+r)-n-o/2}},rl=(e,t,r)=>Math.min(e,t-r*2),nl=(e,t,r)=>r.x1<=e&&e<=r.x2&&r.y1<=t&&t<=r.y2,ti=e=>{let t=e.fgColor??"currentColor";return d.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d.createElement("path",{d:"M12.7073 7.05029C7.87391 11.8837 10.4544 9.30322 6.03024 13.7273C5.77392 13.9836 5.58981 14.3071 5.50189 14.6587L4.52521 18.5655C4.38789 19.1148 4.88543 19.6123 5.43472 19.475L9.34146 18.4983C9.69313 18.4104 10.0143 18.2286 10.2706 17.9722L16.9499 11.2929",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",vectorEffect:"non-scaling-stroke"}),d.createElement("path",{d:"M20.4854 4.92901L19.0712 3.5148C18.2901 2.73375 17.0238 2.73375 16.2428 3.5148L14.475 5.28257C15.5326 7.71912 16.4736 8.6278 18.7176 9.52521L20.4854 7.75744C21.2665 6.97639 21.2665 5.71006 20.4854 4.92901Z",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",vectorEffect:"non-scaling-stroke"}))},Ms=e=>{let t=e.fgColor??"currentColor";return d.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d.createElement("path",{d:"M19 6L10.3802 17L5.34071 11.8758",vectorEffect:"non-scaling-stroke",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))};function Rs(e,t,r){let[n,o]=d.useState(e),i=d.useRef(!0);d.useEffect(()=>()=>{i.current=!1},[]);let a=d.useRef((0,Ss.default)(l=>{i.current&&o(l)},r));return d.useLayoutEffect(()=>{i.current&&a.current(()=>e())},t),n}var Es=RegExp("^[^A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF]*[\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC]");function ri(e){return Es.test(e)?"rtl":"not-rtl"}var mo=void 0;function ni(){if(typeof document>"u")return 0;if(mo!==void 0)return mo;let e=document.createElement("p");e.style.width="100%",e.style.height="200px";let t=document.createElement("div");t.id="testScrollbar",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.append(e),document.body.append(t);let r=e.offsetWidth;t.style.overflow="scroll";let n=e.offsetWidth;return r===n&&(n=t.clientWidth),t.remove(),mo=r-n,mo}var Gr=Symbol();function Is(e){let t=d.useRef([Gr,e]);t.current[1]!==e&&(t.current[0]=e),t.current[1]=e;let[r,n]=d.useState(e),[,o]=d.useState(),i=d.useCallback(l=>{let s=t.current[0];s!==Gr&&(l=typeof l=="function"?l(s):l,l===s)||(s!==Gr&&o({}),n(c=>typeof l=="function"?l(s===Gr?c:s):l),t.current[0]=Gr)},[]),a=d.useCallback(()=>{t.current[0]=Gr,o({})},[]);return[t.current[0]===Gr?r:t.current[0],i,a]}function ol(e){if(e.length===0)return"";let t=0,r=0;for(let n of e){if(r+=n.length,r>1e4)break;t++}return e.slice(0,t).join(", ")}function Ts(e){let t=d.useRef(e);return Uo(e,t.current)||(t.current=e),t.current}var Ps=$t(ys(),1);const Os=e=>{let{urls:t,canWrite:r,onEditClick:n,renderImage:o}=e,i=t.filter(l=>l!=="");if(i.length===0)return null;let a=i.length>1;return d.createElement(Vr,{"data-testid":"GDG-default-image-overlay-editor"},d.createElement(Ps.Carousel,{showArrows:a,showThumbs:!1,swipeable:a,emulateTouch:a,infiniteLoop:a},i.map(l=>{let s=(o==null?void 0:o(l))??d.createElement("img",{draggable:!1,src:l});return d.createElement("div",{className:"gdg-centering-container",key:l},s)})),r&&n&&d.createElement("button",{className:"gdg-edit-icon",onClick:n},d.createElement(ti,null)))},Ds=Qt("div")({name:"MarkdownContainer",class:"gdg-mnuv029",propsAsIs:!1});var Hs=class extends d.PureComponent{constructor(){super(...arguments);tt(this,"targetElement",null);tt(this,"containerRefHook",t=>{this.targetElement=t,this.renderMarkdownIntoDiv()})}renderMarkdownIntoDiv(){let{targetElement:t,props:r}=this;if(t===null)return;let{contents:n,createNode:o}=r,i=T0(n),a=document.createRange();a.selectNodeContents(t),a.deleteContents();let l=o==null?void 0:o(i);if(l===void 0){let c=document.createElement("template");c.innerHTML=i,l=c.content}t.append(l);let s=t.getElementsByTagName("a");for(let c of s)c.target="_blank",c.rel="noreferrer noopener"}render(){return this.renderMarkdownIntoDiv(),d.createElement(Ds,{ref:this.containerRefHook})}};const zs=Qt("textarea")({name:"InputBox",class:"gdg-izpuzkl",propsAsIs:!1}),As=Qt("div")({name:"ShadowBox",class:"gdg-s69h75o",propsAsIs:!1}),Ls=Qt("div")({name:"GrowingEntryStyle",class:"gdg-g1y0xocz",propsAsIs:!1});var il=0;const vo=e=>{let{placeholder:t,value:r,onKeyDown:n,highlight:o,altNewline:i,validatedSelection:a,...l}=e,{onChange:s,className:c}=l,u=d.useRef(null),h=r??"";Jt(s!==void 0,"GrowingEntry must be a controlled input area");let[p]=d.useState(()=>"input-box-"+(il=(il+1)%1e7));d.useEffect(()=>{let f=u.current;if(f===null||f.disabled)return;let v=h.toString().length;f.focus(),f.setSelectionRange(o?0:v,v)},[]),d.useLayoutEffect(()=>{var f;if(a!==void 0){let v=typeof a=="number"?[a,null]:a;(f=u.current)==null||f.setSelectionRange(v[0],v[1])}},[a]);let m=d.useCallback(f=>{f.key==="Enter"&&f.shiftKey&&i===!0||(n==null||n(f))},[i,n]);return d.createElement(Ls,{className:"gdg-growing-entry"},d.createElement(As,{className:c},h+`
`),d.createElement(zs,{...l,className:(c??"")+" gdg-input",id:p,ref:u,onKeyDown:m,value:h,placeholder:t,dir:"auto"}))};var vn=new Map,wn=new Map,oi=new Map;function Fs(){vn.clear(),oi.clear(),wn.clear()}function js(e,t,r,n,o){let i=0,a={};for(let s of e)i+=r.get(s)??o,a[s]=(a[s]??0)+1;let l=t-i;for(let s of Object.keys(a)){let c=a[s],u=r.get(s)??o,h=u+l*(u*c/i)*n/c;r.set(s,h)}}function _s(e,t){let r=new Map,n=0;for(let l of"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890,.-+=?"){let s=e.measureText(l).width;r.set(l,s),n+=s}let o=n/r.size,i=(t/o+3)/4,a=r.keys();for(let l of a)r.set(l,(r.get(l)??o)*i);return r}function jn(e,t,r,n){let o=wn.get(r);if(n&&o!==void 0&&o.count>2e4){let l=oi.get(r);if(l===void 0&&(l=_s(e,o.size),oi.set(r,l)),o.count>5e5){let c=0;for(let u of t)c+=l.get(u)??o.size;return c*1.01}let s=e.measureText(t);return js(t,s.width,l,Math.max(.05,1-o.count/2e5),o.size),wn.set(r,{count:o.count+t.length,size:o.size}),s.width}let i=e.measureText(t),a=i.width/t.length;if(((o==null?void 0:o.count)??0)>2e4)return i.width;if(o===void 0)wn.set(r,{count:t.length,size:a});else{let l=a-o.size,s=t.length/(o.count+t.length),c=o.size+l*s;wn.set(r,{count:o.count+t.length,size:c})}return i.width}function Ns(e,t,r,n,o,i,a,l){if(t.length<=1)return t.length;if(o<r)return-1;let s=Math.floor(r/o*i),c=jn(e,t.slice(0,Math.max(0,s)),n,a),u=l==null?void 0:l(t);if(c!==r)if(c<r){for(;c<r;)s++,c=jn(e,t.slice(0,Math.max(0,s)),n,a);s--}else for(;c>r;){let h=u===void 0?t.lastIndexOf(" ",s-1):0;h>0?s=h:s--,c=jn(e,t.slice(0,Math.max(0,s)),n,a)}if(t[s]!==" "){let h=0;if(u===void 0)h=t.lastIndexOf(" ",s);else for(let p of u){if(p>s)break;h=p}h>0&&(s=h)}return s}function Bs(e,t,r,n,o,i){let a=`${t}_${r}_${n}px`,l=vn.get(a);if(l!==void 0)return l;if(n<=0)return[];let s=[],c=t.split(`
`),u=wn.get(r),h=u===void 0?t.length:n/u.size*1.5,p=o&&u!==void 0&&u.count>2e4;for(let m of c){let f=jn(e,m.slice(0,Math.max(0,h)),r,p),v=Math.min(m.length,h);if(f<=n)s.push(m);else{for(;f>n;){let k=Ns(e,m,n,r,f,v,p,i),M=m.slice(0,Math.max(0,k));m=m.slice(M.length),s.push(M),f=jn(e,m.slice(0,Math.max(0,h)),r,p),v=Math.min(m.length,h)}f>0&&s.push(m)}}return s=s.map((m,f)=>f===0?m.trimEnd():m.trim()),vn.set(a,s),vn.size>500&&vn.delete(vn.keys().next().value),s}function Ws(e,t){return d.useMemo(()=>e.map((r,n)=>({group:r.group,grow:r.grow,hasMenu:r.hasMenu,icon:r.icon,id:r.id,menuIcon:r.menuIcon,overlayIcon:r.overlayIcon,sourceIndex:n,sticky:n<t,indicatorIcon:r.indicatorIcon,style:r.style,themeOverride:r.themeOverride,title:r.title,trailingRowOptions:r.trailingRowOptions,width:r.width,growOffset:r.growOffset,rowMarker:r.rowMarker,rowMarkerChecked:r.rowMarkerChecked,headerRowMarkerTheme:r.headerRowMarkerTheme,headerRowMarkerAlwaysVisible:r.headerRowMarkerAlwaysVisible,headerRowMarkerDisabled:r.headerRowMarkerDisabled})),[e,t])}function $s(e,t){let[r,n]=t;if(e.columns.hasIndex(r)||e.rows.hasIndex(n))return!0;if(e.current!==void 0){if(Nn(e.current.cell,t))return!0;let o=[e.current.range,...e.current.rangeStack];for(let i of o)if(r>=i.x&&r<i.x+i.width&&n>=i.y&&n<i.y+i.height)return!0}return!1}function _n(e,t){return(e??"")===(t??"")}function Xs(e,t,r){return r.current===void 0||e[1]!==r.current.cell[1]?!1:t.span===void 0?r.current.cell[0]===e[0]:r.current.cell[0]>=t.span[0]&&r.current.cell[0]<=t.span[1]}function ll(e,t){let[r,n]=e;return r>=t.x&&r<t.x+t.width&&n>=t.y&&n<t.y+t.height}function Nn(e,t){return(e==null?void 0:e[0])===(t==null?void 0:t[0])&&(e==null?void 0:e[1])===(t==null?void 0:t[1])}function al(e){return[e.x+e.width-1,e.y+e.height-1]}function sl(e,t,r){let n=r.x,o=r.x+r.width-1,i=r.y,a=r.y+r.height-1,[l,s]=e;if(s<i||s>a)return!1;if(t.span===void 0)return l>=n&&l<=o;let[c,u]=t.span;return c>=n&&c<=o||u>=n&&c<=o||c<n&&u>o}function Ks(e,t,r,n){let o=0;if(r.current===void 0)return o;let i=r.current.range;(n||i.height*i.width>1)&&sl(e,t,i)&&o++;for(let a of r.current.rangeStack)sl(e,t,a)&&o++;return o}function cl(e,t){let r=e;if(t!==void 0){let n=[...e],o=r[t.src];t.src>t.dest?(n.splice(t.src,1),n.splice(t.dest,0,o)):(n.splice(t.dest+1,0,o),n.splice(t.src,1)),n=n.map((i,a)=>({...i,sticky:e[a].sticky})),r=n}return r}function yn(e,t){let r=0,n=cl(e,t);for(let o=0;o<n.length;o++){let i=n[o];if(i.sticky)r+=i.width;else break}return r}function Ur(e,t,r){if(typeof r=="number")return t*r;{let n=0;for(let o=e-t;o<e;o++)n+=r(o);return n}}function ii(e,t,r,n,o){let i=cl(e,n),a=[];for(let c of i)if(c.sticky)a.push(c);else break;if(a.length>0)for(let c of a)r-=c.width;let l=t,s=o??0;for(;s<=r&&l<i.length;)s+=i[l].width,l++;for(let c=t;c<l;c++){let u=i[c];u.sticky||a.push(u)}return a}function Vs(e,t,r){let n=0;for(let o of t){if(e<=(o.sticky?n:n+(r??0))+o.width)return o.sourceIndex;n+=o.width}return-1}function Ys(e,t,r,n,o,i,a,l,s,c){let u=n+o;if(r&&e<=o)return-2;if(e<=u)return-1;let h=t;for(let f=0;f<c;f++){let v=i-1-f,k=typeof a=="number"?a:a(v);if(h-=k,e>=h)return v}let p=i-c,m=e-(s??0);if(typeof a=="number"){let f=Math.floor((m-u)/a)+l;return f>=p?void 0:f}else{let f=u;for(let v=l;v<p;v++){let k=a(v);if(m<=f+k)return v;f+=k}return}}var wo=0,Bn={},Gs=typeof window>"u";async function Us(){var e;Gs||((e=document==null?void 0:document.fonts)==null?void 0:e.ready)===void 0||(await document.fonts.ready,wo=0,Bn={},Fs())}Us();function ul(e,t,r,n){return`${e}_${n??(t==null?void 0:t.font)}_${r}`}function bn(e,t,r,n="middle"){let o=ul(e,t,n,r),i=Bn[o];return i===void 0&&(i=t.measureText(e),Bn[o]=i,wo++),wo>1e4&&(Bn={},wo=0),i}function dl(e,t){let r=ul(e,void 0,"middle",t);return Bn[r]}function Hr(e,t){return typeof t!="string"&&(t=t.baseFontFull),qs(e,t)}function hl(e,t){e.save(),e.textBaseline=t;let r=e.measureText("ABCDEFGHIJKLMNOPQRSTUVWXYZ");return e.restore(),r}var fl=[];function qs(e,t){for(let o of fl)if(o.key===t)return o.val;let r=hl(e,"alphabetic"),n=-(hl(e,"middle").actualBoundingBoxDescent-r.actualBoundingBoxDescent)+r.actualBoundingBoxAscent/2;return fl.push({key:t,val:n}),n}function Js(e,t,r,n,o,i){let{ctx:a,rect:l,theme:s}=e,c=2**53-1;return t!==void 0&&(c=r-t,c<500&&(a.globalAlpha=1-c/500,a.fillStyle=s.bgSearchResult,a.fillRect(l.x+1,l.y+1,l.width-(o?2:1),l.height-(i?2:1)),a.globalAlpha=1,n!==void 0&&(n.fillStyle=s.bgSearchResult))),c<500}function Wn(e,t,r){let{ctx:n,theme:o}=e,i=t??{},a=r??o.textDark;return a!==i.fillStyle&&(n.fillStyle=a,i.fillStyle=a),i}function gl(e,t,r,n,o,i,a,l,s){s==="right"?e.fillText(t,r+o-(l.cellHorizontalPadding+.5),n+i/2+a):s==="center"?e.fillText(t,r+o/2,n+i/2+a):e.fillText(t,r+l.cellHorizontalPadding+.5,n+i/2+a)}function pl(e,t){let r=bn("ABCi09jgqpy",e,t);return r.actualBoundingBoxAscent+r.actualBoundingBoxDescent}function Qs(e,t){e.includes(`
`)&&(e=e.split(/\r?\n/,1)[0]);let r=t/4;return e.length>r&&(e=e.slice(0,r)),e}function Zs(e,t,r,n,o,i,a,l,s,c){let u=l.baseFontFull,h=Bs(e,t,u,o-l.cellHorizontalPadding*2,c??!1),p=pl(e,u),m=l.lineHeight*p,f=p+m*(h.length-1),v=f+l.cellVerticalPadding>i;v&&(e.save(),e.rect(r,n,o,i),e.clip());let k=n+i/2-f/2,M=Math.max(n+l.cellVerticalPadding,k);for(let y of h)if(gl(e,y,r,M,o,p,a,l,s),M+=m,M>n+i)break;v&&e.restore()}function Sr(e,t,r,n,o){let{ctx:i,rect:a,theme:l}=e,{x:s,y:c,width:u,height:h}=a;n??(n=!1),n||(t=Qs(t,u));let p=Hr(i,l),m=ri(t)==="rtl";if(r===void 0&&m&&(r="right"),m&&(i.direction="rtl"),t.length>0){let f=!1;r==="right"?(i.textAlign="right",f=!0):r!==void 0&&r!=="left"&&(i.textAlign=r,f=!0),n?Zs(i,t,s,c,u,h,p,l,r,o):gl(i,t,s,c,u,h,p,l,r),f&&(i.textAlign="start"),m&&(i.direction="inherit")}}function gr(e,t,r,n,o,i){typeof i=="number"&&(i={tl:i,tr:i,br:i,bl:i}),i={tl:Math.max(0,Math.min(i.tl,o/2,n/2)),tr:Math.max(0,Math.min(i.tr,o/2,n/2)),bl:Math.max(0,Math.min(i.bl,o/2,n/2)),br:Math.max(0,Math.min(i.br,o/2,n/2))},e.moveTo(t+i.tl,r),e.arcTo(t+n,r,t+n,r+i.tr,i.tr),e.arcTo(t+n,r+o,t+n-i.br,r+o,i.br),e.arcTo(t,r+o,t,r+o-i.bl,i.bl),e.arcTo(t,r,t+i.tl,r,i.tl)}function ec(e,t,r){let n=1.25;e.arc(t,r-n*3.5,n,0,2*Math.PI,!1),e.arc(t,r,n,0,2*Math.PI,!1),e.arc(t,r+n*3.5,n,0,2*Math.PI,!1)}function tc(e,t,r){let n=function(l,s){let c=s.x-l.x,u=s.y-l.y,h=Math.sqrt(c*c+u*u),p=c/h,m=u/h;return{x:c,y:s.y-l.y,len:h,nx:p,ny:m,ang:Math.atan2(m,p)}},o,i=t.length,a=t[i-1];for(let l=0;l<i;l++){let s=t[l%i],c=t[(l+1)%i],u=n(s,a),h=n(s,c),p=u.nx*h.ny-u.ny*h.nx,m=u.nx*h.nx-u.ny*-h.ny,f=Math.asin(p<-1?-1:p>1?1:p),v=1,k=!1;m<0?f<0?f=Math.PI+f:(f=Math.PI-f,v=-1,k=!0):f>0&&(v=-1,k=!0),o=s.radius===void 0?r:s.radius;let M=f/2,y=Math.abs(Math.cos(M)*o/Math.sin(M)),S;y>Math.min(u.len/2,h.len/2)?(y=Math.min(u.len/2,h.len/2),S=Math.abs(y*Math.sin(M)/Math.cos(M))):S=o;let T=s.x+h.nx*y,P=s.y+h.ny*y;T+=-h.ny*S*v,P+=h.nx*S*v,e.arc(T,P,S,u.ang+Math.PI/2*v,h.ang-Math.PI/2*v,k),a=s,s=c}e.closePath()}function li(e,t,r,n,o,i,a,l,s,c,u,h,p,m,f){let v={x:0,y:i+c,width:0,height:0};if(e>=m.length||t>=u||t<-2||e<0)return v;let k=i-o;if(e>=h){let M=a>e?-1:1,y=yn(m);v.x+=y+s;for(let S=a;S!==e;S+=M)v.x+=m[M===1?S:S-1].width*M}else for(let M=0;M<e;M++)v.x+=m[M].width;if(v.width=m[e].width+1,t===-1)v.y=o,v.height=k;else if(t===-2){v.y=0,v.height=o;let M=e,y=m[e].group,S=m[e].sticky;for(;M>0&&_n(m[M-1].group,y)&&m[M-1].sticky===S;){let P=m[M-1];v.x-=P.width,v.width+=P.width,M--}let T=e;for(;T+1<m.length&&_n(m[T+1].group,y)&&m[T+1].sticky===S;){let P=m[T+1];v.width+=P.width,T++}if(!S){let P=yn(m),E=v.x-P;E<0&&(v.x-=E,v.width+=E),v.x+v.width>r&&(v.width=r-v.x)}}else if(t>=u-p){let M=u-t;for(v.y=n;M>0;){let y=t+M-1;v.height=typeof f=="number"?f:f(y),v.y-=v.height,M--}v.height+=1}else{let M=l>t?-1:1;if(typeof f=="number"){let y=t-l;v.y+=y*f}else for(let y=l;y!==t;y+=M)v.y+=f(y)*M;v.height=(typeof f=="number"?f:f(t))+1}return v}var ai=1<<21;function or(e,t){return(t+2)*ai+e}function ml(e){return e%ai}function si(e){return Math.floor(e/ai)-2}function ci(e){return[ml(e),si(e)]}var vl=class{constructor(){tt(this,"visibleWindow",{x:0,y:0,width:0,height:0});tt(this,"freezeCols",0);tt(this,"freezeRows",[]);tt(this,"isInWindow",e=>{let t=ml(e),r=si(e),n=this.visibleWindow,o=t>=n.x&&t<=n.x+n.width||t<this.freezeCols,i=r>=n.y&&r<=n.y+n.height||this.freezeRows.includes(r);return o&&i})}setWindow(e,t,r){this.visibleWindow.x===e.x&&this.visibleWindow.y===e.y&&this.visibleWindow.width===e.width&&this.visibleWindow.height===e.height&&this.freezeCols===t&&Uo(this.freezeRows,r)||(this.visibleWindow=e,this.freezeCols=t,this.freezeRows=r,this.clearOutOfWindow())}},rc=class extends vl{constructor(){super(...arguments);tt(this,"cache",new Map);tt(this,"setValue",(t,r)=>{this.cache.set(or(t[0],t[1]),r)});tt(this,"getValue",t=>this.cache.get(or(t[0],t[1])));tt(this,"clearOutOfWindow",()=>{for(let[t]of this.cache.entries())this.isInWindow(t)||this.cache.delete(t)})}},$n=class{constructor(e=[]){tt(this,"cells");this.cells=new Set(e.map(t=>or(t[0],t[1])))}add(e){this.cells.add(or(e[0],e[1]))}has(e){return e===void 0?!1:this.cells.has(or(e[0],e[1]))}remove(e){this.cells.delete(or(e[0],e[1]))}clear(){this.cells.clear()}get size(){return this.cells.size}hasHeader(){for(let e of this.cells)if(si(e)<0)return!0;return!1}hasItemInRectangle(e){for(let t=e.y;t<e.y+e.height;t++)for(let r=e.x;r<e.x+e.width;r++)if(this.cells.has(or(r,t)))return!0;return!1}hasItemInRegion(e){for(let t of e)if(this.hasItemInRectangle(t))return!0;return!1}*values(){for(let e of this.cells)yield ci(e)}},ui=150;function nc(e,t,r,n){var o,i;return((i=(o=n(t))==null?void 0:o.measure)==null?void 0:i.call(o,e,t,r))??ui}function wl(e,t,r,n,o,i,a,l,s){let c=0,u=o===void 0?[]:o.map(m=>{let f=nc(e,m[n],t,s);return c=Math.max(c,f),f});if(u.length>5&&l){c=0;let m=0;for(let v of u)m+=v;let f=m/u.length;for(let v=0;v<u.length;v++)u[v]>=f*2?u[v]=0:c=Math.max(c,u[v])}let h=e.font;e.font=t.headerFontFull,c=Math.max(c,e.measureText(r.title).width+t.cellHorizontalPadding*2+(r.icon===void 0?0:28)),e.font=h;let p=Math.max(Math.ceil(i),Math.min(Math.floor(a),Math.ceil(c)));return{...r,width:p}}function oc(e,t,r,n,o,i,a,l,s){let c=d.useRef(t),u=d.useRef(r),h=d.useRef(a);c.current=t,u.current=r,h.current=a;let[p,m]=d.useMemo(()=>{if(typeof window>"u")return[null,null];let y=document.createElement("canvas");return y.style.display="none",y.style.opacity="0",y.style.position="fixed",[y,y.getContext("2d",{alpha:!1})]},[]);d.useLayoutEffect(()=>(p&&document.documentElement.append(p),()=>{p==null||p.remove()}),[p]);let f=d.useRef({}),v=d.useRef(),[k,M]=d.useState();return d.useLayoutEffect(()=>{let y=u.current;if(y===void 0||e.every(Jo))return;let S=Math.max(1,10-Math.floor(e.length/1e4)),T=0;S<c.current&&S>1&&(S--,T=1);let P={x:0,y:0,width:e.length,height:Math.min(c.current,S)},E={x:0,y:c.current-1,width:e.length,height:1};(async()=>{let z=y(P,s.signal),F=T>0?y(E,s.signal):void 0,C;C=typeof z=="object"?z:await ns(z),F!==void 0&&(C=typeof F=="object"?[...C,...F]:[...C,...await ns(F)]),v.current=e,M(C)})()},[s.signal,e]),d.useMemo(()=>{let y=e.every(Jo)?e:m===null?e.map(E=>Jo(E)?E:{...E,width:ui}):(m.font=h.current.baseFontFull,e.map((E,z)=>{if(Jo(E))return E;if(f.current[E.id]!==void 0)return{...E,width:f.current[E.id]};if(k===void 0||v.current!==e||E.id===void 0)return{...E,width:ui};let F=wl(m,a,E,z,k,o,i,!0,l);return f.current[E.id]=F.width,F})),S=0,T=0,P=[];for(let[E,z]of y.entries())S+=z.width,z.grow!==void 0&&z.grow>0&&(T+=z.grow,P.push(E));if(S<n&&P.length>0){let E=[...y],z=n-S,F=z;for(let C=0;C<P.length;C++){let R=P[C],L=(y[R].grow??0)/T,x=C===P.length-1?F:Math.min(F,Math.floor(z*L));E[R]={...y[R],growOffset:x,width:y[R].width+x},F-=x}y=E}return{sizedColumns:y,nonGrowWidth:S}},[n,e,m,k,a,o,i,l])}var ic=q(((e,t)=>{function r(n,o,i){return n===n&&(i!==void 0&&(n=n<=i?n:i),o!==void 0&&(n=n>=o?n:o)),n}t.exports=r})),yo=q(((e,t)=>{var r=ic(),n=Zo();function o(i,a,l){return l===void 0&&(l=a,a=void 0),l!==void 0&&(l=n(l),l=l===l?l:0),a!==void 0&&(a=n(a),a=a===a?a:0),r(n(i),a,l)}t.exports=o})),lc=q(((e,t)=>{var r="__lodash_hash_undefined__";function n(o){return this.__data__.set(o,r),this}t.exports=n})),ac=q(((e,t)=>{function r(n){return this.__data__.has(n)}t.exports=r})),yl=q(((e,t)=>{var r=ts(),n=lc(),o=ac();function i(a){var l=-1,s=a==null?0:a.length;for(this.__data__=new r;++l<s;)this.add(a[l])}i.prototype.add=i.prototype.push=n,i.prototype.has=o,t.exports=i})),sc=q(((e,t)=>{function r(n,o,i,a){for(var l=n.length,s=i+(a?1:-1);a?s--:++s<l;)if(o(n[s],s,n))return s;return-1}t.exports=r})),cc=q(((e,t)=>{function r(n){return n!==n}t.exports=r})),uc=q(((e,t)=>{function r(n,o,i){for(var a=i-1,l=n.length;++a<l;)if(n[a]===o)return a;return-1}t.exports=r})),dc=q(((e,t)=>{var r=sc(),n=cc(),o=uc();function i(a,l,s){return l===l?o(a,l,s):r(a,n,s)}t.exports=i})),hc=q(((e,t)=>{var r=dc();function n(o,i){return!!(o!=null&&o.length)&&r(o,i,0)>-1}t.exports=n})),fc=q(((e,t)=>{function r(n,o,i){for(var a=-1,l=n==null?0:n.length;++a<l;)if(i(o,n[a]))return!0;return!1}t.exports=r})),bl=q(((e,t)=>{function r(n,o){return n.has(o)}t.exports=r})),xl=q(((e,t)=>{t.exports=fo()(pn(),"Set")})),gc=q(((e,t)=>{function r(){}t.exports=r})),di=q(((e,t)=>{function r(n){var o=-1,i=Array(n.size);return n.forEach(function(a){i[++o]=a}),i}t.exports=r})),pc=q(((e,t)=>{var r=xl(),n=gc(),o=di();t.exports=r&&1/o(new r([,-0]))[1]==1/0?function(i){return new r(i)}:n})),mc=q(((e,t)=>{var r=yl(),n=hc(),o=fc(),i=bl(),a=pc(),l=di(),s=200;function c(u,h,p){var m=-1,f=n,v=u.length,k=!0,M=[],y=M;if(p)k=!1,f=o;else if(v>=s){var S=h?null:a(u);if(S)return l(S);k=!1,f=i,y=new r}else y=h?[]:M;e:for(;++m<v;){var T=u[m],P=h?h(T):T;if(T=p||T!==0?T:0,k&&P===P){for(var E=y.length;E--;)if(y[E]===P)continue e;h&&y.push(P),M.push(T)}else f(y,P,p)||(y!==M&&y.push(P),M.push(T))}return M}t.exports=c})),vc=q(((e,t)=>{var r=mc();function n(o){return o&&o.length?r(o):[]}t.exports=n})),Cl=q(((e,t)=>{function r(n,o){for(var i=-1,a=o.length,l=n.length;++i<a;)n[l+i]=o[i];return n}t.exports=r})),wc=q(((e,t)=>{var r=Za(),n=as(),o=Ln(),i=r?r.isConcatSpreadable:void 0;function a(l){return o(l)||n(l)||!!(i&&l&&l[i])}t.exports=a})),yc=q(((e,t)=>{var r=Cl(),n=wc();function o(i,a,l,s,c){var u=-1,h=i.length;for(l||(l=n),c||(c=[]);++u<h;){var p=i[u];a>0&&l(p)?a>1?o(p,a-1,l,s,c):r(c,p):s||(c[c.length]=p)}return c}t.exports=o})),bc=q(((e,t)=>{var r=yc();function n(o){return o!=null&&o.length?r(o,1):[]}t.exports=n})),xc=q(((e,t)=>{var r=Math.ceil,n=Math.max;function o(i,a,l,s){for(var c=-1,u=n(r((a-i)/(l||1)),0),h=Array(u);u--;)h[s?u:++c]=i,i+=l;return h}t.exports=o})),hi=q(((e,t)=>{var r=nf(),n=ss();function o(i){return i!=null&&n(i.length)&&!r(i)}t.exports=o})),Cc=q(((e,t)=>{var r=es(),n=hi(),o=Qa(),i=ho();function a(l,s,c){if(!i(c))return!1;var u=typeof s;return(u=="number"?n(c)&&o(s,c.length):u=="string"&&s in c)?r(c[s],l):!1}t.exports=a})),Sc=q(((e,t)=>{var r=Zo(),n=1/0,o=17976931348623157e292;function i(a){return a?(a=r(a),a===n||a===-n?(a<0?-1:1)*o:a===a?a:0):a===0?a:0}t.exports=i})),kc=q(((e,t)=>{var r=xc(),n=Cc(),o=Sc();function i(a){return function(l,s,c){return c&&typeof c!="number"&&n(l,s,c)&&(s=c=void 0),l=o(l),s===void 0?(s=l,l=0):s=o(s),c=c===void 0?l<s?1:-1:o(c),r(l,s,c,a)}}t.exports=i})),Sl=q(((e,t)=>{t.exports=kc()()})),ht='<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg">',Mc=e=>{let t=e.fgColor;return`
    ${ht}<rect x="2" y="2" width="16" height="16" rx="2" fill="${e.bgColor}"/><path d="M15.75 4h-1.5a.25.25 0 0 0-.177.074L9.308 8.838a3.75 3.75 0 1 0 1.854 1.854l1.155-1.157.967.322a.5.5 0 0 0 .65-.55l-.18-1.208.363-.363.727.331a.5.5 0 0 0 .69-.59l-.254-.904.647-.647A.25.25 0 0 0 16 5.75v-1.5a.25.25 0 0 0-.25-.25zM7.5 13.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0z" fill="${t}"/></svg>`},Rc=e=>{let t=e.fgColor;return`
    ${ht}<rect x="2" y="2" width="16" height="16" rx="4" fill="${e.bgColor}"/><path d="m12.223 13.314 3.052-2.826a.65.65 0 0 0 0-.984l-3.052-2.822c-.27-.25-.634-.242-.865.022-.232.263-.206.636.056.882l2.601 2.41-2.601 2.41c-.262.245-.288.619-.056.882.231.263.595.277.865.026Zm-4.444.005c.266.25.634.241.866-.027.231-.263.206-.636-.06-.882L5.983 10l2.602-2.405c.266-.25.291-.62.06-.887-.232-.263-.596-.272-.866-.022L4.723 9.51a.653.653 0 0 0 0 .983l3.056 2.827Z" fill="${t}"/></svg>`},Ec=e=>{let t=e.fgColor;return`${ht}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${e.bgColor}"/>
    <path d="M6.52 12.78H5.51V8.74l-1.33.47v-.87l2.29-.83h.05v5.27zm5.2 0H8.15v-.69l1.7-1.83a6.38 6.38 0 0 0 .34-.4c.09-.11.16-.22.22-.32s.1-.19.12-.27a.9.9 0 0 0 0-.56.63.63 0 0 0-.15-.23.58.58 0 0 0-.22-.15.75.75 0 0 0-.29-.05c-.27 0-.48.08-.62.23a.95.95 0 0 0-.2.65H8.03c0-.24.04-.46.13-.67a1.67 1.67 0 0 1 .97-.91c.23-.1.49-.14.77-.14.26 0 .5.04.7.11.21.08.38.18.52.32.14.13.25.3.32.48a1.74 1.74 0 0 1 .03 1.13 2.05 2.05 0 0 1-.24.47 4.16 4.16 0 0 1-.35.47l-.47.5-1 1.05h2.32v.8zm1.8-3.08h.55c.28 0 .48-.06.61-.2a.76.76 0 0 0 .2-.55.8.8 0 0 0-.05-.28.56.56 0 0 0-.13-.22.6.6 0 0 0-.23-.15.93.93 0 0 0-.32-.05.92.92 0 0 0-.29.05.72.72 0 0 0-.23.12.57.57 0 0 0-.21.46H12.4a1.3 1.3 0 0 1 .5-1.04c.15-.13.33-.23.54-.3a2.48 2.48 0 0 1 1.4 0c.2.06.4.15.55.28.15.13.27.28.36.47.08.19.13.4.13.65a1.15 1.15 0 0 1-.2.65 1.36 1.36 0 0 1-.58.49c.15.05.28.12.38.2a1.14 1.14 0 0 1 .43.62c.03.13.05.26.05.4 0 .25-.05.47-.14.66a1.42 1.42 0 0 1-.4.49c-.16.13-.35.23-.58.3a2.51 2.51 0 0 1-.73.1c-.22 0-.44-.03-.65-.09a1.8 1.8 0 0 1-.57-.28 1.43 1.43 0 0 1-.4-.47 1.41 1.41 0 0 1-.15-.66h1a.66.66 0 0 0 .22.5.87.87 0 0 0 .58.2c.25 0 .45-.07.6-.2a.71.71 0 0 0 .21-.56.97.97 0 0 0-.06-.36.61.61 0 0 0-.18-.25.74.74 0 0 0-.28-.15 1.33 1.33 0 0 0-.37-.04h-.55V9.7z" fill="${t}"/>
  </svg>`},Ic=e=>{let t=e.fgColor;return`${ht}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${e.bgColor}"/>
  <path d="M8.182 12.4h3.636l.655 1.6H14l-3.454-8H9.455L6 14h1.527l.655-1.6zM10 7.44l1.36 3.651H8.64L10 7.441z" fill="${t}"/>
</svg>`},Tc=e=>{let t=e.fgColor;return`${ht}
    <path
        d="M16.2222 2H3.77778C2.8 2 2 2.8 2 3.77778V16.2222C2 17.2 2.8 18 3.77778 18H16.2222C17.2 18 17.9911 17.2 17.9911 16.2222L18 3.77778C18 2.8 17.2 2 16.2222 2Z"
        fill="${e.bgColor}"
    />
    <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M7.66667 6.66669C5.73368 6.66669 4.16667 8.15907 4.16667 10C4.16667 11.841 5.73368 13.3334 7.66667 13.3334H12.3333C14.2663 13.3334 15.8333 11.841 15.8333 10C15.8333 8.15907 14.2663 6.66669 12.3333 6.66669H7.66667ZM12.5 12.5C13.8807 12.5 15 11.3807 15 10C15 8.61931 13.8807 7.50002 12.5 7.50002C11.1193 7.50002 10 8.61931 10 10C10 11.3807 11.1193 12.5 12.5 12.5Z"
        fill="${t}"
    />
</svg>`},kl=e=>{let t=e.fgColor;return`${ht}
<path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${e.bgColor}"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M10.29 4.947a3.368 3.368 0 014.723.04 3.375 3.375 0 01.041 4.729l-.009.009-1.596 1.597a3.367 3.367 0 01-5.081-.364.71.71 0 011.136-.85 1.95 1.95 0 002.942.21l1.591-1.593a1.954 1.954 0 00-.027-2.733 1.95 1.95 0 00-2.732-.027l-.91.907a.709.709 0 11-1.001-1.007l.915-.911.007-.007z" fill="${t}"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M6.55 8.678a3.368 3.368 0 015.082.364.71.71 0 01-1.136.85 1.95 1.95 0 00-2.942-.21l-1.591 1.593a1.954 1.954 0 00.027 2.733 1.95 1.95 0 002.73.028l.906-.906a.709.709 0 111.003 1.004l-.91.91-.008.01a3.368 3.368 0 01-4.724-.042 3.375 3.375 0 01-.041-4.728l.009-.009L6.55 8.678z" fill="${t}"/>
</svg>
  `};const Pc={headerRowID:Mc,headerNumber:Ec,headerCode:Rc,headerString:Ic,headerBoolean:Tc,headerAudioUri:kl,headerVideoUri:e=>{let t=e.fgColor;return`${ht}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${e.bgColor}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7 13.138a.5.5 0 00.748.434l5.492-3.138a.5.5 0 000-.868L7.748 6.427A.5.5 0 007 6.862v6.276z" fill="${t}"/>
</svg>`},headerEmoji:e=>{let t=e.fgColor;return`
    ${ht}
    <path d="M10 5a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 9.17A4.17 4.17 0 0 1 5.83 10 4.17 4.17 0 0 1 10 5.83 4.17 4.17 0 0 1 14.17 10 4.17 4.17 0 0 1 10 14.17z" fill="${t}"/>
    <path d="M8.33 8.21a.83.83 0 1 0-.03 1.67.83.83 0 0 0 .03-1.67zm3.34 0a.83.83 0 1 0-.04 1.67.83.83 0 0 0 .04-1.67z" fill="${t}"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M14.53 13.9a2.82 2.82 0 0 1-5.06 0l.77-.38a1.97 1.97 0 0 0 3.52 0l.77.39z" fill="${t}"/>
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${e.bgColor}"/>
    <path d="M10 4a6 6 0 1 0 0 12 6 6 0 0 0 0-12zm0 11a5 5 0 1 1 .01-10.01A5 5 0 0 1 10 15z" fill="${t}"/>
    <path d="M8 7.86a1 1 0 1 0-.04 2 1 1 0 0 0 .04-2zm4 0a1 1 0 1 0-.04 2 1 1 0 0 0 .04-2z" fill="${t}"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M12.53 11.9a2.82 2.82 0 0 1-5.06 0l.77-.38a1.97 1.97 0 0 0 3.52 0l.77.39z" fill="${t}"/>
  </svg>`},headerImage:e=>{let t=e.fgColor;return`${ht}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${e.bgColor}"/>
  <path opacity=".5" fill-rule="evenodd" clip-rule="evenodd" d="M12.499 10.801a.5.5 0 01.835 0l2.698 4.098a.5.5 0 01-.418.775H10.22a.5.5 0 01-.417-.775l2.697-4.098z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.07 8.934a.5.5 0 01.824 0l4.08 5.958a.5.5 0 01-.412.782h-8.16a.5.5 0 01-.413-.782l4.08-5.958zM13.75 8.333a2.083 2.083 0 100-4.166 2.083 2.083 0 000 4.166z" fill="${t}"/>
</svg>`},headerUri:kl,headerPhone:e=>`
    ${ht}
    <path fill="${e.fgColor}" d="M3 3h14v14H3z"/>
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2zm-7.24 9.78h1.23c.15 0 .27.06.36.18l.98 1.28a.43.43 0 0 1-.05.58l-1.2 1.21a.45.45 0 0 1-.6.04A6.72 6.72 0 0 1 7.33 10c0-.61.1-1.2.25-1.78a6.68 6.68 0 0 1 2.12-3.3.44.44 0 0 1 .6.04l1.2 1.2c.16.17.18.42.05.59l-.98 1.29a.43.43 0 0 1-.36.17H8.98A5.38 5.38 0 0 0 8.67 10c0 .62.11 1.23.3 1.79z" fill="${e.bgColor}"/>
  </svg>`,headerMarkdown:e=>{let t=e.fgColor;return`
    ${ht}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${e.bgColor}"/>
    <path d="m13.49 13.15-2.32-3.27h1.4V7h1.86v2.88h1.4l-2.34 3.27zM11 13H9v-3l-1.5 1.92L6 10v3H4V7h2l1.5 2L9 7h2v6z" fill="${t}"/>
  </svg>`},headerDate:e=>{let t=e.fgColor;return`${ht}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${e.bgColor}"/>
  <path d="M14.8 4.182h-.6V3H13v1.182H7V3H5.8v1.182h-.6c-.66 0-1.2.532-1.2 1.182v9.454C4 15.468 4.54 16 5.2 16h9.6c.66 0 1.2-.532 1.2-1.182V5.364c0-.65-.54-1.182-1.2-1.182zm0 10.636H5.2V7.136h9.6v7.682z" fill="${t}"/>
</svg>`},headerTime:e=>{let t=e.fgColor;return`
    ${ht}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${e.bgColor}"/>
    <path d="M10 4a6 6 0 0 0-6 6 6 6 0 0 0 6 6 6 6 0 0 0 6-6 6 6 0 0 0-6-6zm0 10.8A4.8 4.8 0 0 1 5.2 10a4.8 4.8 0 1 1 4.8 4.8z" fill="${t}"/>
    <path d="M10 7H9v3.93L12.5 13l.5-.8-3-1.76V7z" fill="${t}"/>
  </svg>`},headerEmail:e=>{let t=e.fgColor;return`${ht}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${e.bgColor}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10 8.643a1.357 1.357 0 100 2.714 1.357 1.357 0 000-2.714zM7.357 10a2.643 2.643 0 115.286 0 2.643 2.643 0 01-5.286 0z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.589 4.898A5.643 5.643 0 0115.643 10v.5a2.143 2.143 0 01-4.286 0V8a.643.643 0 011.286 0v2.5a.857.857 0 001.714 0V10a4.357 4.357 0 10-1.708 3.46.643.643 0 01.782 1.02 5.643 5.643 0 11-5.842-9.582z" fill="${t}"/>
</svg>`},headerReference:e=>{let t=e.fgColor,r=e.bgColor;return`
    ${ht}
    <rect x="2" y="8" width="10" height="8" rx="2" fill="${r}"/>
    <rect x="8" y="4" width="10" height="8" rx="2" fill="${r}"/>
    <path d="M10.68 7.73V6l2.97 3.02-2.97 3.02v-1.77c-2.13 0-3.62.7-4.68 2.2.43-2.15 1.7-4.31 4.68-4.74z" fill="${t}"/>
  </svg>`},headerIfThenElse:e=>`${ht}
  <path fill="${e.fgColor}" d="M4 3h12v14H4z"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M3.6 2A1.6 1.6 0 002 3.6v12.8A1.6 1.6 0 003.6 18h12.8a1.6 1.6 0 001.6-1.6V3.6A1.6 1.6 0 0016.4 2H3.6zm11.3 10.8a.7.7 0 01.7.7v1.4a.7.7 0 01-.7.7h-1.4a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.6-.693.117.117 0 00.1-.115V10.35a.117.117 0 00-.117-.116h-2.8a.117.117 0 00-.117.116v2.333c0 .064.053.117.117.117h.117a.7.7 0 01.7.7v1.4a.7.7 0 01-.7.7H9.3a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.7-.7h.117a.117.117 0 00.117-.117V10.35a.117.117 0 00-.117-.117h-2.8a.117.117 0 00-.117.117v2.342c0 .058.042.106.1.115a.7.7 0 01.6.693v1.4a.7.7 0 01-.7.7H5.1a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.7-.7h.35a.116.116 0 00.116-.117v-2.45c0-.515.418-.933.934-.933h2.917a.117.117 0 00.117-.117V6.85a.117.117 0 00-.117-.116h-2.45a.7.7 0 01-.7-.7V5.1a.7.7 0 01.7-.7h6.067a.7.7 0 01.7.7v.934a.7.7 0 01-.7.7h-2.45a.117.117 0 00-.118.116v2.333c0 .064.053.117.117.117H13.5c.516 0 .934.418.934.934v2.45c0 .063.052.116.116.116h.35z" fill="${e.bgColor}"/>
</svg>`,headerSingleValue:e=>{let t=e.fgColor;return`
    ${ht}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${e.bgColor}"/>
    <path d="M9.98 13.33c.45 0 .74-.3.73-.75l-.01-.1-.16-1.67 1.45 1.05a.81.81 0 0 0 .5.18c.37 0 .72-.32.72-.76 0-.3-.17-.54-.49-.68l-1.63-.77 1.63-.77c.32-.14.49-.37.49-.67 0-.45-.34-.76-.71-.76a.81.81 0 0 0-.5.18l-1.47 1.03.16-1.74.01-.08c.01-.46-.27-.76-.72-.76-.46 0-.76.32-.75.76l.01.08.16 1.74-1.47-1.03a.77.77 0 0 0-.5-.18.74.74 0 0 0-.72.76c0 .3.17.53.49.67l1.63.77-1.62.77c-.32.14-.5.37-.5.68 0 .44.35.75.72.75a.78.78 0 0 0 .5-.17L9.4 10.8l-.16 1.68v.09c-.02.44.28.75.74.75z" fill="${t}"/>
  </svg>`},headerLookup:e=>{let t=e.fgColor;return`
    ${ht}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${e.bgColor}"/>
    <path d="M8 5.83H5.83a.83.83 0 0 0 0 1.67h1.69A4.55 4.55 0 0 1 8 5.83zm-.33 3.34H5.83a.83.83 0 0 0 0 1.66h2.72a4.57 4.57 0 0 1-.88-1.66zM5.83 12.5a.83.83 0 0 0 0 1.67h7.5a.83.83 0 1 0 0-1.67h-7.5zm8.8-2.9a3.02 3.02 0 0 0 .46-1.6c0-1.66-1.32-3-2.94-3C10.52 5 9.2 6.34 9.2 8s1.31 3 2.93 3c.58 0 1.11-.17 1.56-.47l2.04 2.08.93-.94-2.04-2.08zm-2.48.07c-.9 0-1.63-.75-1.63-1.67s.73-1.67 1.63-1.67c.9 0 1.63.75 1.63 1.67s-.73 1.67-1.63 1.67z" fill="${t}"/>
  </svg>`},headerTextTemplate:e=>{let t=e.fgColor;return`${ht}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${e.bgColor}"/>
  <path d="M7.676 4.726V3l2.976 3.021-2.976 3.022v-1.77c-2.125 0-3.613.69-4.676 2.201.425-2.158 1.7-4.316 4.676-4.748zM10.182 14.4h3.636l.655 1.6H16l-3.454-8h-1.091L8 16h1.527l.655-1.6zM12 9.44l1.36 3.65h-2.72L12 9.44z" fill="${t}"/>
</svg>`},headerMath:e=>{let t=e.fgColor;return`${ht}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${e.bgColor}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.167 5.417a.833.833 0 100 1.666h4.166a.833.833 0 100-1.666H4.167z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.083 4.167a.833.833 0 10-1.666 0v4.166a.833.833 0 101.666 0V4.167zM11.667 5.417a.833.833 0 100 1.666h4.166a.833.833 0 100-1.666h-4.166zM5.367 11.688a.833.833 0 00-1.179 1.179l2.947 2.946a.833.833 0 001.178-1.178l-2.946-2.947z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.313 12.867a.833.833 0 10-1.178-1.179l-2.947 2.947a.833.833 0 101.179 1.178l2.946-2.946z" fill="${t}"/>
  <path d="M10.833 12.5c0-.46.373-.833.834-.833h4.166a.833.833 0 110 1.666h-4.166a.833.833 0 01-.834-.833zM10.833 15c0-.46.373-.833.834-.833h4.166a.833.833 0 110 1.666h-4.166a.833.833 0 01-.834-.833z" fill="${t}"/>
</svg>`},headerRollup:e=>{let t=e.fgColor;return`
    ${ht}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${e.bgColor}"/>
    <path d="M10 8.84a1.16 1.16 0 1 0 0 2.32 1.16 1.16 0 0 0 0-2.32zm3.02 3.61a3.92 3.92 0 0 0 .78-3.28.49.49 0 1 0-.95.2c.19.87-.02 1.78-.58 2.47a2.92 2.92 0 1 1-4.13-4.08 2.94 2.94 0 0 1 2.43-.62.49.49 0 1 0 .17-.96 3.89 3.89 0 1 0 2.28 6.27zM10 4.17a5.84 5.84 0 0 0-5.44 7.93.49.49 0 1 0 .9-.35 4.86 4.86 0 1 1 2.5 2.67.49.49 0 1 0-.4.88c.76.35 1.6.54 2.44.53a5.83 5.83 0 0 0 0-11.66zm3.02 3.5a.7.7 0 1 0-1.4 0 .7.7 0 0 0 1.4 0zm-6.97 5.35a.7.7 0 1 1 0 1.4.7.7 0 0 1 0-1.4z" fill="${t}"/>
  </svg>`},headerJoinStrings:e=>{let t=e.fgColor;return`${ht}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${e.bgColor}"/>
  <path d="M12.4 13.565c1.865-.545 3.645-2.083 3.645-4.396 0-1.514-.787-2.604-2.071-2.604C12.69 6.565 12 7.63 12 8.939c1.114.072 1.865.726 1.865 1.683 0 .933-.8 1.647-1.84 2.023l.375.92zM4 5h6v2H4zM4 9h5v2H4zM4 13h4v2H4z" fill="${t}"/>
</svg>`},headerSplitString:e=>{let t=e.fgColor;return`
    ${ht}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${e.bgColor}"/>
    <path d="M12.4 13.56c1.86-.54 3.65-2.08 3.65-4.4 0-1.5-.8-2.6-2.08-2.6S12 7.64 12 8.95c1.11.07 1.86.73 1.86 1.68 0 .94-.8 1.65-1.83 2.03l.37.91zM4 5h6v2H4zm0 4h5v2H4zm0 4h4v2H4z" fill="${t}"/>
  </svg>`},headerGeoDistance:e=>{let t=e.fgColor;return`${ht}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${e.bgColor}"/>
  <path d="M10 7a1 1 0 100-2v2zm0 6a1 1 0 100 2v-2zm0-8H7v2h3V5zm-3 6h5V9H7v2zm5 2h-2v2h2v-2zm1-1a1 1 0 01-1 1v2a3 3 0 003-3h-2zm-1-1a1 1 0 011 1h2a3 3 0 00-3-3v2zM4 8a3 3 0 003 3V9a1 1 0 01-1-1H4zm3-3a3 3 0 00-3 3h2a1 1 0 011-1V5z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.856 12.014a.5.5 0 00-.712.702L5.409 14l-1.265 1.284a.5.5 0 00.712.702l1.255-1.274 1.255 1.274a.5.5 0 00.712-.702L6.813 14l1.265-1.284a.5.5 0 00-.712-.702L6.11 13.288l-1.255-1.274zM12.856 4.014a.5.5 0 00-.712.702L13.409 6l-1.265 1.284a.5.5 0 10.712.702l1.255-1.274 1.255 1.274a.5.5 0 10.712-.702L14.813 6l1.265-1.284a.5.5 0 00-.712-.702L14.11 5.288l-1.255-1.274z" fill="${t}"/>
</svg>`},headerArray:e=>{let t=e.fgColor;return`${ht}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${e.bgColor}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M14.25 7.25a.75.75 0 000-1.5h-6.5a.75.75 0 100 1.5h6.5zM15 10a.75.75 0 01-.75.75h-6.5a.75.75 0 010-1.5h6.5A.75.75 0 0115 10zm-.75 4.25a.75.75 0 000-1.5h-6.5a.75.75 0 000 1.5h6.5zm-8.987-7a.75.75 0 100-1.5.75.75 0 000 1.5zm.75 2.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm-.75 4.25a.75.75 0 100-1.5.75.75 0 000 1.5z" fill="${t}"/>
</svg>`},rowOwnerOverlay:e=>{let t=e.fgColor;return`
    <svg width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M2 15v1h14v-2.5c0-.87-.44-1.55-.98-2.04a6.19 6.19 0 0 0-1.9-1.14 12.1 12.1 0 0 0-2.48-.67A4 4 0 1 0 5 6a4 4 0 0 0 2.36 3.65c-.82.13-1.7.36-2.48.67-.69.28-1.37.65-1.9 1.13A2.8 2.8 0 0 0 2 13.5V15z" fill="${e.bgColor}" stroke="${t}" stroke-width="2"/>
  </svg>`},protectedColumnOverlay:e=>{let t=e.fgColor;return`
    <svg width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M12.43 6.04v-.18a3.86 3.86 0 0 0-7.72 0v.18A2.15 2.15 0 0 0 3 8.14v5.72C3 15.04 3.96 16 5.14 16H12c1.18 0 2.14-.96 2.14-2.14V8.14c0-1.03-.73-1.9-1.71-2.1zM7.86 6v-.14a.71.71 0 1 1 1.43 0V6H7.86z" fill="${e.bgColor}" stroke="${t}" stroke-width="2"/>
  </svg>
`},renameIcon:e=>{let t=e.bgColor;return`${ht}
    <path stroke="${t}" stroke-width="2" d="M12 3v14"/>
    <path stroke="${t}" stroke-width="2" stroke-linecap="round" d="M10 4h4m-4 12h4"/>
    <path d="M11 14h4a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3h-4v2h4a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-4v2ZM9.5 8H5a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h4.5v2H5a3 3 0 0 1-3-3V9a3 3 0 0 1 3-3h4.5v2Z" fill="${t}"/>
  </svg>
`}};function Oc(e,t){return e==="normal"?[t.bgIconHeader,t.fgIconHeader]:e==="selected"?["white",t.accentColor]:[t.accentColor,t.bgHeader]}var Dc=class{constructor(e,t){tt(this,"onSettled");tt(this,"spriteMap",new Map);tt(this,"headerIcons");tt(this,"inFlight",0);this.onSettled=t,this.headerIcons=e??{}}drawSprite(e,t,r,n,o,i,a,l=1){let[s,c]=Oc(t,a),u=i*Math.ceil(window.devicePixelRatio),h=`${s}_${c}_${u}_${e}`,p=this.spriteMap.get(h);if(p===void 0){let m=this.headerIcons[e];if(m===void 0)return;p=document.createElement("canvas");let f=p.getContext("2d");if(f===null)return;let v=new Image;v.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(m({fgColor:c,bgColor:s}))}`,this.spriteMap.set(h,p);let k=v.decode();if(k===void 0)return;this.inFlight++,k.then(()=>{f.drawImage(v,0,0,u,u)}).finally(()=>{this.inFlight--,this.inFlight===0&&this.onSettled()})}else l<1&&(r.globalAlpha=l),r.drawImage(p,0,0,u,u,n,o,i,i),l<1&&(r.globalAlpha=1)}};function Ml(e){if(e.length===0)return;let t;for(let r of e)t=Math.min(t??r.y,r.y)}function bo(e,t,r,n,o,i,a,l,s){l??(l=t);let c=t,u=e,h=n-i,p=!1;for(;c<r&&u<h;){let m=o(u);if(c+m>l&&s(c,u,m,!1,a&&u===n-1)===!0){p=!0;break}c+=m,u++}if(!p){c=r;for(let m=0;m<i;m++){u=n-1-m;let f=o(u);c-=f,s(c,u,f,!0,a&&u===n-1)}}}function zr(e,t,r,n,o,i){let a=0,l=0,s=o+n;for(let c of e){if(i(c,c.sticky?l:a+r,s,c.sticky?0:l,t)===!0)break;a+=c.width,l+=c.sticky?c.width:0}}function Rl(e,t,r,n,o){let i=0,a=0;for(let l=0;l<e.length;l++){let s=e[l],c=l+1,u=s.width;for(s.sticky&&(a+=u);c<e.length&&_n(e[c].group,s.group)&&e[c].sticky===e[l].sticky;){let v=e[c];u+=v.width,c++,l++,v.sticky&&(a+=v.width)}let h=s.sticky?0:r,p=i+h,m=s.sticky?0:Math.max(0,a-p),f=Math.min(u-m,t-(p+m));o([s.sourceIndex,e[c-1].sourceIndex],s.group??"",p+m,0,f,n),i+=u}}function El(e,t,r,n,o,i,a){var p;let[l,s]=e,c,u,h=((p=a.find(m=>!m.sticky))==null?void 0:p.sourceIndex)??0;if(s>h){let m=Math.max(l,h),f=t,v=n;for(let k=i.sourceIndex-1;k>=m;k--)f-=a[k].width,v+=a[k].width;for(let k=i.sourceIndex+1;k<=s;k++)v+=a[k].width;u={x:f,y:r,width:v,height:o}}if(h>l){let m=Math.min(s,h-1),f=t,v=n;for(let k=i.sourceIndex-1;k>=l;k--)f-=a[k].width,v+=a[k].width;for(let k=i.sourceIndex+1;k<=m;k++)v+=a[k].width;c={x:f,y:r,width:v,height:o}}return[c,u]}function Hc(e,t,r,n){if(n==="any")return Il(e,{x:t,y:r,width:1,height:1});if(n==="vertical"&&(t=e.x),n==="horizontal"&&(r=e.y),ll([t,r],e))return;let o=t-e.x,i=e.x+e.width-t,a=r-e.y+1,l=e.y+e.height-r,s=Math.min(n==="vertical"?2**53-1:o,n==="vertical"?2**53-1:i,n==="horizontal"?2**53-1:a,n==="horizontal"?2**53-1:l);return s===l?{x:e.x,y:e.y+e.height,width:e.width,height:r-e.y-e.height+1}:s===a?{x:e.x,y:r,width:e.width,height:e.y-r}:s===i?{x:e.x+e.width,y:e.y,width:t-e.x-e.width+1,height:e.height}:{x:t,y:e.y,width:e.x-t,height:e.height}}function Xn(e,t,r,n,o,i,a,l){return e<=o+a&&o<=e+r&&t<=i+l&&i<=t+n}function qr(e,t,r){return t>=e.x&&t<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function Il(e,t){let r=Math.min(e.x,t.x),n=Math.min(e.y,t.y);return{x:r,y:n,width:Math.max(e.x+e.width,t.x+t.width)-r,height:Math.max(e.y+e.height,t.y+t.height)-n}}function zc(e,t){return e.x<=t.x&&e.y<=t.y&&e.x+e.width>=t.x+t.width&&e.y+e.height>=t.y+t.height}function Ac(e,t,r,n){if(e.x>t||e.y>r||e.x<0&&e.y<0&&e.x+e.width>t&&e.y+e.height>r)return;if(e.x>=0&&e.y>=0&&e.x+e.width<=t&&e.y+e.height<=r)return e;let o=t+4,i=r+4,a=-4-e.x,l=e.x+e.width-o,s=-4-e.y,c=e.y+e.height-i,u=a>0?e.x+Math.floor(a/n)*n:e.x,h=l>0?e.x+e.width-Math.floor(l/n)*n:e.x+e.width,p=s>0?e.y+Math.floor(s/n)*n:e.y,m=c>0?e.y+e.height-Math.floor(c/n)*n:e.y+e.height;return{x:u,y:p,width:h-u,height:m-p}}function Lc(e,t,r,n,o){let[i,a,l,s]=t,[c,u,h,p]=o,{x:m,y:f,width:v,height:k}=e,M=[];if(v<=0||k<=0)return M;let y=m+v,S=f+k,T=m<i,P=f<a,E=m+v>l,z=f+k>s,F=m>=i&&m<l||y>i&&y<=l||m<i&&y>l,C=f>=a&&f<s||S>a&&S<=s||f<a&&S>s;if(F&&C){let R=Math.max(m,i),L=Math.max(f,a),x=Math.min(y,l),w=Math.min(S,s);M.push({rect:{x:R,y:L,width:x-R,height:w-L},clip:{x:c,y:u,width:h-c+1,height:p-u+1}})}if(T&&P){let R=m,L=f,x=Math.min(y,i),w=Math.min(S,a);M.push({rect:{x:R,y:L,width:x-R,height:w-L},clip:{x:0,y:0,width:c+1,height:u+1}})}if(P&&F){let R=Math.max(m,i),L=f,x=Math.min(y,l),w=Math.min(S,a);M.push({rect:{x:R,y:L,width:x-R,height:w-L},clip:{x:c,y:0,width:h-c+1,height:u+1}})}if(P&&E){let R=Math.max(m,l),L=f,x=y,w=Math.min(S,a);M.push({rect:{x:R,y:L,width:x-R,height:w-L},clip:{x:h,y:0,width:r-h+1,height:u+1}})}if(T&&C){let R=m,L=Math.max(f,a),x=Math.min(y,i),w=Math.min(S,s);M.push({rect:{x:R,y:L,width:x-R,height:w-L},clip:{x:0,y:u,width:c+1,height:p-u+1}})}if(E&&C){let R=Math.max(m,l),L=Math.max(f,a),x=y,w=Math.min(S,s);M.push({rect:{x:R,y:L,width:x-R,height:w-L},clip:{x:h,y:u,width:r-h+1,height:p-u+1}})}if(T&&z){let R=m,L=Math.max(f,s),x=Math.min(y,i),w=S;M.push({rect:{x:R,y:L,width:x-R,height:w-L},clip:{x:0,y:p,width:c+1,height:n-p+1}})}if(z&&F){let R=Math.max(m,i),L=Math.max(f,s),x=Math.min(y,l),w=S;M.push({rect:{x:R,y:L,width:x-R,height:w-L},clip:{x:c,y:p,width:h-c+1,height:n-p+1}})}if(E&&z){let R=Math.max(m,l),L=Math.max(f,s),x=y,w=S;M.push({rect:{x:R,y:L,width:x-R,height:w-L},clip:{x:h,y:p,width:r-h+1,height:n-p+1}})}return M}var Fc={kind:pe.Loading,allowOverlay:!1};function Tl(e,t,r,n,o,i,a,l,s,c,u,h,p,m,f,v,k,M,y,S,T,P,E,z,F,C,R,L,x,w,I,O,b,G,_){let Z=(S==null?void 0:S.size)??9007199254740991,ee=performance.now(),V=w.baseFontFull;e.font=V;let se={ctx:e},oe=[0,0],ue=k>0?Ur(s,k,c):0,Te,te,X=Ml(y);return zr(t,l,i,a,o,(J,re,ae,_e,Le)=>{let Se=Math.max(0,_e-re),$e=re+Se,De=o+1,ct=J.width-Se,ut=n-o-1;if(y.length>0){let Ve=!1;for(let Ne=0;Ne<y.length;Ne++){let Ge=y[Ne];if(Xn($e,De,ct,ut,Ge.x,Ge.y,Ge.width,Ge.height)){Ve=!0;break}}if(!Ve)return}let Ze=()=>{e.save(),e.beginPath(),e.rect($e,De,ct,ut),e.clip()},le=T.columns.hasIndex(J.sourceIndex),Re=h(J.group??"").overrideTheme,Pe=J.themeOverride===void 0&&Re===void 0?w:Or(w,Re,J.themeOverride),Ke=Pe.baseFontFull;Ke!==V&&(V=Ke,e.font=Ke),Ze();let be;return bo(Le,ae,n,s,c,k,M,X,(Ve,Ne,Ge,me,ye)=>{var mr,lr,Zt;if(Ne<0||(oe[0]=J.sourceIndex,oe[1]=Ne,S!==void 0&&!S.has(oe)))return;if(y.length>0){let Xe=!1;for(let xt=0;xt<y.length;xt++){let Mt=y[xt];if(Xn(re,Ve,J.width,Ge,Mt.x,Mt.y,Mt.width,Mt.height)){Xe=!0;break}}if(!Xe)return}let rt=T.rows.hasIndex(Ne),qe=m.hasIndex(Ne),Ue=Ne<s?u(oe):Fc,pt=re,et=J.width,He=!1,St=!1;if(Ue.span!==void 0){let[Xe,xt]=Ue.span,Mt=`${Ne},${Xe},${xt},${J.sticky}`;if(te===void 0&&(te=new Set),te.has(Mt)){Z--;return}else{let Bt=El(Ue.span,re,Ve,J.width,Ge,J,r),Ot=J.sticky?Bt[0]:Bt[1];if(!J.sticky&&Bt[0]!==void 0&&(St=!0),Ot!==void 0){pt=Ot.x,et=Ot.width,te.add(Mt),e.restore(),be=void 0,e.save(),e.beginPath();let Kt=Math.max(0,_e-Ot.x);e.rect(Ot.x+Kt,Ve,Ot.width-Kt,Ge),Te===void 0&&(Te=[]),Te.push({x:Ot.x+Kt,y:Ve,width:Ot.width-Kt,height:Ge}),e.clip(),He=!0}}}let At=p==null?void 0:p(Ne),kt=ye&&((mr=J.trailingRowOptions)==null?void 0:mr.themeOverride)!==void 0?(lr=J.trailingRowOptions)==null?void 0:lr.themeOverride:void 0,Et=Ue.themeOverride===void 0&&At===void 0&&kt===void 0?Pe:Or(Pe,At,kt,Ue.themeOverride);e.beginPath();let _t=Xs(oe,Ue,T),wt=Ks(oe,Ue,T,v),pr=Ue.span!==void 0&&T.columns.some(Xe=>Ue.span!==void 0&&Xe>=Ue.span[0]&&Xe<=Ue.span[1]);_t&&!f&&v?wt=0:_t&&v&&(wt=Math.max(wt,1)),pr&&wt++,_t||(rt&&wt++,le&&!ye&&wt++);let Lr=Ue.kind===pe.Protected?Et.bgCellMedium:Et.bgCell,ft;if((me||Lr!==w.bgCell)&&(ft=fr(Lr,ft)),wt>0||qe){qe&&(ft=fr(Et.bgHeader,ft));for(let Xe=0;Xe<wt;Xe++)ft=fr(Et.accentLight,ft)}else if(P!==void 0){for(let Xe of P)if(Xe[0]===J.sourceIndex&&Xe[1]===Ne){ft=fr(Et.bgSearchResult,ft);break}}if(E!==void 0)for(let Xe=0;Xe<E.length;Xe++){let xt=E[Xe],Mt=xt.range;xt.style!=="solid-outline"&&Mt.x<=J.sourceIndex&&J.sourceIndex<Mt.x+Mt.width&&Mt.y<=Ne&&Ne<Mt.y+Mt.height&&(ft=fr(xt.color,ft))}let kr=!1;if(S!==void 0){let Xe=Ve+1,xt=(me?Xe+Ge-1:Math.min(Xe+Ge-1,n-ue))-Xe;(xt!==Ge-1||pt+1<=_e)&&(kr=!0,e.save(),e.beginPath(),e.rect(pt+1,Xe,et-1,xt),e.clip()),ft=ft===void 0?Et.bgCell:fr(ft,Et.bgCell)}let ir=J.sourceIndex===r.length-1,Me=Ne===s-1;ft!==void 0&&(e.fillStyle=ft,be!==void 0&&(be.fillStyle=ft),S===void 0?e.fillRect(pt,Ve,et,Ge):e.fillRect(pt+1,Ve+1,et-(ir?2:1),Ge-(Me?2:1))),Ue.style==="faded"&&(e.globalAlpha=.6);let yt;for(let Xe=0;Xe<C.length;Xe++){let xt=C[Xe];if(xt.item[0]===J.sourceIndex&&xt.item[1]===Ne){yt=xt;break}}if(et>_&&!St){let Xe=Et.baseFontFull;Xe!==V&&(e.font=Xe,V=Xe),be=Pl(e,Ue,J.sourceIndex,Ne,ir,Me,pt,Ve,et,Ge,wt>0,Et,ft??Et.bgCell,z,F,(yt==null?void 0:yt.hoverAmount)??0,R,x,ee,L,be,I,O,b,G)}return kr&&e.restore(),Ue.style==="faded"&&(e.globalAlpha=1),Z--,He&&(e.restore(),(Zt=be==null?void 0:be.deprep)==null||Zt.call(be,se),be=void 0,Ze(),V=Ke,e.font=Ke),Z<=0}),e.restore(),Z<=0}),Te}var Kn=[0,0],Vn={x:0,y:0,width:0,height:0},fi=[void 0,()=>{}],gi=!1;function jc(){gi=!0}function Pl(e,t,r,n,o,i,a,l,s,c,u,h,p,m,f,v,k,M,y,S,T,P,E,z,F){var O,b;let C,R;k!==void 0&&k[0][0]===r&&k[0][1]===n&&(C=k[1][0],R=k[1][1]);let L;Kn[0]=r,Kn[1]=n,Vn.x=a,Vn.y=l,Vn.width=s,Vn.height=c,fi[0]=E.getValue(Kn),fi[1]=G=>E.setValue(Kn,G),gi=!1;let x={ctx:e,theme:h,col:r,row:n,cell:t,rect:Vn,highlighted:u,cellFillColor:p,hoverAmount:v,frameTime:y,hoverX:C,drawState:fi,hoverY:R,imageLoader:m,spriteManager:f,hyperWrapping:M,overrideCursor:C===void 0?void 0:F,requestAnimationFrame:jc},w=Js(x,t.lastUpdated,y,T,o,i),I=z(t);if(I!==void 0){(T==null?void 0:T.renderer)!==I&&((O=T==null?void 0:T.deprep)==null||O.call(T,x),T=void 0);let G=(b=I.drawPrep)==null?void 0:b.call(I,x,T);S!==void 0&&!Fn(x.cell)?S(x,()=>I.draw(x,t)):I.draw(x,t),L=G===void 0?void 0:{deprep:G==null?void 0:G.deprep,fillStyle:G==null?void 0:G.fillStyle,font:G==null?void 0:G.font,renderer:I}}return(w||gi)&&(P==null||P(Kn)),L}function pi(e,t,r,n,o,i,a,l,s=-20,c=-20,u=void 0,h="center",p="square"){let m=Math.floor(o+a/2),f=p==="circle"?1e4:t.roundingRadius??4,v=rl(u??t.checkboxMaxSize,a,t.cellVerticalPadding),k=v/2,M=tl(h,n,i,t.cellHorizontalPadding,v),y=el(M,m,v),S=nl(n+s,o+c,y);switch(r){case!0:e.beginPath(),gr(e,M-v/2,m-v/2,v,v,f),p==="circle"&&(k*=.8,v*=.8),e.fillStyle=l?t.accentColor:t.textMedium,e.fill(),e.beginPath(),e.moveTo(M-k+v/4.23,m-k+v/1.97),e.lineTo(M-k+v/2.42,m-k+v/1.44),e.lineTo(M-k+v/1.29,m-k+v/3.25),e.strokeStyle=t.bgCell,e.lineJoin="round",e.lineCap="round",e.lineWidth=1.9,e.stroke();break;case null:case!1:e.beginPath(),gr(e,M-v/2+.5,m-v/2+.5,v-1,v-1,f),e.lineWidth=1,e.strokeStyle=S?t.textDark:t.textMedium,e.stroke();break;case void 0:e.beginPath(),gr(e,M-v/2,m-v/2,v,v,f),e.fillStyle=S?t.textMedium:t.textLight,e.fill(),p==="circle"&&(k*=.8,v*=.8),e.beginPath(),e.moveTo(M-v/3,m),e.lineTo(M+v/3,m),e.strokeStyle=t.bgCell,e.lineCap="round",e.lineWidth=1.9,e.stroke();break;default:qo(r)}}function _c(e,t,r,n,o,i,a,l,s,c,u,h,p,m,f,v,k,M,y){var F,C,R,L;let S=a+l;if(S<=0)return;e.fillStyle=h.bgHeader,e.fillRect(0,0,o,S);let T=(F=n==null?void 0:n[0])==null?void 0:F[0],P=(C=n==null?void 0:n[0])==null?void 0:C[1],E=(R=n==null?void 0:n[1])==null?void 0:R[0],z=(L=n==null?void 0:n[1])==null?void 0:L[1];e.font=h.headerFontFull,zr(t,0,i,0,S,(x,w,I,O)=>{var X;if(k!==void 0&&!k.has([x.sourceIndex,-1]))return;let b=Math.max(0,O-w);e.save(),e.beginPath(),e.rect(w+b,l,x.width-b,a),e.clip();let G=v(x.group??"").overrideTheme,_=x.themeOverride===void 0&&G===void 0?h:Or(h,G,x.themeOverride);_.bgHeader!==h.bgHeader&&(e.fillStyle=_.bgHeader,e.fill()),_!==h&&(e.font=_.headerFontFull);let Z=u.columns.hasIndex(x.sourceIndex),ee=s!==void 0||c||x.headerRowMarkerDisabled===!0,V=!ee&&P===-1&&T===x.sourceIndex,se=ee?0:((X=m.find(J=>J.item[0]===x.sourceIndex&&J.item[1]===-1))==null?void 0:X.hoverAmount)??0,oe=(u==null?void 0:u.current)!==void 0&&u.current.cell[0]===x.sourceIndex,ue=Z?_.accentColor:oe?_.bgHeaderHasFocus:_.bgHeader,Te=r?l:0,te=x.sourceIndex===0?0:1;Z?(e.fillStyle=ue,e.fillRect(w+te,Te,x.width-te,a)):(oe||se>0)&&(e.beginPath(),e.rect(w+te,Te,x.width-te,a),oe&&(e.fillStyle=_.bgHeaderHasFocus,e.fill()),se>0&&(e.globalAlpha=se,e.fillStyle=_.bgHeaderHovered,e.fill(),e.globalAlpha=1)),zl(e,w,Te,x.width,a,x,Z,_,V,V?E:void 0,V?z:void 0,oe,se,p,M,y),e.restore()}),r&&Nc(e,t,o,i,l,n,h,p,m,f,v,k)}function Nc(e,t,r,n,o,i,a,l,s,c,u,h){let[p,m]=(i==null?void 0:i[0])??[],f=0;Rl(t,r,n,o,(v,k,M,y,S,T)=>{if(h!==void 0&&!h.hasItemInRectangle({x:v[0],y:-2,width:v[1]-v[0]+1,height:1}))return;e.save(),e.beginPath(),e.rect(M,y,S,T),e.clip();let P=u(k),E=(P==null?void 0:P.overrideTheme)===void 0?a:Or(a,P.overrideTheme),z=m===-2&&p!==void 0&&p>=v[0]&&p<=v[1],F=z?E.bgGroupHeaderHovered??E.bgHeaderHovered:E.bgGroupHeader??E.bgHeader;if(F!==a.bgHeader&&(e.fillStyle=F,e.fill()),e.fillStyle=E.textGroupHeader??E.textHeader,P!==void 0){let C=M;if(P.icon!==void 0&&(l.drawSprite(P.icon,"normal",e,C+8,(o-20)/2,20,E),C+=26),e.fillText(P.name,C+8,o/2+Hr(e,a.headerFontFull)),P.actions!==void 0&&z){let R=Ol({x:M,y,width:S,height:T},P.actions);e.beginPath();let L=R[0].x-10,x=M+S-L;e.rect(L,0,x,o);let w=e.createLinearGradient(L,0,L+x,0),I=mn(F,0);w.addColorStop(0,I),w.addColorStop(10/x,F),w.addColorStop(1,F),e.fillStyle=w,e.fill(),e.globalAlpha=.6;let[O,b]=(i==null?void 0:i[1])??[-1,-1];for(let G=0;G<P.actions.length;G++){let _=P.actions[G],Z=R[G],ee=qr(Z,O+M,b);ee&&(e.globalAlpha=1),l.drawSprite(_.icon,"normal",e,Z.x+Z.width/2-10,Z.y+Z.height/2-10,20,E),ee&&(e.globalAlpha=.6)}e.globalAlpha=1}}M!==0&&c(v[0])&&(e.beginPath(),e.moveTo(M+.5,0),e.lineTo(M+.5,o),e.strokeStyle=a.borderColor,e.lineWidth=1,e.stroke()),e.restore(),f=M+S}),e.beginPath(),e.moveTo(f+.5,0),e.lineTo(f+.5,o),e.moveTo(0,o+.5),e.lineTo(r,o+.5),e.strokeStyle=a.borderColor,e.lineWidth=1,e.stroke()}var xn=30;function Bc(e,t,r,n,o){return o?{x:e,y:t,width:xn,height:Math.min(xn,n)}:{x:e+r-xn,y:Math.max(t,t+n/2-xn/2),width:xn,height:Math.min(xn,n)}}function Ol(e,t){let r=[],n=e.x+e.width-26*t.length,o=e.y+e.height/2-13;for(let i=0;i<t.length;i++)r.push({x:n,y:o,width:26,height:26}),n+=26;return r}function Yn(e,t,r){return!r||e===void 0||(e.x=t-(e.x-t)-e.width),e}function Dl(e,t,r,n,o,i,a,l){var M;let s=a.cellHorizontalPadding,c=a.headerIconSize,u=Bc(r,n,o,i,!1),h=r+s,p=t.icon===void 0?void 0:{x:h,y:n+(i-c)/2,width:c,height:c},m=p===void 0||t.overlayIcon===void 0?void 0:{x:p.x+9,y:p.y+6,width:18,height:18};p!==void 0&&(h+=Math.ceil(c*1.3));let f={x:h,y:n,width:o-h,height:i},v;if(t.indicatorIcon!==void 0){let y=e===void 0?((M=dl(t.title,a.headerFontFull))==null?void 0:M.width)??0:bn(t.title,e,a.headerFontFull).width;f.width=y,h+=y+s,v={x:h,y:n+(i-c)/2,width:c,height:c}}let k=r+o/2;return{menuBounds:Yn(u,k,l),iconBounds:Yn(p,k,l),iconOverlayBounds:Yn(m,k,l),textBounds:Yn(f,k,l),indicatorIconBounds:Yn(v,k,l)}}function Hl(e,t,r,n,o,i,a,l,s,c,u,h,p,m,f,v){if(i.rowMarker!==void 0&&i.headerRowMarkerDisabled!==!0){let y=i.rowMarkerChecked;y!==!0&&i.headerRowMarkerAlwaysVisible!==!0&&(e.globalAlpha=h),pi(e,i.headerRowMarkerTheme===void 0?l:Or(l,i.headerRowMarkerTheme),y,t,r,n,o,!1,void 0,void 0,l.checkboxMaxSize,"center",i.rowMarker),y!==!0&&i.headerRowMarkerAlwaysVisible!==!0&&(e.globalAlpha=1);return}let k=a?l.textHeaderSelected:l.textHeader,M=i.hasMenu===!0&&(s||m&&a)&&v.menuBounds!==void 0;if(i.icon!==void 0&&v.iconBounds!==void 0){let y=a?"selected":"normal";i.style==="highlight"&&(y=a?"selected":"special"),p.drawSprite(i.icon,y,e,v.iconBounds.x,v.iconBounds.y,v.iconBounds.width,l),i.overlayIcon!==void 0&&v.iconOverlayBounds!==void 0&&p.drawSprite(i.overlayIcon,a?"selected":"special",e,v.iconOverlayBounds.x,v.iconOverlayBounds.y,v.iconOverlayBounds.width,l)}if(M&&n>35){let y=f?35:n-35,S=f?35*.7:n-35*.7,T=y/n,P=S/n,E=e.createLinearGradient(t,0,t+n,0),z=mn(k,0);E.addColorStop(f?1:0,k),E.addColorStop(T,k),E.addColorStop(P,z),E.addColorStop(f?0:1,z),e.fillStyle=E}else e.fillStyle=k;if(f&&(e.textAlign="right"),v.textBounds!==void 0&&e.fillText(i.title,f?v.textBounds.x+v.textBounds.width:v.textBounds.x,r+o/2+Hr(e,l.headerFontFull)),f&&(e.textAlign="left"),i.indicatorIcon!==void 0&&v.indicatorIconBounds!==void 0&&(!M||!Xn(v.menuBounds.x,v.menuBounds.y,v.menuBounds.width,v.menuBounds.height,v.indicatorIconBounds.x,v.indicatorIconBounds.y,v.indicatorIconBounds.width,v.indicatorIconBounds.height))){let y=a?"selected":"normal";i.style==="highlight"&&(y=a?"selected":"special"),p.drawSprite(i.indicatorIcon,y,e,v.indicatorIconBounds.x,v.indicatorIconBounds.y,v.indicatorIconBounds.width,l)}if(M&&v.menuBounds!==void 0){let y=v.menuBounds,S=c!==void 0&&u!==void 0&&qr(y,c+t,u+r);if(S||(e.globalAlpha=.7),i.menuIcon===void 0||i.menuIcon===cs.Triangle){e.beginPath();let T=y.x+y.width/2-5.5,P=y.y+y.height/2-3;tc(e,[{x:T,y:P},{x:T+11,y:P},{x:T+5.5,y:P+6}],1),e.fillStyle=k,e.fill()}else if(i.menuIcon===cs.Dots)e.beginPath(),ec(e,y.x+y.width/2,y.y+y.height/2),e.fillStyle=k,e.fill();else{let T=y.x+(y.width-l.headerIconSize)/2,P=y.y+(y.height-l.headerIconSize)/2;p.drawSprite(i.menuIcon,"normal",e,T,P,l.headerIconSize,l)}S||(e.globalAlpha=1)}}function zl(e,t,r,n,o,i,a,l,s,c,u,h,p,m,f,v){let k=ri(i.title)==="rtl",M=Dl(e,i,t,r,n,o,l,k);f===void 0?Hl(e,t,r,n,o,i,a,l,s,c,u,p,m,v,k,M):f({ctx:e,theme:l,rect:{x:t,y:r,width:n,height:o},column:i,columnIndex:i.sourceIndex,isSelected:a,hoverAmount:p,isHovered:s,hasSelectedCell:h,spriteManager:m,menuBounds:(M==null?void 0:M.menuBounds)??{x:0,y:0,height:0,width:0},hoverX:c,hoverY:u},()=>Hl(e,t,r,n,o,i,a,l,s,c,u,p,m,v,k,M))}var Wc=q(((e,t)=>{var r=fo();t.exports=(function(){try{var n=r(Object,"defineProperty");return n({},"",{}),n}catch{}})()})),$c=q(((e,t)=>{var r=Wc();function n(o,i,a){i=="__proto__"&&r?r(o,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):o[i]=a}t.exports=n})),Xc=q(((e,t)=>{function r(n,o,i,a){for(var l=-1,s=n==null?0:n.length;++l<s;){var c=n[l];o(a,c,i(c),n)}return a}t.exports=r})),Kc=q(((e,t)=>{function r(n){return function(o,i,a){for(var l=-1,s=Object(o),c=a(o),u=c.length;u--;){var h=c[n?u:++l];if(i(s[h],h,s)===!1)break}return o}}t.exports=r})),Vc=q(((e,t)=>{t.exports=Kc()()})),Yc=q(((e,t)=>{function r(n,o){for(var i=-1,a=Array(n);++i<n;)a[i]=o(i);return a}t.exports=r})),Gc=q(((e,t)=>{function r(){return!1}t.exports=r})),Al=q(((e,t)=>{var r=pn(),n=Gc(),o=typeof e=="object"&&e&&!e.nodeType&&e,i=o&&typeof t=="object"&&t&&!t.nodeType&&t,a=i&&i.exports===o?r.Buffer:void 0;t.exports=(a?a.isBuffer:void 0)||n})),Uc=q(((e,t)=>{var r=ls(),n=ss(),o=os(),i="[object Arguments]",a="[object Array]",l="[object Boolean]",s="[object Date]",c="[object Error]",u="[object Function]",h="[object Map]",p="[object Number]",m="[object Object]",f="[object RegExp]",v="[object Set]",k="[object String]",M="[object WeakMap]",y="[object ArrayBuffer]",S="[object DataView]",T="[object Float32Array]",P="[object Float64Array]",E="[object Int8Array]",z="[object Int16Array]",F="[object Int32Array]",C="[object Uint8Array]",R="[object Uint8ClampedArray]",L="[object Uint16Array]",x="[object Uint32Array]",w={};w[T]=w[P]=w[E]=w[z]=w[F]=w[C]=w[R]=w[L]=w[x]=!0,w[i]=w[a]=w[y]=w[l]=w[S]=w[s]=w[c]=w[u]=w[h]=w[p]=w[m]=w[f]=w[v]=w[k]=w[M]=!1;function I(O){return o(O)&&n(O.length)&&!!w[r(O)]}t.exports=I})),qc=q(((e,t)=>{function r(n){return function(o){return n(o)}}t.exports=r})),Jc=q(((e,t)=>{var r=ef(),n=typeof e=="object"&&e&&!e.nodeType&&e,o=n&&typeof t=="object"&&t&&!t.nodeType&&t,i=o&&o.exports===n&&r.process;t.exports=(function(){try{return o&&o.require&&o.require("util").types||i&&i.binding&&i.binding("util")}catch{}})()})),Ll=q(((e,t)=>{var r=Uc(),n=qc(),o=Jc(),i=o&&o.isTypedArray;t.exports=i?n(i):r})),Qc=q(((e,t)=>{var r=Yc(),n=as(),o=Ln(),i=Al(),a=Qa(),l=Ll(),s=Object.prototype.hasOwnProperty;function c(u,h){var p=o(u),m=!p&&n(u),f=!p&&!m&&i(u),v=!p&&!m&&!f&&l(u),k=p||m||f||v,M=k?r(u.length,String):[],y=M.length;for(var S in u)(h||s.call(u,S))&&!(k&&(S=="length"||f&&(S=="offset"||S=="parent")||v&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||a(S,y)))&&M.push(S);return M}t.exports=c})),Zc=q(((e,t)=>{var r=Object.prototype;function n(o){var i=o&&o.constructor;return o===(typeof i=="function"&&i.prototype||r)}t.exports=n})),eu=q(((e,t)=>{function r(n,o){return function(i){return n(o(i))}}t.exports=r})),tu=q(((e,t)=>{t.exports=eu()(Object.keys,Object)})),ru=q(((e,t)=>{var r=Zc(),n=tu(),o=Object.prototype.hasOwnProperty;function i(a){if(!r(a))return n(a);var l=[];for(var s in Object(a))o.call(a,s)&&s!="constructor"&&l.push(s);return l}t.exports=i})),mi=q(((e,t)=>{var r=Qc(),n=ru(),o=hi();function i(a){return o(a)?r(a):n(a)}t.exports=i})),nu=q(((e,t)=>{var r=Vc(),n=mi();function o(i,a){return i&&r(i,a,n)}t.exports=o})),ou=q(((e,t)=>{var r=hi();function n(o,i){return function(a,l){if(a==null)return a;if(!r(a))return o(a,l);for(var s=a.length,c=i?s:-1,u=Object(a);(i?c--:++c<s)&&l(u[c],c,u)!==!1;);return a}}t.exports=n})),iu=q(((e,t)=>{var r=nu();t.exports=ou()(r)})),lu=q(((e,t)=>{var r=iu();function n(o,i,a,l){return r(o,function(s,c,u){i(l,s,a(s),u)}),l}t.exports=n})),au=q(((e,t)=>{var r=Ki();function n(){this.__data__=new r,this.size=0}t.exports=n})),su=q(((e,t)=>{function r(n){var o=this.__data__,i=o.delete(n);return this.size=o.size,i}t.exports=r})),cu=q(((e,t)=>{function r(n){return this.__data__.get(n)}t.exports=r})),uu=q(((e,t)=>{function r(n){return this.__data__.has(n)}t.exports=r})),du=q(((e,t)=>{var r=Ki(),n=rs(),o=ts(),i=200;function a(l,s){var c=this.__data__;if(c instanceof r){var u=c.__data__;if(!n||u.length<i-1)return u.push([l,s]),this.size=++c.size,this;c=this.__data__=new o(u)}return c.set(l,s),this.size=c.size,this}t.exports=a})),Fl=q(((e,t)=>{var r=Ki(),n=au(),o=su(),i=cu(),a=uu(),l=du();function s(c){this.size=(this.__data__=new r(c)).size}s.prototype.clear=n,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=l,t.exports=s})),hu=q(((e,t)=>{function r(n,o){for(var i=-1,a=n==null?0:n.length;++i<a;)if(o(n[i],i,n))return!0;return!1}t.exports=r})),jl=q(((e,t)=>{var r=yl(),n=hu(),o=bl(),i=1,a=2;function l(s,c,u,h,p,m){var f=u&i,v=s.length,k=c.length;if(v!=k&&!(f&&k>v))return!1;var M=m.get(s),y=m.get(c);if(M&&y)return M==c&&y==s;var S=-1,T=!0,P=u&a?new r:void 0;for(m.set(s,c),m.set(c,s);++S<v;){var E=s[S],z=c[S];if(h)var F=f?h(z,E,S,c,s,m):h(E,z,S,s,c,m);if(F!==void 0){if(F)continue;T=!1;break}if(P){if(!n(c,function(C,R){if(!o(P,R)&&(E===C||p(E,C,u,h,m)))return P.push(R)})){T=!1;break}}else if(!(E===z||p(E,z,u,h,m))){T=!1;break}}return m.delete(s),m.delete(c),T}t.exports=l})),fu=q(((e,t)=>{t.exports=pn().Uint8Array})),gu=q(((e,t)=>{function r(n){var o=-1,i=Array(n.size);return n.forEach(function(a,l){i[++o]=[l,a]}),i}t.exports=r})),pu=q(((e,t)=>{var r=Za(),n=fu(),o=es(),i=jl(),a=gu(),l=di(),s=1,c=2,u="[object Boolean]",h="[object Date]",p="[object Error]",m="[object Map]",f="[object Number]",v="[object RegExp]",k="[object Set]",M="[object String]",y="[object Symbol]",S="[object ArrayBuffer]",T="[object DataView]",P=r?r.prototype:void 0,E=P?P.valueOf:void 0;function z(F,C,R,L,x,w,I){switch(R){case T:if(F.byteLength!=C.byteLength||F.byteOffset!=C.byteOffset)return!1;F=F.buffer,C=C.buffer;case S:return!(F.byteLength!=C.byteLength||!w(new n(F),new n(C)));case u:case h:case f:return o(+F,+C);case p:return F.name==C.name&&F.message==C.message;case v:case M:return F==C+"";case m:var O=a;case k:var b=L&s;if(O||(O=l),F.size!=C.size&&!b)return!1;var G=I.get(F);if(G)return G==C;L|=c,I.set(F,C);var _=i(O(F),O(C),L,x,w,I);return I.delete(F),_;case y:if(E)return E.call(F)==E.call(C)}return!1}t.exports=z})),mu=q(((e,t)=>{var r=Cl(),n=Ln();function o(i,a,l){var s=a(i);return n(i)?s:r(s,l(i))}t.exports=o})),vu=q(((e,t)=>{function r(n,o){for(var i=-1,a=n==null?0:n.length,l=0,s=[];++i<a;){var c=n[i];o(c,i,n)&&(s[l++]=c)}return s}t.exports=r})),wu=q(((e,t)=>{function r(){return[]}t.exports=r})),yu=q(((e,t)=>{var r=vu(),n=wu(),o=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols;t.exports=i?function(a){return a==null?[]:(a=Object(a),r(i(a),function(l){return o.call(a,l)}))}:n})),bu=q(((e,t)=>{var r=mu(),n=yu(),o=mi();function i(a){return r(a,o,n)}t.exports=i})),xu=q(((e,t)=>{var r=bu(),n=1,o=Object.prototype.hasOwnProperty;function i(a,l,s,c,u,h){var p=s&n,m=r(a),f=m.length;if(f!=r(l).length&&!p)return!1;for(var v=f;v--;){var k=m[v];if(!(p?k in l:o.call(l,k)))return!1}var M=h.get(a),y=h.get(l);if(M&&y)return M==l&&y==a;var S=!0;h.set(a,l),h.set(l,a);for(var T=p;++v<f;){k=m[v];var P=a[k],E=l[k];if(c)var z=p?c(E,P,k,l,a,h):c(P,E,k,a,l,h);if(!(z===void 0?P===E||u(P,E,s,c,h):z)){S=!1;break}T||(T=k=="constructor")}if(S&&!T){var F=a.constructor,C=l.constructor;F!=C&&"constructor"in a&&"constructor"in l&&!(typeof F=="function"&&F instanceof F&&typeof C=="function"&&C instanceof C)&&(S=!1)}return h.delete(a),h.delete(l),S}t.exports=i})),Cu=q(((e,t)=>{t.exports=fo()(pn(),"DataView")})),Su=q(((e,t)=>{t.exports=fo()(pn(),"Promise")})),ku=q(((e,t)=>{t.exports=fo()(pn(),"WeakMap")})),Mu=q(((e,t)=>{var r=Cu(),n=rs(),o=Su(),i=xl(),a=ku(),l=ls(),s=J0(),c="[object Map]",u="[object Object]",h="[object Promise]",p="[object Set]",m="[object WeakMap]",f="[object DataView]",v=s(r),k=s(n),M=s(o),y=s(i),S=s(a),T=l;(r&&T(new r(new ArrayBuffer(1)))!=f||n&&T(new n)!=c||o&&T(o.resolve())!=h||i&&T(new i)!=p||a&&T(new a)!=m)&&(T=function(P){var E=l(P),z=E==u?P.constructor:void 0,F=z?s(z):"";if(F)switch(F){case v:return f;case k:return c;case M:return h;case y:return p;case S:return m}return E}),t.exports=T})),Ru=q(((e,t)=>{var r=Fl(),n=jl(),o=pu(),i=xu(),a=Mu(),l=Ln(),s=Al(),c=Ll(),u=1,h="[object Arguments]",p="[object Array]",m="[object Object]",f=Object.prototype.hasOwnProperty;function v(k,M,y,S,T,P){var E=l(k),z=l(M),F=E?p:a(k),C=z?p:a(M);F=F==h?m:F,C=C==h?m:C;var R=F==m,L=C==m,x=F==C;if(x&&s(k)){if(!s(M))return!1;E=!0,R=!1}if(x&&!R)return P||(P=new r),E||c(k)?n(k,M,y,S,T,P):o(k,M,F,y,S,T,P);if(!(y&u)){var w=R&&f.call(k,"__wrapped__"),I=L&&f.call(M,"__wrapped__");if(w||I){var O=w?k.value():k,b=I?M.value():M;return P||(P=new r),T(O,b,y,S,P)}}return x?(P||(P=new r),i(k,M,y,S,T,P)):!1}t.exports=v})),_l=q(((e,t)=>{var r=Ru(),n=os();function o(i,a,l,s,c){return i===a?!0:i==null||a==null||!n(i)&&!n(a)?i!==i&&a!==a:r(i,a,l,s,o,c)}t.exports=o})),Eu=q(((e,t)=>{var r=Fl(),n=_l(),o=1,i=2;function a(l,s,c,u){var h=c.length,p=h,m=!u;if(l==null)return!p;for(l=Object(l);h--;){var f=c[h];if(m&&f[2]?f[1]!==l[f[0]]:!(f[0]in l))return!1}for(;++h<p;){f=c[h];var v=f[0],k=l[v],M=f[1];if(m&&f[2]){if(k===void 0&&!(v in l))return!1}else{var y=new r;if(u)var S=u(k,M,v,l,s,y);if(!(S===void 0?n(M,k,o|i,u,y):S))return!1}}return!0}t.exports=a})),Nl=q(((e,t)=>{var r=ho();function n(o){return o===o&&!r(o)}t.exports=n})),Iu=q(((e,t)=>{var r=Nl(),n=mi();function o(i){for(var a=n(i),l=a.length;l--;){var s=a[l],c=i[s];a[l]=[s,c,r(c)]}return a}t.exports=o})),Bl=q(((e,t)=>{function r(n,o){return function(i){return i==null?!1:i[n]===o&&(o!==void 0||n in Object(i))}}t.exports=r})),Tu=q(((e,t)=>{var r=Eu(),n=Iu(),o=Bl();function i(a){var l=n(a);return l.length==1&&l[0][2]?o(l[0][0],l[0][1]):function(s){return s===a||r(s,a,l)}}t.exports=i})),Wl=q(((e,t)=>{var r=q0(),n=Vi();function o(i,a){a=r(a,i);for(var l=0,s=a.length;i!=null&&l<s;)i=i[n(a[l++])];return l&&l==s?i:void 0}t.exports=o})),Pu=q(((e,t)=>{var r=Wl();function n(o,i,a){var l=o==null?void 0:r(o,i);return l===void 0?a:l}t.exports=n})),Ou=q(((e,t)=>{function r(n,o){return n!=null&&o in Object(n)}t.exports=r})),Du=q(((e,t)=>{var r=Ou(),n=Y0();function o(i,a){return i!=null&&n(i,a,r)}t.exports=o})),Hu=q(((e,t)=>{var r=_l(),n=Pu(),o=Du(),i=is(),a=Nl(),l=Bl(),s=Vi(),c=1,u=2;function h(p,m){return i(p)&&a(m)?l(s(p),m):function(f){var v=n(f,p);return v===void 0&&v===m?o(f,p):r(m,v,c|u)}}t.exports=h})),zu=q(((e,t)=>{function r(n){return n}t.exports=r})),Au=q(((e,t)=>{function r(n){return function(o){return o==null?void 0:o[n]}}t.exports=r})),Lu=q(((e,t)=>{var r=Wl();function n(o){return function(i){return r(i,o)}}t.exports=n})),Fu=q(((e,t)=>{var r=Au(),n=Lu(),o=is(),i=Vi();function a(l){return o(l)?r(i(l)):n(l)}t.exports=a})),ju=q(((e,t)=>{var r=Tu(),n=Hu(),o=zu(),i=Ln(),a=Fu();function l(s){return typeof s=="function"?s:s==null?o:typeof s=="object"?i(s)?n(s[0],s[1]):r(s):a(s)}t.exports=l})),_u=q(((e,t)=>{var r=Xc(),n=lu(),o=ju(),i=Ln();function a(l,s){return function(c,u){var h=i(c)?r:n,p=s?s():{};return h(c,l,o(u,2),p)}}t.exports=a})),Nu=$t(q(((e,t)=>{var r=$c(),n=_u(),o=Object.prototype.hasOwnProperty;t.exports=n(function(i,a,l){o.call(i,l)?i[l].push(a):r(i,l,[a])})}))(),1);function Bu(e,t,r,n,o,i,a,l,s,c,u,h,p,m,f,v,k,M,y){if(M!==void 0||t[t.length-1]!==r[t.length-1])return;let S=Ml(k);zr(t,s,a,l,i,(T,P,E,z,F)=>{if(T!==t[t.length-1])return;P+=T.width;let C=Math.max(P,z);C>n||(e.save(),e.beginPath(),e.rect(C,i+1,1e4,o-i-1),e.clip(),bo(F,E,o,c,u,f,v,S,(R,L,x,w)=>{if(!w&&k.length>0&&!k.some(_=>Xn(P,R,1e4,x,_.x,_.y,_.width,_.height)))return;let I=p.hasIndex(L),O=m.hasIndex(L);e.beginPath();let b=h==null?void 0:h(L),G=b===void 0?y:Or(y,b);G.bgCell!==y.bgCell&&(e.fillStyle=G.bgCell,e.fillRect(P,R,1e4,x)),O&&(e.fillStyle=G.bgHeader,e.fillRect(P,R,1e4,x)),I&&(e.fillStyle=G.accentLight,e.fillRect(P,R,1e4,x))}),e.restore())})}function Wu(e,t,r,n,o,i,a,l,s){let c=!1;for(let f of t)if(!f.sticky){c=a(f.sourceIndex);break}let u=s.horizontalBorderColor??s.borderColor,h=s.borderColor,p=c?yn(t):0,m;if(p!==0&&(m=ds(h,s.bgCell),e.beginPath(),e.moveTo(p+.5,0),e.lineTo(p+.5,n),e.strokeStyle=m,e.stroke()),o>0){let f=h===u&&m!==void 0?m:ds(u,s.bgCell),v=Ur(i,o,l);e.beginPath(),e.moveTo(0,n-v+.5),e.lineTo(r,n-v+.5),e.strokeStyle=f,e.stroke()}}var $l=(e,t,r)=>{let n=0,o=t,i=0,a=r;if(e!==void 0&&e.length>0){n=2**53-1,i=2**53-1,o=-(2**53-1),a=-(2**53-1);for(let l of e)n=Math.min(n,l.x-1),o=Math.max(o,l.x+l.width+1),i=Math.min(i,l.y-1),a=Math.max(a,l.y+l.height+1)}return{minX:n,maxX:o,minY:i,maxY:a}};function $u(e,t,r,n,o,i,a,l,s,c,u,h,p,m,f){var x,w;let v=f.bgCell,{minX:k,maxX:M,minY:y,maxY:S}=$l(l,i,a),T=[],P=a-Ur(m,p,c),E=s,z=r,F=0;for(;E+o<P;){let I=E+o,O=c(z);if(I>=y&&I<=S-1){let b=(x=u==null?void 0:u(z))==null?void 0:x.bgCell;b!==void 0&&b!==v&&z>=m-p&&T.push({x:k,y:I,w:M-k,h:O,color:b})}E+=O,z<m-p&&(F=E),z++}let C=0,R=Math.min(P,S)-F;if(R>0)for(let I=0;I<t.length;I++){let O=t[I];if(O.width===0)continue;let b=O.sticky?C:C+n,G=(w=O.themeOverride)==null?void 0:w.bgCell;G!==void 0&&G!==v&&b>=k&&b<=M&&h(I+1)&&T.push({x:b,y:F,w:O.width,h:R,color:G}),C+=O.width}if(T.length===0)return;let L;e.beginPath();for(let I=T.length-1;I>=0;I--){let O=T[I];L===void 0?L=O.color:O.color!==L&&(e.fillStyle=L,e.fill(),e.beginPath(),L=O.color),e.rect(O.x,O.y,O.w,O.h)}L!==void 0&&(e.fillStyle=L,e.fill()),e.beginPath()}function Xl(e,t,r,n,o,i,a,l,s,c,u,h,p,m,f,v,k,M=!1){if(s!==void 0){e.beginPath(),e.save(),e.rect(0,0,i,a);for(let x of s)e.rect(x.x+1,x.y+1,x.width-1,x.height-1);e.clip("evenodd")}let y=k.horizontalBorderColor??k.borderColor,S=k.borderColor,{minX:T,maxX:P,minY:E,maxY:z}=$l(l,i,a),F=[];e.beginPath();let C=.5;for(let x=0;x<t.length;x++){let w=t[x];if(w.width===0)continue;C+=w.width;let I=w.sticky?C:C+n;I>=T&&I<=P&&m(x+1)&&F.push({x1:I,y1:Math.max(c,E),x2:I,y2:Math.min(a,z),color:S})}let R=a+.5;for(let x=v-f;x<v;x++){let w=h(x);R-=w,F.push({x1:T,y1:R,x2:P,y2:R,color:y})}if(M!==!0){let x=u+.5,w=r,I=R;for(;x+o<I;){let O=x+o;if(O>=E&&O<=z-1){let b=p==null?void 0:p(w);F.push({x1:T,y1:O,x2:P,y2:O,color:(b==null?void 0:b.horizontalBorderColor)??(b==null?void 0:b.borderColor)??y})}x+=h(w),w++}}let L=(0,Nu.default)(F,x=>x.color);for(let x of Object.keys(L)){e.strokeStyle=x;for(let w of L[x])e.moveTo(w.x1,w.y1),e.lineTo(w.x2,w.y2);e.stroke(),e.beginPath()}s!==void 0&&e.restore()}function Xu(e,t,r,n,o,i,a,l,s,c,u,h,p,m,f,v,k,M,y){let S=[];e.imageSmoothingEnabled=!1;let T=Math.min(o.cellYOffset,a),P=Math.max(o.cellYOffset,a),E=0;if(typeof M=="number")E+=(P-T)*M;else for(let I=T;I<P;I++)E+=M(I);a>o.cellYOffset&&(E=-E),E+=s-o.translateY;let z=Math.min(o.cellXOffset,i),F=Math.max(o.cellXOffset,i),C=0;for(let I=z;I<F;I++)C+=v[I].width;i>o.cellXOffset&&(C=-C),C+=l-o.translateX;let R=yn(k);if(C!==0&&E!==0)return{regions:[]};let L=c>0?Ur(p,c,M):0,x=u-R-Math.abs(C),w=h-m-L-Math.abs(E)-1;if(x>150&&w>150){let I={sx:0,sy:0,sw:u*f,sh:h*f,dx:0,dy:0,dw:u*f,dh:h*f};if(E>0?(I.sy=(m+1)*f,I.sh=w*f,I.dy=(E+m+1)*f,I.dh=w*f,S.push({x:0,y:m,width:u,height:E+1})):E<0&&(I.sy=(-E+m+1)*f,I.sh=w*f,I.dy=(m+1)*f,I.dh=w*f,S.push({x:0,y:h+E-L,width:u,height:-E+L})),C>0?(I.sx=R*f,I.sw=x*f,I.dx=(C+R)*f,I.dw=x*f,S.push({x:R-1,y:0,width:C+2,height:h})):C<0&&(I.sx=(R-C)*f,I.sw=x*f,I.dx=R*f,I.dw=x*f,S.push({x:u+C,y:0,width:-C,height:h})),e.setTransform(1,0,0,1,0,0),y){if(R>0&&C!==0&&E===0&&(n===void 0||(r==null?void 0:r[1])!==!1)){let O=R*f,b=h*f;e.drawImage(t,0,0,O,b,0,0,O,b)}if(L>0&&C===0&&E!==0&&(n===void 0||(r==null?void 0:r[0])!==!1)){let O=(h-L)*f,b=u*f,G=L*f;e.drawImage(t,0,O,b,G,0,O,b,G)}}e.drawImage(t,I.sx,I.sy,I.sw,I.sh,I.dx,I.dy,I.dw,I.dh),e.scale(f,f)}return e.imageSmoothingEnabled=!0,{regions:S}}function Ku(e,t,r,n,o,i,a,l,s,c){let u=[];return t!==e.cellXOffset||r!==e.cellYOffset||n!==e.translateX||o!==e.translateY||zr(s,r,n,o,l,(h,p,m,f)=>{if(h.sourceIndex===c){let v=Math.max(p,f)+1;return u.push({x:v,y:0,width:i-v,height:a}),!0}}),u}function Vu(e,t){if(t===void 0||e.width!==t.width||e.height!==t.height||e.theme!==t.theme||e.headerHeight!==t.headerHeight||e.rowHeight!==t.rowHeight||e.rows!==t.rows||e.freezeColumns!==t.freezeColumns||e.getRowThemeOverride!==t.getRowThemeOverride||e.isFocused!==t.isFocused||e.isResizing!==t.isResizing||e.verticalBorder!==t.verticalBorder||e.getCellContent!==t.getCellContent||e.highlightRegions!==t.highlightRegions||e.selection!==t.selection||e.dragAndDropState!==t.dragAndDropState||e.prelightCells!==t.prelightCells||e.touchMode!==t.touchMode||e.maxScaleFactor!==t.maxScaleFactor)return!1;if(e.mappedColumns!==t.mappedColumns){if(e.mappedColumns.length>100||e.mappedColumns.length!==t.mappedColumns.length)return!1;let r;for(let n=0;n<e.mappedColumns.length;n++){let o=e.mappedColumns[n],i=t.mappedColumns[n];if(Uo(o,i))continue;if(r!==void 0||o.width===i.width)return!1;let{width:a,...l}=o,{width:s,...c}=i;if(!Uo(l,c))return!1;r=n}return r===void 0?!0:r}return!0}function Kl(e,t,r,n,o,i,a,l,s,c,u,h,p,m,f,v){let k=f==null?void 0:f.filter(z=>z.style!=="no-outline");if(k===void 0||k.length===0)return;let M=yn(l),y=Ur(m,p,h),S=[s,0,l.length,m-p],T=[M,0,t,r-y],P=k.map(z=>{let F=z.range,C=z.style??"dashed";return Lc(F,S,t,r,T).map(R=>{let L=R.rect,x=li(L.x,L.y,t,r,u,c+u,n,o,i,a,m,s,p,l,h),w=L.width===1&&L.height===1?x:li(L.x+L.width-1,L.y+L.height-1,t,r,u,c+u,n,o,i,a,m,s,p,l,h);return L.x+L.width>=l.length&&--w.width,L.y+L.height>=m&&--w.height,{color:z.color,style:C,clip:R.clip,rect:Ac({x:x.x,y:x.y,width:w.x+w.width-x.x,height:w.y+w.height-x.y},t,r,8)}})}),E=()=>{e.lineWidth=1;let z=!1;for(let F of P)for(let C of F)if((C==null?void 0:C.rect)!==void 0&&Xn(0,0,t,r,C.rect.x,C.rect.y,C.rect.width,C.rect.height)){let R=z,L=!zc(C.clip,C.rect);e.beginPath(),L&&(e.save(),e.rect(C.clip.x,C.clip.y,C.clip.width,C.clip.height),e.clip()),C.style==="dashed"&&!z?(e.setLineDash([5,3]),z=!0):(C.style==="solid"||C.style==="solid-outline")&&z&&(e.setLineDash([]),z=!1),e.strokeStyle=C.style==="solid-outline"?fr(fr(C.color,v.borderColor),v.bgCell):mn(C.color,1),e.closePath(),e.strokeRect(C.rect.x+.5,C.rect.y+.5,C.rect.width-1,C.rect.height-1),L&&(e.restore(),z=R)}z&&e.setLineDash([])};return E(),E}function Vl(e,t,r,n,o){e.beginPath(),e.moveTo(t,r),e.lineTo(t,n),e.lineWidth=2,e.strokeStyle=o,e.stroke(),e.globalAlpha=1}function vi(e,t,r,n,o,i,a,l,s,c,u,h,p,m,f,v,k){if(u.current===void 0)return;let M=u.current.range,y=u.current.cell,S=[M.x+M.width-1,M.y+M.height-1];if(y[1]>=k&&S[1]>=k||!a.some(w=>w.sourceIndex===y[0]||w.sourceIndex===S[0]))return;let[T,P]=u.current.cell,E=p(u.current.cell),z=E.span??[T,T],F=P>=k-m,C=m>0&&!F?Ur(k,m,h)-1:0,R=S[1],L;if(zr(a,n,o,i,c,(w,I,O,b,G)=>{if(w.sticky&&T>w.sourceIndex)return;let _=w.sourceIndex<z[0],Z=w.sourceIndex>z[1],ee=w.sourceIndex===S[0];if(!(!ee&&(_||Z)))return bo(G,O,r,k,h,m,f,void 0,(V,se,oe)=>{if(se!==P&&se!==R)return;let ue=I,Te=w.width;if(E.span!==void 0){let te=El(E.span,I,V,w.width,oe,w,l),X=w.sticky?te[0]:te[1];X!==void 0&&(ue=X.x,Te=X.width)}return se===R&&ee&&v&&(L=()=>{var te;b>ue&&!w.sticky&&(e.beginPath(),e.rect(b,0,t-b,r),e.clip()),e.beginPath(),e.rect(ue+Te-4,V+oe-4,4,4),e.fillStyle=((te=w.themeOverride)==null?void 0:te.accentColor)??s.accentColor,e.fill()}),L!==void 0}),L!==void 0}),L===void 0)return;let x=()=>{e.save(),e.beginPath(),e.rect(0,c,t,r-c-C),e.clip(),L==null||L(),e.restore()};return x(),x}function Yu(e,t,r,n,o,i,a,l,s){s===void 0||s.size===0||(e.beginPath(),Rl(t,r,i,n,(c,u,h,p,m,f)=>{s.hasItemInRectangle({x:c[0],y:-2,width:c[1]-c[0]+1,height:1})&&e.rect(h,p,m,f)}),zr(t,l,i,a,o,(c,u,h,p)=>{let m=Math.max(0,p-u),f=u+m+1,v=c.width-m-1;s.has([c.sourceIndex,-1])&&e.rect(f,n,v,o-n)}),e.clip())}function Gu(e,t,r,n,o,i,a,l,s,c){let u=0;return zr(e,i,n,o,r,(h,p,m,f,v)=>(bo(v,m,t,a,l,s,c,void 0,(k,M,y,S)=>{S||(u=Math.max(M,u))}),!0)),u}function Yl(e,t){var ir;let{canvasCtx:r,headerCanvasCtx:n,width:o,height:i,cellXOffset:a,cellYOffset:l,translateX:s,translateY:c,mappedColumns:u,enableGroups:h,freezeColumns:p,dragAndDropState:m,theme:f,drawFocus:v,headerHeight:k,groupHeaderHeight:M,disabledRows:y,rowHeight:S,verticalBorder:T,overrideCursor:P,isResizing:E,selection:z,fillHandle:F,freezeTrailingRows:C,rows:R,getCellContent:L,getGroupDetails:x,getRowThemeOverride:w,isFocused:I,drawHeaderCallback:O,prelightCells:b,drawCellCallback:G,highlightRegions:_,resizeCol:Z,imageLoader:ee,lastBlitData:V,hoverValues:se,hyperWrapping:oe,hoverInfo:ue,spriteManager:Te,maxScaleFactor:te,hasAppendRow:X,touchMode:J,enqueue:re,renderStateProvider:ae,getCellRenderer:_e,renderStrategy:Le,bufferACtx:Se,bufferBCtx:$e,damage:De,minimumCellWidth:ct,resizeIndicator:ut}=e;if(o===0||i===0)return;let Ze=Le==="double-buffer",le=Math.min(te,Math.ceil(window.devicePixelRatio??1)),Re=Le!=="direct"&&Vu(e,t),Pe=r.canvas;(Pe.width!==o*le||Pe.height!==i*le)&&(Pe.width=o*le,Pe.height=i*le,Pe.style.width=o+"px",Pe.style.height=i+"px");let Ke=n.canvas,be=h?M+k:k,Ve=be+1;(Ke.width!==o*le||Ke.height!==Ve*le)&&(Ke.width=o*le,Ke.height=Ve*le,Ke.style.width=o+"px",Ke.style.height=Ve+"px");let Ne=Se.canvas,Ge=$e.canvas;Ze&&(Ne.width!==o*le||Ne.height!==i*le)&&(Ne.width=o*le,Ne.height=i*le,V.current!==void 0&&(V.current.aBufferScroll=void 0)),Ze&&(Ge.width!==o*le||Ge.height!==i*le)&&(Ge.width=o*le,Ge.height=i*le,V.current!==void 0&&(V.current.bBufferScroll=void 0));let me=V.current;if(Re===!0&&a===(me==null?void 0:me.cellXOffset)&&l===(me==null?void 0:me.cellYOffset)&&s===(me==null?void 0:me.translateX)&&c===(me==null?void 0:me.translateY))return;let ye=null;Ze&&(ye=r);let rt=n,qe;qe=Ze?De===void 0?(me==null?void 0:me.lastBuffer)==="b"?Se:$e:(me==null?void 0:me.lastBuffer)==="b"?$e:Se:r;let Ue=qe.canvas,pt=Ze?Ue===Ne?Ge:Ne:Pe,et=typeof S=="number"?()=>S:S;rt.save(),qe.save(),rt.beginPath(),qe.beginPath(),rt.textBaseline="middle",qe.textBaseline="middle",le!==1&&(rt.scale(le,le),qe.scale(le,le));let He=ii(u,a,o,m,s),St=[],At=v&&((ir=z.current)==null?void 0:ir.cell[1])===l&&c===0,kt=!1;if(_!==void 0){for(let Me of _)if(Me.style!=="no-outline"&&Me.range.y===l&&c===0){kt=!0;break}}let Et=()=>{_c(rt,He,h,ue,o,s,k,M,m,E,z,f,Te,se,T,x,De,O,J),Xl(rt,He,l,s,c,o,i,void 0,void 0,M,be,et,w,T,C,R,f,!0),rt.beginPath(),rt.moveTo(0,Ve-.5),rt.lineTo(o,Ve-.5),rt.strokeStyle=fr(f.headerBottomBorderColor??f.horizontalBorderColor??f.borderColor,f.bgHeader),rt.stroke(),kt&&Kl(rt,o,i,a,l,s,c,u,p,k,M,S,C,R,_,f),At&&vi(rt,o,i,l,s,c,He,u,f,be,z,et,L,C,X,F,R)};if(De!==void 0){let Me=He[He.length-1].sourceIndex+1,yt=De.hasItemInRegion([{x:a,y:-2,width:Me,height:2},{x:a,y:l,width:Me,height:300},{x:0,y:l,width:p,height:300},{x:0,y:-2,width:p,height:2},{x:a,y:R-C,width:Me,height:C,when:C>0}]),mr=lr=>{Tl(lr,He,u,i,be,s,c,l,R,et,L,x,w,y,I,v,C,X,St,De,z,b,_,ee,Te,se,ue,G,oe,f,re,ae,_e,P,ct);let Zt=z.current;F&&v&&Zt!==void 0&&De.has(al(Zt.range))&&vi(lr,o,i,l,s,c,He,u,f,be,z,et,L,C,X,F,R)};yt&&(mr(qe),ye!==null&&(ye.save(),ye.scale(le,le),ye.textBaseline="middle",mr(ye),ye.restore()),De.hasHeader()&&(Yu(rt,He,o,M,be,s,c,l,De),Et())),qe.restore(),rt.restore();return}if((Re!==!0||a!==(me==null?void 0:me.cellXOffset)||s!==(me==null?void 0:me.translateX)||At!==(me==null?void 0:me.mustDrawFocusOnHeader)||kt!==(me==null?void 0:me.mustDrawHighlightRingsOnHeader))&&Et(),Re===!0){Jt(pt!==void 0&&me!==void 0);let{regions:Me}=Xu(qe,pt,pt===Ne?me.aBufferScroll:me.bBufferScroll,pt===Ne?me.bBufferScroll:me.aBufferScroll,me,a,l,s,c,C,o,i,R,be,le,u,He,S,Ze);St=Me}else Re!==!1&&(Jt(me!==void 0),St=Ku(me,a,l,s,c,o,i,be,He,Re));Wu(qe,He,o,i,C,R,T,et,f);let _t=Kl(qe,o,i,a,l,s,c,u,p,k,M,S,C,R,_,f),wt=v?vi(qe,o,i,l,s,c,He,u,f,be,z,et,L,C,X,F,R):void 0;if(qe.fillStyle=f.bgCell,St.length>0){qe.beginPath();for(let Me of St)qe.rect(Me.x,Me.y,Me.width,Me.height);qe.clip(),qe.fill(),qe.beginPath()}else qe.fillRect(0,0,o,i);let pr=Tl(qe,He,u,i,be,s,c,l,R,et,L,x,w,y,I,v,C,X,St,De,z,b,_,ee,Te,se,ue,G,oe,f,re,ae,_e,P,ct);Bu(qe,He,u,o,i,be,s,c,l,R,et,w,z.rows,y,C,X,St,De,f),$u(qe,He,l,s,c,o,i,St,be,et,w,T,C,R,f),Xl(qe,He,l,s,c,o,i,St,pr,M,be,et,w,T,C,R,f),_t==null||_t(),wt==null||wt(),E&&ut!=="none"&&zr(He,0,s,0,be,(Me,yt)=>Me.sourceIndex===Z?(Vl(rt,yt+Me.width,0,be+1,fr(f.resizeIndicatorColor??f.accentLight,f.bgHeader)),ut==="full"&&Vl(qe,yt+Me.width,be,i,fr(f.resizeIndicatorColor??f.accentLight,f.bgCell)),!0):!1),ye!==null&&(ye.fillStyle=f.bgCell,ye.fillRect(0,0,o,i),ye.drawImage(qe.canvas,0,0));let Lr=Gu(He,i,be,s,c,l,R,et,C,X);ee==null||ee.setWindow({x:a,y:l,width:He.length,height:Lr-l},p,Array.from({length:C},(Me,yt)=>R-1-yt));let ft=me!==void 0&&(a!==me.cellXOffset||s!==me.translateX),kr=me!==void 0&&(l!==me.cellYOffset||c!==me.translateY);V.current={cellXOffset:a,cellYOffset:l,translateX:s,translateY:c,mustDrawFocusOnHeader:At,mustDrawHighlightRingsOnHeader:kt,lastBuffer:Ze?Ue===Ne?"a":"b":void 0,aBufferScroll:Ue===Ne?[ft,kr]:me==null?void 0:me.aBufferScroll,bBufferScroll:Ue===Ge?[ft,kr]:me==null?void 0:me.bBufferScroll},qe.restore(),rt.restore()}var Gl=$t(yo(),1),Uu=80;function qu(e){let t=e-1;return t*t*t+1}var Ju=class{constructor(e){tt(this,"callback");tt(this,"currentHoveredItem");tt(this,"leavingItems",[]);tt(this,"lastAnimationTime");tt(this,"addToLeavingItems",e=>{this.leavingItems.some(t=>Nn(t.item,e.item))||this.leavingItems.push(e)});tt(this,"removeFromLeavingItems",e=>{let t=this.leavingItems.find(r=>Nn(r.item,e));return this.leavingItems=this.leavingItems.filter(r=>r!==t),(t==null?void 0:t.hoverAmount)??0});tt(this,"cleanUpLeavingElements",()=>{this.leavingItems=this.leavingItems.filter(e=>e.hoverAmount>0)});tt(this,"shouldStep",()=>{let e=this.leavingItems.length>0,t=this.currentHoveredItem!==void 0&&this.currentHoveredItem.hoverAmount<1;return e||t});tt(this,"getAnimatingItems",()=>this.currentHoveredItem===void 0?this.leavingItems.map(e=>({...e,hoverAmount:qu(e.hoverAmount)})):[...this.leavingItems,this.currentHoveredItem]);tt(this,"step",e=>{if(this.lastAnimationTime===void 0)this.lastAnimationTime=e;else{let t=(e-this.lastAnimationTime)/Uu;for(let n of this.leavingItems)n.hoverAmount=(0,Gl.default)(n.hoverAmount-t,0,1);this.currentHoveredItem!==void 0&&(this.currentHoveredItem.hoverAmount=(0,Gl.default)(this.currentHoveredItem.hoverAmount+t,0,1));let r=this.getAnimatingItems();this.callback(r),this.cleanUpLeavingElements()}this.shouldStep()?(this.lastAnimationTime=e,window.requestAnimationFrame(this.step)):this.lastAnimationTime=void 0});tt(this,"setHovered",e=>{var t;Nn((t=this.currentHoveredItem)==null?void 0:t.item,e)||(this.currentHoveredItem!==void 0&&this.addToLeavingItems(this.currentHoveredItem),e===void 0?this.currentHoveredItem=void 0:this.currentHoveredItem={item:e,hoverAmount:this.removeFromLeavingItems(e)},this.lastAnimationTime===void 0&&window.requestAnimationFrame(this.step))});this.callback=e}},Qu=class{constructor(e){tt(this,"fn");tt(this,"val");this.fn=e}get value(){return this.val??(this.val=this.fn())}};function wi(e){return new Qu(e)}const Zu=wi(()=>window.navigator.userAgent.includes("Firefox")),xo=wi(()=>window.navigator.userAgent.includes("Mac OS")&&window.navigator.userAgent.includes("Safari")&&!window.navigator.userAgent.includes("Chrome")),Co=wi(()=>window.navigator.platform.toLowerCase().startsWith("mac"));function ed(e){let t=d.useRef([]),r=d.useRef(0),n=d.useRef(e);n.current=e;let o=d.useCallback(()=>{let i=()=>window.requestAnimationFrame(a),a=()=>{let l=t.current.map(ci);t.current=[],n.current(new $n(l)),t.current.length>0?r.current++:r.current=0};window.requestAnimationFrame(r.current>600?i:a)},[]);return d.useCallback(i=>{t.current.length===0&&o();let a=or(i[0],i[1]);t.current.includes(a)||t.current.push(a)},[o])}const Ul="header",ql="group-header";var Gn;(function(e){e[e.Start=-2]="Start",e[e.StartPadding=-1]="StartPadding",e[e.Center=0]="Center",e[e.EndPadding=1]="EndPadding",e[e.End=2]="End"})(Gn||(Gn={}));function Jl(e,t){return e===t?!0:(e==null?void 0:e.kind)==="out-of-bounds"?(e==null?void 0:e.kind)===(t==null?void 0:t.kind)&&(e==null?void 0:e.location[0])===(t==null?void 0:t.location[0])&&(e==null?void 0:e.location[1])===(t==null?void 0:t.location[1])&&(e==null?void 0:e.region[0])===(t==null?void 0:t.region[0])&&(e==null?void 0:e.region[1])===(t==null?void 0:t.region[1]):(e==null?void 0:e.kind)===(t==null?void 0:t.kind)&&(e==null?void 0:e.location[0])===(t==null?void 0:t.location[0])&&(e==null?void 0:e.location[1])===(t==null?void 0:t.location[1])}var Ql=$t(yo(),1),td=$t(Sl(),1),Zl=6,rd=(e,t)=>{var r;return e.kind===pe.Custom?e.copyData:((r=t==null?void 0:t(e))==null?void 0:r.getAccessibilityString(e))??""},nd=d.memo(d.forwardRef((e,t)=>{let{width:r,height:n,accessibilityHeight:o,columns:i,cellXOffset:a,cellYOffset:l,headerHeight:s,fillHandle:c=!1,groupHeaderHeight:u,rowHeight:h,rows:p,getCellContent:m,getRowThemeOverride:f,onHeaderMenuClick:v,onHeaderIndicatorClick:k,enableGroups:M,isFilling:y,onCanvasFocused:S,onCanvasBlur:T,isFocused:P,selection:E,freezeColumns:z,onContextMenu:F,freezeTrailingRows:C,fixedShadowX:R=!0,fixedShadowY:L=!0,drawFocusRing:x,onMouseDown:w,onMouseUp:I,onMouseMoveRaw:O,onMouseMove:b,onItemHovered:G,dragAndDropState:_,firstColAccessible:Z,onKeyDown:ee,onKeyUp:V,highlightRegions:se,canvasRef:oe,onDragStart:ue,onDragEnd:Te,eventTargetRef:te,isResizing:X,resizeColumn:J,isDragging:re,isDraggable:ae=!1,allowResize:_e,disabledRows:Le,hasAppendRow:Se,getGroupDetails:$e,theme:De,prelightCells:ct,headerIcons:ut,verticalBorder:Ze,drawCell:le,drawHeader:Re,onCellFocused:Pe,onDragOverCell:Ke,onDrop:be,onDragLeave:Ve,imageWindowLoader:Ne,smoothScrollX:Ge=!1,smoothScrollY:me=!1,experimental:ye,getCellRenderer:rt,resizeIndicator:qe="full"}=e,Ue=e.translateX??0,pt=e.translateY??0,et=Math.max(z,Math.min(i.length-1,a)),He=d.useRef(null),St=d.useRef((ye==null?void 0:ye.eventTarget)??window),At=St.current,kt=Ne,Et=d.useRef(),[_t,wt]=d.useState(!1),pr=d.useRef([]),Lr=d.useRef(),[ft,kr]=d.useState(),[ir,Me]=d.useState(),yt=d.useRef(null),[mr,lr]=d.useState(),[Zt,Xe]=d.useState(!1),xt=d.useRef(Zt);xt.current=Zt;let Mt=d.useMemo(()=>new Dc(ut,()=>{kn.current=void 0,Zr.current()}),[ut]),Bt=M?u+s:s,Ot=d.useRef(-1),Kt=((ye==null?void 0:ye.enableFirefoxRescaling)??!1)&&Zu.value,Fr=((ye==null?void 0:ye.enableSafariRescaling)??!1)&&xo.value;d.useLayoutEffect(()=>{window.devicePixelRatio===1||!Kt&&!Fr||(Ot.current!==-1&&wt(!0),window.clearTimeout(Ot.current),Ot.current=window.setTimeout(()=>{wt(!1),Ot.current=-1},200))},[l,et,Ue,pt,Kt,Fr]);let Rt=Ws(i,z),Ct=d.useMemo(()=>R?yn(Rt,_):0,[Rt,_,R]),Tt=d.useCallback((j,ne,ve)=>{let ge=j.getBoundingClientRect();if(ne>=Rt.length||ve>=p)return;let A=ge.width/r,ce=li(ne,ve,r,n,u,Bt,et,l,Ue,pt,p,z,C,Rt,h);return A!==1&&(ce.x*=A,ce.y*=A,ce.width*=A,ce.height*=A),ce.x+=ge.x,ce.y+=ge.y,ce},[r,n,u,Bt,et,l,Ue,pt,p,z,C,Rt,h]),Dt=d.useCallback((j,ne,ve,ge)=>{let A=j.getBoundingClientRect(),ce=A.width/r,we=(ne-A.left)/ce,je=(ve-A.top)/ce,ke=ii(Rt,et,r,void 0,Ue),dt=0,he=0;ge instanceof MouseEvent&&(dt=ge.button,he=ge.buttons);let Fe=Vs(we,ke,Ue),Ye=Ys(je,n,M,s,u,p,h,l,pt,C),lt=(ge==null?void 0:ge.shiftKey)===!0,Pt=(ge==null?void 0:ge.ctrlKey)===!0,Gt=(ge==null?void 0:ge.metaKey)===!0,at=ge!==void 0&&!(ge instanceof MouseEvent)||(ge==null?void 0:ge.pointerType)==="touch",mt=[we<0?-1:r<we?1:0,je<Bt?-1:n<je?1:0],vt;if(Fe===-1||je<0||we<0||Ye===void 0||we>r||je>n){let Oe=we>r?1:we<0?-1:0,st=je>n?1:je<0?-1:0,Nt=Oe*2,cn=st*2;Oe===0&&(Nt=Fe===-1?Gn.EndPadding:Gn.Center),st===0&&(cn=Ye===void 0?Gn.EndPadding:Gn.Center);let cr=!1;if(Fe===-1&&Ye===-1){let zt=Tt(j,Rt.length-1,-1);Jt(zt!==void 0),cr=ne<zt.x+zt.width+5}let Ht=we>r&&we<r+ni()||je>n&&je<n+ni();vt={kind:"out-of-bounds",location:[Fe===-1?we<0?0:Rt.length-1:Fe,Ye??p-1],region:[Nt,cn],shiftKey:lt,ctrlKey:Pt,metaKey:Gt,isEdge:cr,isTouch:at,button:dt,buttons:he,scrollEdge:mt,isMaybeScrollbar:Ht}}else if(Ye<=-1){let Oe=Tt(j,Fe,Ye);Jt(Oe!==void 0);let st=Oe!==void 0&&Oe.x+Oe.width-ne<=5,Nt=Fe-1;ne-Oe.x<=5&&Nt>=0?(st=!0,Oe=Tt(j,Nt,Ye),Jt(Oe!==void 0),vt={kind:M&&Ye===-2?ql:Ul,location:[Nt,Ye],bounds:Oe,group:Rt[Nt].group??"",isEdge:st,shiftKey:lt,ctrlKey:Pt,metaKey:Gt,isTouch:at,localEventX:ne-Oe.x,localEventY:ve-Oe.y,button:dt,buttons:he,scrollEdge:mt}):vt={kind:M&&Ye===-2?ql:Ul,group:Rt[Fe].group??"",location:[Fe,Ye],bounds:Oe,isEdge:st,shiftKey:lt,ctrlKey:Pt,metaKey:Gt,isTouch:at,localEventX:ne-Oe.x,localEventY:ve-Oe.y,button:dt,buttons:he,scrollEdge:mt}}else{let Oe=Tt(j,Fe,Ye);Jt(Oe!==void 0);let st=Oe!==void 0&&Oe.x+Oe.width-ne<5,Nt=!1;if(c&&E.current!==void 0){let cn=al(E.current.range),cr=Tt(j,cn[0],cn[1]);if(cr!==void 0){let Ht=cr.x+cr.width-2,zt=cr.y+cr.height-2;Nt=Math.abs(Ht-ne)<Zl&&Math.abs(zt-ve)<Zl}}vt={kind:"cell",location:[Fe,Ye],bounds:Oe,isEdge:st,shiftKey:lt,ctrlKey:Pt,isFillHandle:Nt,metaKey:Gt,isTouch:at,localEventX:ne-Oe.x,localEventY:ve-Oe.y,button:dt,buttons:he,scrollEdge:mt}}return vt},[r,Rt,et,Ue,n,M,s,u,p,h,l,pt,C,Tt,c,E,Bt]),[Mr]=ft??[],Ro=d.useRef(()=>{}),jr=d.useRef(ft);jr.current=ft;let[Rr,Er]=d.useMemo(()=>{let j=document.createElement("canvas"),ne=document.createElement("canvas");return j.style.display="none",j.style.opacity="0",j.style.position="fixed",ne.style.display="none",ne.style.opacity="0",ne.style.position="fixed",[j.getContext("2d",{alpha:!1}),ne.getContext("2d",{alpha:!1})]},[]);d.useLayoutEffect(()=>{if(!(Rr===null||Er===null))return document.documentElement.append(Rr.canvas),document.documentElement.append(Er.canvas),()=>{Rr.canvas.remove(),Er.canvas.remove()}},[Rr,Er]);let vr=d.useMemo(()=>new rc,[]),Eo=Kt&&_t?1:Fr&&_t?2:5,Io=(ye==null?void 0:ye.disableMinimumCellWidth)===!0?1:10,kn=d.useRef(),Mn=d.useRef(null),Rn=d.useRef(null),Qr=d.useCallback(()=>{var we;let j=He.current,ne=yt.current;if(j===null||ne===null||(Mn.current===null&&(Mn.current=j.getContext("2d",{alpha:!1}),j.width=0,j.height=0),Rn.current===null&&(Rn.current=ne.getContext("2d",{alpha:!1}),ne.width=0,ne.height=0),Mn.current===null||Rn.current===null||Rr===null||Er===null))return;let ve=!1,ge=je=>{ve=!0,lr(je)},A=kn.current,ce={headerCanvasCtx:Rn.current,canvasCtx:Mn.current,bufferACtx:Rr,bufferBCtx:Er,width:r,height:n,cellXOffset:et,cellYOffset:l,translateX:Math.round(Ue),translateY:Math.round(pt),mappedColumns:Rt,enableGroups:M,freezeColumns:z,dragAndDropState:_,theme:De,headerHeight:s,groupHeaderHeight:u,disabledRows:Le??nt.empty(),rowHeight:h,verticalBorder:Ze,isResizing:X,resizeCol:J,isFocused:P,selection:E,fillHandle:c,drawCellCallback:le,hasAppendRow:Se,overrideCursor:ge,maxScaleFactor:Eo,freezeTrailingRows:C,rows:p,drawFocus:x,getCellContent:m,getGroupDetails:$e??(je=>({name:je})),getRowThemeOverride:f,drawHeaderCallback:Re,prelightCells:ct,highlightRegions:se,imageLoader:kt,lastBlitData:Lr,damage:Et.current,hoverValues:pr.current,hoverInfo:jr.current,spriteManager:Mt,scrolling:_t,hyperWrapping:(ye==null?void 0:ye.hyperWrapping)??!1,touchMode:Zt,enqueue:Ro.current,renderStateProvider:vr,renderStrategy:(ye==null?void 0:ye.renderStrategy)??(xo.value?"double-buffer":"single-buffer"),getCellRenderer:rt,minimumCellWidth:Io,resizeIndicator:qe};ce.damage===void 0?(kn.current=ce,Yl(ce,A)):Yl(ce,void 0),!ve&&(ce.damage===void 0||ce.damage.has((we=jr==null?void 0:jr.current)==null?void 0:we[0]))&&lr(void 0)},[Rr,Er,r,n,et,l,Ue,pt,Rt,M,z,_,De,s,u,Le,h,Ze,X,Se,J,P,E,c,C,p,x,Eo,m,$e,f,le,Re,ct,se,kt,Mt,_t,ye==null?void 0:ye.hyperWrapping,ye==null?void 0:ye.renderStrategy,Zt,vr,rt,Io,qe]),Zr=d.useRef(Qr);d.useLayoutEffect(()=>{Qr(),Zr.current=Qr},[Qr]),d.useLayoutEffect(()=>{(async()=>{var j;((j=document==null?void 0:document.fonts)==null?void 0:j.ready)!==void 0&&(await document.fonts.ready,kn.current=void 0,Zr.current())})()},[]);let _r=d.useCallback(j=>{Et.current=j,Zr.current(),Et.current=void 0},[]);Ro.current=ed(_r);let To=d.useCallback(j=>{_r(new $n(j.map(ne=>ne.cell)))},[_r]);kt.setCallback(_r);let[Mi,Po]=d.useState(!1),[en,Nr]=Mr??[],Ri=en!==void 0&&Nr===-1&&i[en].headerRowMarkerDisabled!==!0,qn=en!==void 0&&Nr===-2,Oo=!1,Jn=!1,tn=mr;if(tn===void 0&&en!==void 0&&Nr!==void 0&&Nr>-1&&Nr<p){let j=m([en,Nr],!0);Oo=j.kind===Xr.NewRow||j.kind===Xr.Marker&&j.markerKind!=="number",Jn=j.kind===pe.Boolean&&Yi(j),tn=j.cursor}let Qn=re?"grabbing":(ir??!1)||X?"col-resize":Mi||y?"crosshair":tn===void 0?Ri||Oo||Jn||qn?"pointer":"default":tn,it=d.useMemo(()=>({contain:"strict",display:"block",cursor:Qn}),[Qn]),Vt=d.useRef("default"),Do=te==null?void 0:te.current;Do!=null&&Vt.current!==it.cursor&&(Do.style.cursor=Vt.current=it.cursor);let Ir=d.useCallback((j,ne,ve,ge)=>{if($e===void 0)return;let A=$e(j);if(A.actions!==void 0){let ce=Ol(ne,A.actions);for(let[we,je]of ce.entries())if(qr(je,ve+ne.x,ge+je.y))return A.actions[we]}},[$e]),Tr=d.useCallback((j,ne,ve,ge)=>{let A=Rt[ne];if(!re&&!X&&!(ir??!1)){let ce=Tt(j,ne,-1);Jt(ce!==void 0);let we=Dl(void 0,A,ce.x,ce.y,ce.width,ce.height,De,ri(A.title)==="rtl");if(A.hasMenu===!0&&we.menuBounds!==void 0&&qr(we.menuBounds,ve,ge))return{area:"menu",bounds:we.menuBounds};if(A.indicatorIcon!==void 0&&we.indicatorIconBounds!==void 0&&qr(we.indicatorIconBounds,ve,ge))return{area:"indicator",bounds:we.indicatorIconBounds}}},[Rt,Tt,ir,re,X,De]),En=d.useRef(0),Br=d.useRef(),rn=d.useRef(!1),nn=d.useCallback(j=>{let ne=He.current,ve=te==null?void 0:te.current;if(ne===null||j.target!==ne&&j.target!==ve)return;rn.current=!0;let ge,A;if(j instanceof MouseEvent?(ge=j.clientX,A=j.clientY):(ge=j.touches[0].clientX,A=j.touches[0].clientY),j.target===ve&&ve!==null){let we=ve.getBoundingClientRect();if(ge>we.right||A>we.bottom)return}let ce=Dt(ne,ge,A,j);Br.current=ce.location,ce.isTouch&&(En.current=Date.now()),xt.current!==ce.isTouch&&Xe(ce.isTouch),!(ce.kind==="header"&&Tr(ne,ce.location[0],ge,A)!==void 0)&&(ce.kind==="group-header"&&Ir(ce.group,ce.bounds,ce.localEventX,ce.localEventY)!==void 0||(w==null||w(ce),!ce.isTouch&&ae!==!0&&ae!==ce.kind&&ce.button<3&&ce.button!==1&&j.preventDefault()))},[te,ae,Dt,Ir,Tr,w]);jt("touchstart",nn,At,!1),jt("mousedown",nn,At,!1);let Pr=d.useRef(0),on=d.useCallback(j=>{var Fe,Ye;let ne=Pr.current;Pr.current=Date.now();let ve=He.current;if(rn.current=!1,I===void 0||ve===null)return;let ge=te==null?void 0:te.current,A=j.target!==ve&&j.target!==ge,ce,we,je=!0;if(j instanceof MouseEvent){if(ce=j.clientX,we=j.clientY,je=j.button<3,j.pointerType==="touch")return}else ce=j.changedTouches[0].clientX,we=j.changedTouches[0].clientY;let ke=Dt(ve,ce,we,j);ke.isTouch&&En.current!==0&&Date.now()-En.current>500&&(ke={...ke,isLongTouch:!0}),ne!==0&&Date.now()-ne<(ke.isTouch?1e3:500)&&(ke={...ke,isDoubleClick:!0}),xt.current!==ke.isTouch&&Xe(ke.isTouch),!A&&j.cancelable&&je&&j.preventDefault();let[dt]=ke.location,he=Tr(ve,dt,ce,we);if(ke.kind==="header"&&he!==void 0){(ke.button!==0||((Fe=Br.current)==null?void 0:Fe[0])!==dt||((Ye=Br.current)==null?void 0:Ye[1])!==-1)&&I(ke,!0);return}else if(ke.kind==="group-header"){let lt=Ir(ke.group,ke.bounds,ke.localEventX,ke.localEventY);if(lt!==void 0){ke.button===0&&lt.onClick(ke);return}}I(ke,A)},[I,te,Dt,Tr,Ir]);jt("mouseup",on,At,!1),jt("touchend",on,At,!1),jt("click",d.useCallback(j=>{var dt,he;let ne=He.current;if(ne===null)return;let ve=te==null?void 0:te.current,ge=j.target!==ne&&j.target!==ve,A,ce,we=!0;j instanceof MouseEvent?(A=j.clientX,ce=j.clientY,we=j.button<3):(A=j.changedTouches[0].clientX,ce=j.changedTouches[0].clientY);let je=Dt(ne,A,ce,j);xt.current!==je.isTouch&&Xe(je.isTouch),!ge&&j.cancelable&&we&&j.preventDefault();let[ke]=je.location;if(je.kind==="header"){let Fe=Tr(ne,ke,A,ce);Fe!==void 0&&je.button===0&&((dt=Br.current)==null?void 0:dt[0])===ke&&((he=Br.current)==null?void 0:he[1])===-1&&(Fe.area==="menu"?v==null||v(ke,Fe.bounds):Fe.area==="indicator"&&(k==null||k(ke,Fe.bounds)))}else if(je.kind==="group-header"){let Fe=Ir(je.group,je.bounds,je.localEventX,je.localEventY);Fe!==void 0&&je.button===0&&Fe.onClick(je)}},[te,Dt,Tr,v,k,Ir]),At,!1),jt("contextmenu",d.useCallback(j=>{let ne=He.current,ve=te==null?void 0:te.current;ne===null||j.target!==ne&&j.target!==ve||F===void 0||F(Dt(ne,j.clientX,j.clientY,j),()=>{j.cancelable&&j.preventDefault()})},[te,Dt,F]),(te==null?void 0:te.current)??null,!1);let Ho=d.useCallback(j=>{Et.current=new $n(j.map(ne=>ne.item)),pr.current=j,Zr.current(),Et.current=void 0},[]),Zn=d.useMemo(()=>new Ju(Ho),[Ho]),Ee=d.useRef(Zn);Ee.current=Zn,d.useLayoutEffect(()=>{let j=Ee.current;if(Mr===void 0||Mr[1]<0){j.setHovered(Mr);return}let ne=m(Mr,!0),ve=rt(ne),ge=ve===void 0&&ne.kind===pe.Custom||(ve==null?void 0:ve.needsHover)!==void 0&&(typeof ve.needsHover=="boolean"?ve.needsHover:ve.needsHover(ne));j.setHovered(ge?Mr:void 0)},[m,rt,Mr]);let eo=d.useRef();jt("mousemove",d.useCallback(j=>{var je;let ne=He.current;if(ne===null)return;let ve=te==null?void 0:te.current,ge=j.target!==ne&&j.target!==ve,A=Dt(ne,j.clientX,j.clientY,j);if(A.kind!=="out-of-bounds"&&ge&&!rn.current&&!A.isTouch)return;let ce=(ke,dt)=>{kr(he=>he===ke||(he==null?void 0:he[0][0])===(ke==null?void 0:ke[0][0])&&(he==null?void 0:he[0][1])===(ke==null?void 0:ke[0][1])&&((he==null?void 0:he[1][0])===(ke==null?void 0:ke[1][0])&&(he==null?void 0:he[1][1])===(ke==null?void 0:ke[1][1])||!dt)?he:ke)};if(!Jl(A,eo.current))lr(void 0),G==null||G(A),ce(A.kind==="out-of-bounds"?void 0:[A.location,[A.localEventX,A.localEventY]],!0),eo.current=A;else if(A.kind==="cell"||A.kind==="header"||A.kind==="group-header"){let ke=!1,dt=!0;if(A.kind==="cell"){let Fe=m(A.location);dt=((je=rt(Fe))==null?void 0:je.needsHoverPosition)??Fe.kind===pe.Custom,ke=dt}else ke=!0;let he=[A.location,[A.localEventX,A.localEventY]];ce(he,dt),jr.current=he,ke&&_r(new $n([A.location]))}let we=A.location[0]>=(Z?0:1);Me(A.kind==="header"&&A.isEdge&&we&&_e===!0),Po(A.kind==="cell"&&A.isFillHandle),O==null||O(j),b(A)},[te,Dt,Z,_e,O,b,G,m,rt,_r]),At,!0);let Ei=d.useCallback(j=>{let ne=He.current;if(ne===null)return;let ve,ge;E.current!==void 0&&(ve=Tt(ne,E.current.cell[0],E.current.cell[1]),ge=E.current.cell),ee==null||ee({bounds:ve,stopPropagation:()=>j.stopPropagation(),preventDefault:()=>j.preventDefault(),cancel:()=>{},ctrlKey:j.ctrlKey,metaKey:j.metaKey,shiftKey:j.shiftKey,altKey:j.altKey,key:j.key,keyCode:j.keyCode,rawEvent:j,location:ge})},[ee,E,Tt]),ar=d.useCallback(j=>{let ne=He.current;if(ne===null)return;let ve,ge;E.current!==void 0&&(ve=Tt(ne,E.current.cell[0],E.current.cell[1]),ge=E.current.cell),V==null||V({bounds:ve,stopPropagation:()=>j.stopPropagation(),preventDefault:()=>j.preventDefault(),cancel:()=>{},ctrlKey:j.ctrlKey,metaKey:j.metaKey,shiftKey:j.shiftKey,altKey:j.altKey,key:j.key,keyCode:j.keyCode,rawEvent:j,location:ge})},[V,E,Tt]),wr=d.useCallback(j=>{if(He.current=j,oe!==void 0&&(oe.current=j),ye==null?void 0:ye.eventTarget)St.current=ye.eventTarget;else if(j===null)St.current=window;else{let ne=j.getRootNode();ne===document&&(St.current=window),St.current=ne}},[oe,ye==null?void 0:ye.eventTarget]);jt("dragstart",d.useCallback(j=>{let ne=He.current;if(ne===null||ae===!1||X){j.preventDefault();return}let ve,ge,A=Dt(ne,j.clientX,j.clientY);if(ae!==!0&&A.kind!==ae){j.preventDefault();return}let ce=(Fe,Ye)=>{ve=Fe,ge=Ye},we,je,ke,dt=(Fe,Ye,lt)=>{we=Fe,je=Ye,ke=lt},he=!1;if(ue==null||ue({...A,setData:ce,setDragImage:dt,preventDefault:()=>he=!0,defaultPrevented:()=>he}),!he&&ve!==void 0&&ge!==void 0&&j.dataTransfer!==null)if(j.dataTransfer.setData(ve,ge),j.dataTransfer.effectAllowed="copyLink",we!==void 0&&je!==void 0&&ke!==void 0)j.dataTransfer.setDragImage(we,je,ke);else{let[Fe,Ye]=A.location;if(Ye!==void 0){let lt=document.createElement("canvas"),Pt=Tt(ne,Fe,Ye);Jt(Pt!==void 0);let Gt=Math.ceil(window.devicePixelRatio??1);lt.width=Pt.width*Gt,lt.height=Pt.height*Gt;let at=lt.getContext("2d");at!==null&&(at.scale(Gt,Gt),at.textBaseline="middle",Ye===-1?(at.font=De.headerFontFull,at.fillStyle=De.bgHeader,at.fillRect(0,0,lt.width,lt.height),zl(at,0,0,Pt.width,Pt.height,Rt[Fe],!1,De,!1,void 0,void 0,!1,0,Mt,Re,!1)):(at.font=De.baseFontFull,at.fillStyle=De.bgCell,at.fillRect(0,0,lt.width,lt.height),Pl(at,m([Fe,Ye]),0,Ye,!1,!1,0,0,Pt.width,Pt.height,!1,De,De.bgCell,kt,Mt,1,void 0,!1,0,void 0,void 0,void 0,vr,rt,()=>{}))),lt.style.left="-100%",lt.style.position="absolute",lt.style.width=`${Pt.width}px`,lt.style.height=`${Pt.height}px`,document.body.append(lt),j.dataTransfer.setDragImage(lt,Pt.width/2,Pt.height/2),window.setTimeout(()=>{lt.remove()},0)}}else j.preventDefault()},[ae,X,Dt,ue,Tt,De,Rt,Mt,Re,m,kt,vr,rt]),(te==null?void 0:te.current)??null,!1,!1);let ln=d.useRef();jt("dragover",d.useCallback(j=>{let ne=He.current;if(be!==void 0&&j.preventDefault(),ne===null||Ke===void 0)return;let[ve,ge]=Dt(ne,j.clientX,j.clientY).location,A=ve-(Z?0:1),[ce,we]=ln.current??[];(ce!==A||we!==ge)&&(ln.current=[A,ge],Ke([A,ge],j.dataTransfer))},[Z,Dt,Ke,be]),(te==null?void 0:te.current)??null,!1,!1),jt("dragend",d.useCallback(()=>{ln.current=void 0,Te==null||Te()},[Te]),(te==null?void 0:te.current)??null,!1,!1),jt("drop",d.useCallback(j=>{let ne=He.current;if(ne===null||be===void 0)return;j.preventDefault();let[ve,ge]=Dt(ne,j.clientX,j.clientY).location;be([ve-(Z?0:1),ge],j.dataTransfer)},[Z,Dt,be]),(te==null?void 0:te.current)??null,!1,!1),jt("dragleave",d.useCallback(()=>{Ve==null||Ve()},[Ve]),(te==null?void 0:te.current)??null,!1,!1);let to=d.useRef(E);to.current=E;let an=d.useRef(null),ro=d.useCallback(j=>{var ne;He.current===null||!He.current.contains(document.activeElement)||(j===null&&to.current.current!==void 0?(ne=oe==null?void 0:oe.current)==null||ne.focus({preventScroll:!0}):j!==null&&j.focus({preventScroll:!0}),an.current=j)},[oe]);d.useImperativeHandle(t,()=>({focus:()=>{var ne;let j=an.current;j===null||!document.contains(j)?(ne=oe==null?void 0:oe.current)==null||ne.focus({preventScroll:!0}):j.focus({preventScroll:!0})},getBounds:(j,ne)=>{if(!(oe===void 0||oe.current===null))return Tt(oe.current,j??0,ne??-1)},damage:To,getMouseArgsForPosition:(j,ne,ve)=>{if(!(oe===void 0||oe.current===null))return Dt(oe.current,j,ne,ve)}}),[oe,To,Tt]);let no=d.useRef(),yr=Rs(()=>{var je,ke,dt;if(r<50||(ye==null?void 0:ye.disableAccessibilityTree)===!0)return null;let j=ii(Rt,et,r,_,Ue),ne=Z?0:-1;!Z&&((je=j[0])==null?void 0:je.sourceIndex)===0&&(j=j.slice(1));let[ve,ge]=((ke=E.current)==null?void 0:ke.cell)??[],A=(dt=E.current)==null?void 0:dt.range,ce=j.map(he=>he.sourceIndex),we=(0,td.default)(l,Math.min(p,l+o));return ve!==void 0&&ge!==void 0&&!(ce.includes(ve)&&we.includes(ge))&&ro(null),d.createElement("table",{key:"access-tree",role:"grid","aria-rowcount":p+1,"aria-multiselectable":"true","aria-colcount":Rt.length+ne},d.createElement("thead",{role:"rowgroup"},d.createElement("tr",{role:"row","aria-rowindex":1},j.map(he=>d.createElement("th",{role:"columnheader","aria-selected":E.columns.hasIndex(he.sourceIndex),"aria-colindex":he.sourceIndex+1+ne,tabIndex:-1,onFocus:Fe=>{if(Fe.target!==an.current)return Pe==null?void 0:Pe([he.sourceIndex,-1])},key:he.sourceIndex},he.title)))),d.createElement("tbody",{role:"rowgroup"},we.map(he=>d.createElement("tr",{role:"row","aria-selected":E.rows.hasIndex(he),key:he,"aria-rowindex":he+2},j.map(Fe=>{let Ye=Fe.sourceIndex,lt=or(Ye,he),Pt=ve===Ye&&ge===he,Gt=A!==void 0&&Ye>=A.x&&Ye<A.x+A.width&&he>=A.y&&he<A.y+A.height,at=`glide-cell-${Ye}-${he}`,mt=[Ye,he],vt=m(mt,!0);return d.createElement("td",{key:lt,role:"gridcell","aria-colindex":Ye+1+ne,"aria-selected":Gt,"aria-readonly":Fn(vt)||!po(vt),id:at,"data-testid":at,onClick:()=>{let Oe=oe==null?void 0:oe.current;if(Oe!=null)return ee==null?void 0:ee({bounds:Tt(Oe,Ye,he),cancel:()=>{},preventDefault:()=>{},stopPropagation:()=>{},ctrlKey:!1,key:"Enter",keyCode:13,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:mt})},onFocusCapture:Oe=>{var st,Nt;if(!(Oe.target===an.current||((st=no.current)==null?void 0:st[0])===Ye&&((Nt=no.current)==null?void 0:Nt[1])===he))return no.current=mt,Pe==null?void 0:Pe(mt)},ref:Pt?ro:void 0,tabIndex:-1},rd(vt,rt))})))))},[r,Rt,et,_,Ue,p,l,o,E,ro,m,oe,ee,Tt,Pe],200),sr=z===0||!R?0:et>z?1:(0,Ql.default)(-Ue/100,0,1),er=-l*32+pt,B=L?(0,Ql.default)(-er/100,0,1):0,bt=d.useMemo(()=>{if(!sr&&!B)return null;let j={position:"absolute",top:0,left:Ct,width:r-Ct,height:n,opacity:sr,pointerEvents:"none",transition:Ge?void 0:"opacity 0.2s",boxShadow:"inset 13px 0 10px -13px rgba(0, 0, 0, 0.2)"},ne={position:"absolute",top:Bt,left:0,width:r,height:n,opacity:B,pointerEvents:"none",transition:me?void 0:"opacity 0.2s",boxShadow:"inset 0 13px 10px -13px rgba(0, 0, 0, 0.2)"};return d.createElement(d.Fragment,null,sr>0&&d.createElement("div",{id:"shadow-x",style:j}),B>0&&d.createElement("div",{id:"shadow-y",style:ne}))},[sr,B,Ct,r,Ge,Bt,n,me]),sn=d.useMemo(()=>({position:"absolute",top:0,left:0}),[]);return d.createElement(d.Fragment,null,d.createElement("canvas",{"data-testid":"data-grid-canvas",tabIndex:0,onKeyDown:Ei,onKeyUp:ar,onFocus:S,onBlur:T,ref:wr,style:it},yr),d.createElement("canvas",{ref:yt,style:sn}),bt)})),od=$t(yo(),1);function Un(e,t,r,n){return(0,od.default)(Math.round(t-(e.growOffset??0)),Math.ceil(r),Math.floor(n))}var id=e=>{let[t,r]=d.useState(),[n,o]=d.useState(),[i,a]=d.useState(),[l,s]=d.useState(),[c,u]=d.useState(!1),[h,p]=d.useState(),[m,f]=d.useState(),[v,k]=d.useState(),[M,y]=d.useState(!1),[S,T]=d.useState(),{onHeaderMenuClick:P,onHeaderIndicatorClick:E,getCellContent:z,onColumnMoved:F,onColumnResize:C,onColumnResizeStart:R,onColumnResizeEnd:L,gridRef:x,maxColumnWidth:w,minColumnWidth:I,onRowMoved:O,lockColumns:b,onColumnProposeMove:G,onMouseDown:_,onMouseUp:Z,onItemHovered:ee,onDragStart:V,canvasRef:se}=e,oe=(C??L??R)!==void 0,{columns:ue,selection:Te}=e,te=Te.columns,X=d.useCallback(le=>{let[Re,Pe]=le.location;i!==void 0&&l!==Re&&Re>=b?(u(!0),s(Re)):m!==void 0&&Pe!==void 0?(y(!0),k(Math.max(0,Pe))):n===void 0&&!c&&!M&&(ee==null||ee(le))},[i,m,l,ee,b,n,c,M]),J=F!==void 0,re=d.useCallback(le=>{var Re;if(le.button===0){let[Pe,Ke]=le.location;if(le.kind==="out-of-bounds"&&le.isEdge&&oe){let be=(Re=x==null?void 0:x.current)==null?void 0:Re.getBounds(ue.length-1,-1);be!==void 0&&(r(be.x),o(ue.length-1))}else if(le.kind==="header"&&Pe>=b){let be=se==null?void 0:se.current;if(le.isEdge&&oe&&be){r(le.bounds.x),o(Pe);let Ve=be.getBoundingClientRect().width/be.offsetWidth,Ne=le.bounds.width/Ve;R==null||R(ue[Pe],Ne,Pe,Ne+(ue[Pe].growOffset??0))}else le.kind==="header"&&J&&(p(le.bounds.x),a(Pe))}else le.kind==="cell"&&b>0&&Pe===0&&Ke!==void 0&&O!==void 0&&(T(le.bounds.y),f(Ke))}_==null||_(le)},[_,oe,b,O,x,ue,J,R,se]),ae=d.useCallback((le,Re)=>{c||M||(P==null||P(le,Re))},[c,M,P]),_e=d.useCallback((le,Re)=>{c||M||(E==null||E(le,Re))},[c,M,E]),Le=d.useRef(-1),Se=d.useCallback(()=>{Le.current=-1,f(void 0),k(void 0),T(void 0),y(!1),a(void 0),s(void 0),p(void 0),u(!1),o(void 0),r(void 0)},[]),$e=d.useCallback((le,Re)=>{if(le.button===0){if(n!==void 0){if((te==null?void 0:te.hasIndex(n))===!0)for(let Ke of te){if(Ke===n)continue;let be=ue[Ke],Ve=Un(be,Le.current,I,w);C==null||C(be,Ve,Ke,Ve+(be.growOffset??0))}let Pe=Un(ue[n],Le.current,I,w);if(L==null||L(ue[n],Pe,n,Pe+(ue[n].growOffset??0)),te.hasIndex(n))for(let Ke of te){if(Ke===n)continue;let be=ue[Ke],Ve=Un(be,Le.current,I,w);L==null||L(be,Ve,Ke,Ve+(be.growOffset??0))}}Se(),i!==void 0&&l!==void 0&&(G==null?void 0:G(i,l))!==!1&&(F==null||F(i,l)),m!==void 0&&v!==void 0&&(O==null||O(m,v))}Z==null||Z(le,Re)},[Z,n,i,l,m,v,te,L,ue,I,w,C,F,O,Se,G]),De=d.useMemo(()=>{if(!(i===void 0||l===void 0)&&i!==l&&(G==null?void 0:G(i,l))!==!1)return{src:i,dest:l}},[i,l,G]),ct=d.useCallback(le=>{let Re=se==null?void 0:se.current;if(i!==void 0&&h!==void 0)Math.abs(le.clientX-h)>20&&u(!0);else if(m!==void 0&&S!==void 0)Math.abs(le.clientY-S)>20&&y(!0);else if(n!==void 0&&t!==void 0&&Re){let Pe=Re.getBoundingClientRect().width/Re.offsetWidth,Ke=(le.clientX-t)/Pe,be=ue[n],Ve=Un(be,Ke,I,w);if(C==null||C(be,Ve,n,Ve+(be.growOffset??0)),Le.current=Ke,(te==null?void 0:te.first())===n)for(let Ne of te){if(Ne===n)continue;let Ge=ue[Ne],me=Un(Ge,Le.current,I,w);C==null||C(Ge,me,Ne,me+(Ge.growOffset??0))}}},[i,h,m,S,n,t,ue,I,w,C,te,se]),ut=d.useCallback((le,Re)=>{if(m===void 0||v===void 0)return z(le,Re);let[Pe,Ke]=le;return Ke===v?Ke=m:(Ke>v&&--Ke,Ke>=m&&(Ke+=1)),z([Pe,Ke],Re)},[m,v,z]),Ze=d.useCallback(le=>{V==null||V(le),le.defaultPrevented()||Se()},[Se,V]);return d.createElement(nd,{accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,columns:e.columns,disabledRows:e.disabledRows,drawFocusRing:e.drawFocusRing,drawHeader:e.drawHeader,drawCell:e.drawCell,enableGroups:e.enableGroups,eventTargetRef:e.eventTargetRef,experimental:e.experimental,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,headerIcons:e.headerIcons,height:e.height,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,resizeColumn:n,isDraggable:e.isDraggable,isFilling:e.isFilling,isFocused:e.isFocused,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDrop:e.onDrop,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseMove:e.onMouseMove,prelightCells:e.prelightCells,rowHeight:e.rowHeight,rows:e.rows,selection:e.selection,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,resizeIndicator:e.resizeIndicator,verticalBorder:e.verticalBorder,width:e.width,getCellContent:ut,isResizing:n!==void 0,onHeaderMenuClick:ae,onHeaderIndicatorClick:_e,isDragging:c,onItemHovered:X,onDragStart:Ze,onMouseDown:re,allowResize:oe,onMouseUp:$e,dragAndDropState:De,onMouseMoveRaw:ct,ref:x})};function ld(e){let t=(0,d.useRef)(null),[r,n]=(0,d.useState)({width:e==null?void 0:e[0],height:e==null?void 0:e[1]});return(0,d.useLayoutEffect)(()=>{let o=new window.ResizeObserver(i=>{for(let a of i){let{width:l,height:s}=a&&a.contentRect||{};n(c=>c.width===l&&c.height===s?c:{width:l,height:s})}});return t.current&&o.observe(t.current,void 0),()=>{o.disconnect()}},[t.current]),{ref:t,...r}}var ad=(e,t,r)=>{let n=(0,d.useRef)(null),o=(0,d.useRef)(null),i=(0,d.useRef)(null),a=(0,d.useRef)(0),l=(0,d.useRef)(t);l.current=t;let s=r.current;(0,d.useEffect)(()=>{let c=()=>{var p,m;if(o.current===!1&&s!==null){let f=[s.scrollLeft,s.scrollTop];if(((p=i.current)==null?void 0:p[0])===f[0]&&((m=i.current)==null?void 0:m[1])===f[1])if(a.current>10){i.current=null,o.current=null;return}else a.current++;else a.current=0,l.current(f[0],f[1]),i.current=f;n.current=window.setTimeout(c,8.333333333333334)}},u=()=>{o.current=!0,i.current=null,n.current!==null&&(window.clearTimeout(n.current),n.current=null)},h=p=>{p.touches.length===0&&(o.current=!1,a.current=0,n.current=window.setTimeout(c,8.333333333333334))};if(e&&s!==null){let p=s;return p.addEventListener("touchstart",u),p.addEventListener("touchend",h),()=>{p.removeEventListener("touchstart",u),p.removeEventListener("touchend",h),n.current!==null&&window.clearTimeout(n.current)}}},[e,s])},sd=()=>e=>e.isSafari?"scroll":"auto",cd=Qt("div")({name:"ScrollRegionStyle",class:"gdg-s1dgczr6",propsAsIs:!1,vars:{"s1dgczr6-0":[sd()]}}),ud=33554400,dd=5e6;function hd(e){let[t,r]=d.useState(!1),n=typeof window>"u"?null:window,o=d.useRef(0);return jt("touchstart",d.useCallback(()=>{window.clearTimeout(o.current),r(!0)},[]),n,!0,!1),jt("touchend",d.useCallback(i=>{i.touches.length===0&&(o.current=window.setTimeout(()=>r(!1),e))},[e]),n,!0,!1),t}const fd=e=>{var Te,te;let{children:t,clientHeight:r,scrollHeight:n,scrollWidth:o,update:i,draggable:a,className:l,preventDiagonalScrolling:s=!1,paddingBottom:c=0,paddingRight:u=0,rightElement:h,rightElementProps:p,kineticScrollPerfHack:m=!1,scrollRef:f,initialSize:v}=e,k=[],M=(p==null?void 0:p.sticky)??!1,y=(p==null?void 0:p.fill)??!1,S=d.useRef(0),T=d.useRef(0),P=d.useRef(null),E=typeof window>"u"?1:window.devicePixelRatio,z=d.useRef(E);d.useEffect(()=>{if(z.current!==E){S.current=0,T.current=0,z.current=E;let X=P.current;X!==null&&O.current(X.scrollLeft,X.scrollTop)}},[E]);let F=d.useRef({scrollLeft:0,scrollTop:0,lockDirection:void 0}),C=d.useRef(null),R=hd(200),[L,x]=d.useState(!0),w=d.useRef(0);d.useLayoutEffect(()=>{if(!L||R||F.current.lockDirection===void 0)return;let X=P.current;if(X===null)return;let[J,re]=F.current.lockDirection;J===void 0?re!==void 0&&(X.scrollTop=re):X.scrollLeft=J,F.current.lockDirection=void 0},[R,L]);let I=d.useCallback((X,J)=>{var Pe;let re=P.current;if(re===null)return;J??(J=re.scrollTop),X??(X=re.scrollLeft);let ae=F.current.scrollTop,_e=F.current.scrollLeft,Le=X-_e,Se=J-ae;R&&Le!==0&&Se!==0&&(Math.abs(Le)>3||Math.abs(Se)>3)&&s&&F.current.lockDirection===void 0&&(F.current.lockDirection=Math.abs(Le)<Math.abs(Se)?[_e,void 0]:[void 0,ae]);let $e=F.current.lockDirection;X=($e==null?void 0:$e[0])??X,J=($e==null?void 0:$e[1])??J,F.current.scrollLeft=X,F.current.scrollTop=J;let De=re.clientWidth,ct=re.clientHeight,ut=J,Ze=T.current-ut,le=re.scrollHeight-ct;T.current=ut;let Re;le>0&&n>re.scrollHeight+5?Math.abs(Ze)>2e3||ut===0||ut===le?(Re=Math.max(0,Math.min(1,ut/le))*(n-ct),S.current=Re):(S.current-=Ze,Re=S.current):(Re=ut,S.current=Re),Re=Math.max(0,Math.min(Re,n-ct)),S.current=Re,$e!==void 0&&(window.clearTimeout(w.current),x(!1),w.current=window.setTimeout(()=>x(!0),200)),i({x:X,y:Re,width:De-u,height:ct-c,paddingRight:((Pe=C.current)==null?void 0:Pe.clientWidth)??0})},[c,u,n,i,s,R]);ad(m&&xo.value,I,P);let O=d.useRef(I);O.current=I;let b=d.useRef(),G=d.useRef(!1);d.useLayoutEffect(()=>{G.current?I():G.current=!0},[I,c,u]);let _=d.useCallback(X=>{P.current=X,f!==void 0&&(f.current=X)},[f]),Z=0,ee=0,V=Math.min(n,ud);for(k.push(d.createElement("div",{key:Z++,style:{width:o,height:0}}));ee<V;){let X=Math.min(dd,V-ee);k.push(d.createElement("div",{key:Z++,style:{width:0,height:X}})),ee+=X}let{ref:se,width:oe,height:ue}=ld(v);return typeof window<"u"&&(((Te=b.current)==null?void 0:Te.height)!==ue||((te=b.current)==null?void 0:te.width)!==oe)&&(window.setTimeout(()=>O.current(),0),b.current={width:oe,height:ue}),(oe??0)===0||(ue??0)===0?d.createElement("div",{ref:se}):d.createElement("div",{ref:se},d.createElement(cd,{isSafari:xo.value},d.createElement("div",{className:"dvn-underlay"},t),d.createElement("div",{ref:_,style:b.current,draggable:a,onDragStart:X=>{a||(X.stopPropagation(),X.preventDefault())},className:"dvn-scroller "+(l??""),onScroll:()=>I()},d.createElement("div",{className:"dvn-scroll-inner"+(h===void 0?" dvn-hidden":"")},d.createElement("div",{className:"dvn-stack"},k),h!==void 0&&d.createElement(d.Fragment,null,!y&&d.createElement("div",{className:"dvn-spacer"}),d.createElement("div",{ref:C,style:{height:ue,maxHeight:r-Math.ceil(E%1),position:"sticky",top:0,paddingLeft:1,marginBottom:-40,marginRight:u,flexGrow:y?1:void 0,right:M?u??0:void 0,pointerEvents:"auto"}},h))))))};var gd=e=>{let{columns:t,rows:r,rowHeight:n,headerHeight:o,groupHeaderHeight:i,enableGroups:a,freezeColumns:l,experimental:s,nonGrowWidth:c,clientSize:u,className:h,onVisibleRegionChanged:p,scrollRef:m,preventDiagonalScrolling:f,rightElement:v,rightElementProps:k,overscrollX:M,overscrollY:y,initialSize:S,smoothScrollX:T=!1,smoothScrollY:P=!1,isDraggable:E}=e,{paddingRight:z,paddingBottom:F}=s??{},[C,R]=u,L=d.useRef(),x=d.useRef(),w=d.useRef(),I=d.useRef(),O=c+Math.max(0,M??0),b=a?o+i:o;if(typeof n=="number")b+=r*n;else for(let ee=0;ee<r;ee++)b+=n(ee);y!==void 0&&(b+=y);let G=d.useRef(),_=d.useCallback(()=>{var _e,Le;if(G.current===void 0)return;let ee={...G.current},V=0,se=ee.x<0?-ee.x:0,oe=0,ue=0;ee.x=ee.x<0?0:ee.x;let Te=0;for(let Se=0;Se<l;Se++)Te+=t[Se].width;for(let Se of t){let $e=V-Te;if(ee.x>=$e+Se.width)V+=Se.width,ue++,oe++;else if(ee.x>$e)V+=Se.width,T?se+=$e-ee.x:ue++,oe++;else if(ee.x+ee.width>$e)V+=Se.width,oe++;else break}let te=0,X=0,J=0;if(typeof n=="number")P?(X=Math.floor(ee.y/n),te=X*n-ee.y):X=Math.ceil(ee.y/n),J=Math.ceil(ee.height/n)+X,te<0&&J++;else{let Se=0;for(let $e=0;$e<r;$e++){let De=n($e),ct=Se+(P?0:De/2);if(ee.y>=Se+De)Se+=De,X++,J++;else if(ee.y>ct)Se+=De,P?te+=ct-ee.y:X++,J++;else if(ee.y+ee.height>De/2+Se)Se+=De,J++;else break}}X=Math.max(0,Math.min(X,r-1)),J=Math.max(X,Math.min(J,r));let re={x:ue,y:X,width:oe-ue,height:J-X},ae=L.current;(ae===void 0||ae.y!==re.y||ae.x!==re.x||ae.height!==re.height||ae.width!==re.width||x.current!==se||w.current!==te||ee.width!==((_e=I.current)==null?void 0:_e[0])||ee.height!==((Le=I.current)==null?void 0:Le[1]))&&(p==null||p({x:ue,y:X,width:oe-ue,height:J-X},ee.width,ee.height,ee.paddingRight??0,se,te),L.current=re,x.current=se,w.current=te,I.current=[ee.width,ee.height])},[t,n,r,p,l,T,P]),Z=d.useCallback(ee=>{G.current=ee,_()},[_]);return d.useEffect(()=>{_()},[_]),d.createElement(fd,{scrollRef:m,className:h,kineticScrollPerfHack:s==null?void 0:s.kineticScrollPerfHack,preventDiagonalScrolling:f,draggable:E===!0||typeof E=="string",scrollWidth:O+(z??0),scrollHeight:b+(F??0),clientHeight:R,rightElement:v,paddingBottom:F,paddingRight:z,rightElementProps:k,update:Z,initialSize:S},d.createElement(id,{eventTargetRef:m,width:C,height:R,accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,columns:e.columns,disabledRows:e.disabledRows,enableGroups:e.enableGroups,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellContent:e.getCellContent,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,isFilling:e.isFilling,isFocused:e.isFocused,lockColumns:e.lockColumns,maxColumnWidth:e.maxColumnWidth,minColumnWidth:e.minColumnWidth,onHeaderMenuClick:e.onHeaderMenuClick,onHeaderIndicatorClick:e.onHeaderIndicatorClick,onMouseMove:e.onMouseMove,prelightCells:e.prelightCells,rowHeight:e.rowHeight,rows:e.rows,selection:e.selection,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,onColumnProposeMove:e.onColumnProposeMove,verticalBorder:e.verticalBorder,drawFocusRing:e.drawFocusRing,drawHeader:e.drawHeader,drawCell:e.drawCell,experimental:e.experimental,gridRef:e.gridRef,headerIcons:e.headerIcons,isDraggable:e.isDraggable,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onColumnMoved:e.onColumnMoved,onColumnResize:e.onColumnResize,onColumnResizeEnd:e.onColumnResizeEnd,onColumnResizeStart:e.onColumnResizeStart,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDragStart:e.onDragStart,onDrop:e.onDrop,onItemHovered:e.onItemHovered,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onRowMoved:e.onRowMoved,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY,resizeIndicator:e.resizeIndicator}))};const pd=Qt("div")({name:"SearchWrapper",class:"gdg-seveqep",propsAsIs:!1});var md=d.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},d.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 244l144-144 144 144M256 120v292"})),vd=d.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},d.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 268l144 144 144-144M256 392V100"})),wd=d.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},d.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368L144 144M368 144L144 368"})),yd=10,bd=e=>{let{canvasRef:t,cellYOffset:r,rows:n,columns:o,searchInputRef:i,searchValue:a,searchResults:l,onSearchValueChange:s,getCellsForSelection:c,onSearchResultsChanged:u,showSearch:h=!1,onSearchClose:p}=e,[m]=d.useState(()=>"search-box-"+Math.round(Math.random()*1e3)),[f,v]=d.useState(""),k=a??f,M=d.useCallback(V=>{v(V),s==null||s(V)},[s]),[y,S]=d.useState(),T=d.useRef(y);T.current=y,d.useEffect(()=>{l!==void 0&&(l.length>0?S(V=>({rowsSearched:n,results:l.length,selectedIndex:(V==null?void 0:V.selectedIndex)??-1})):S(void 0))},[n,l]);let P=d.useRef();P.current===void 0&&(P.current=new AbortController);let E=d.useRef(),[z,F]=d.useState([]),C=l??z,R=d.useCallback(()=>{E.current!==void 0&&(window.cancelAnimationFrame(E.current),E.current=void 0,P.current.abort())},[]),L=d.useRef(r);L.current=r;let x=d.useCallback(V=>{let se=new RegExp(V.replace(/([$()*+.?[\\\]^{|}-])/g,"\\$1"),"i"),oe=L.current,ue=Math.min(10,n),Te=0;S(void 0),F([]);let te=[],X=async()=>{var ct;if(c===void 0)return;let J=performance.now(),re=n-Te,ae=c({x:0,y:oe,width:o.length,height:Math.min(ue,re,n-oe)},P.current.signal);typeof ae=="function"&&(ae=await ae());let _e=!1;for(let[ut,Ze]of ae.entries())for(let[le,Re]of Ze.entries()){let Pe;switch(Re.kind){case pe.Text:case pe.Number:Pe=Re.displayData;break;case pe.Uri:case pe.Markdown:Pe=Re.data;break;case pe.Boolean:Pe=typeof Re.data=="boolean"?Re.data.toString():void 0;break;case pe.Image:case pe.Bubble:Pe=Re.data.join("\u{1F433}");break;case pe.Custom:Pe=Re.copyData;break}Pe!==void 0&&se.test(Pe)&&(te.push([le,ut+oe]),_e=!0)}let Le=performance.now();_e&&F([...te]),Te+=ae.length,Jt(Te<=n);let Se=((ct=T.current)==null?void 0:ct.selectedIndex)??-1;S({results:te.length,rowsSearched:Te,selectedIndex:Se}),u==null||u(te,Se),oe+ue>=n?oe=0:oe+=ue;let $e=Le-J,De=yd/Math.max($e,1);ue=Math.ceil(ue*De),Te<n&&te.length<1e3&&(E.current=window.requestAnimationFrame(X))};R(),E.current=window.requestAnimationFrame(X)},[R,o.length,c,u,n]),w=d.useCallback(()=>{var V;p==null||p(),S(void 0),F([]),u==null||u([],-1),R(),(V=t==null?void 0:t.current)==null||V.focus()},[R,t,p,u]),I=d.useCallback(V=>{M(V.target.value),l===void 0&&(V.target.value===""?(S(void 0),F([]),R()):x(V.target.value))},[x,R,M,l]);d.useEffect(()=>{h&&i.current!==null&&(M(""),i.current.focus({preventScroll:!0}))},[h,i,M]);let O=d.useCallback(V=>{var oe;if((oe=V==null?void 0:V.stopPropagation)==null||oe.call(V),y===void 0)return;let se=(y.selectedIndex+1)%y.results;S({...y,selectedIndex:se}),u==null||u(C,se)},[y,u,C]),b=d.useCallback(V=>{var oe;if((oe=V==null?void 0:V.stopPropagation)==null||oe.call(V),y===void 0)return;let se=(y.selectedIndex-1)%y.results;se<0&&(se+=y.results),S({...y,selectedIndex:se}),u==null||u(C,se)},[u,C,y]),G=d.useCallback(V=>{(V.ctrlKey||V.metaKey)&&V.nativeEvent.code==="KeyF"||V.key==="Escape"?(w(),V.stopPropagation(),V.preventDefault()):V.key==="Enter"&&(V.shiftKey?b():O())},[w,O,b]);d.useEffect(()=>()=>{R()},[R]);let[_,Z]=d.useState(!1);d.useEffect(()=>{if(h)Z(!0);else{let V=setTimeout(()=>Z(!1),150);return()=>clearTimeout(V)}},[h]);let ee=d.useMemo(()=>{if(!h&&!_)return null;let V;y!==void 0&&(V=y.results>=1e3?"over 1000":`${y.results} result${y.results===1?"":"s"}`,y.selectedIndex>=0&&(V=`${y.selectedIndex+1} of ${V}`));let se=ue=>{ue.stopPropagation()},oe={width:`${Math.floor(((y==null?void 0:y.rowsSearched)??0)/n*100)}%`};return d.createElement(pd,{className:"gdg-search-bar"+(h?"":" out"),onMouseDown:se,onMouseMove:se,onMouseUp:se,onClick:se},d.createElement("div",{className:"gdg-search-bar-inner"},d.createElement("input",{id:m,"aria-hidden":!h,"data-testid":"search-input",ref:i,onChange:I,value:k,tabIndex:h?void 0:-1,onKeyDownCapture:G}),d.createElement("button",{type:"button","aria-label":"Previous Result","aria-hidden":!h,tabIndex:h?void 0:-1,onClick:b,disabled:((y==null?void 0:y.results)??0)===0},md),d.createElement("button",{type:"button","aria-label":"Next Result","aria-hidden":!h,tabIndex:h?void 0:-1,onClick:O,disabled:((y==null?void 0:y.results)??0)===0},vd),p!==void 0&&d.createElement("button",{type:"button","aria-label":"Close Search","aria-hidden":!h,"data-testid":"search-close-button",tabIndex:h?void 0:-1,onClick:w},wd)),y===void 0?d.createElement("div",{className:"gdg-search-status"},d.createElement("label",{htmlFor:m},"Type to search")):d.createElement(d.Fragment,null,d.createElement("div",{className:"gdg-search-status"},d.createElement("div",{"data-testid":"search-result-area"},V)),d.createElement("div",{className:"gdg-search-progress",style:oe})))},[h,_,y,n,m,i,I,k,G,b,O,p,w]);return d.createElement(d.Fragment,null,d.createElement(gd,{prelightCells:C,accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,className:e.className,clientSize:e.clientSize,columns:e.columns,disabledRows:e.disabledRows,enableGroups:e.enableGroups,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,nonGrowWidth:e.nonGrowWidth,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellContent:e.getCellContent,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,initialSize:e.initialSize,isFilling:e.isFilling,isFocused:e.isFocused,lockColumns:e.lockColumns,maxColumnWidth:e.maxColumnWidth,minColumnWidth:e.minColumnWidth,onHeaderMenuClick:e.onHeaderMenuClick,onHeaderIndicatorClick:e.onHeaderIndicatorClick,onMouseMove:e.onMouseMove,onVisibleRegionChanged:e.onVisibleRegionChanged,overscrollX:e.overscrollX,overscrollY:e.overscrollY,preventDiagonalScrolling:e.preventDiagonalScrolling,rightElement:e.rightElement,rightElementProps:e.rightElementProps,rowHeight:e.rowHeight,rows:e.rows,scrollRef:e.scrollRef,selection:e.selection,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,verticalBorder:e.verticalBorder,onColumnProposeMove:e.onColumnProposeMove,drawFocusRing:e.drawFocusRing,drawCell:e.drawCell,drawHeader:e.drawHeader,experimental:e.experimental,gridRef:e.gridRef,headerIcons:e.headerIcons,isDraggable:e.isDraggable,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onColumnMoved:e.onColumnMoved,onColumnResize:e.onColumnResize,onColumnResizeEnd:e.onColumnResizeEnd,onColumnResizeStart:e.onColumnResizeStart,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDragStart:e.onDragStart,onDrop:e.onDrop,onItemHovered:e.onItemHovered,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onRowMoved:e.onRowMoved,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY,resizeIndicator:e.resizeIndicator}),ee)},xd=()=>e=>Math.max(16,e.targetHeight-10),Cd=Qt("input")({name:"RenameInput",class:"gdg-r17m35ur",propsAsIs:!1,vars:{"r17m35ur-0":[xd(),"px"]}});const Sd=e=>{let{bounds:t,group:r,onClose:n,canvasBounds:o,onFinish:i}=e,[a,l]=d.useState(r);return d.createElement(tf,{style:{position:"absolute",left:t.x-o.left+1,top:t.y-o.top,width:t.width-2,height:t.height},className:"gdg-c1tqibwd",onClickOutside:n},d.createElement(Cd,{targetHeight:t.height,"data-testid":"group-rename-input",value:a,onBlur:n,onFocus:s=>s.target.setSelectionRange(0,a.length),onChange:s=>l(s.target.value),onKeyDown:s=>{s.key==="Enter"?i(a):s.key==="Escape"&&n()},autoFocus:!0}))};function kd(e,t){return e===void 0?!1:e.length>1&&e.startsWith("_")?Number.parseInt(e.slice(1))===t.keyCode:e.length===1&&e>="a"&&e<="z"?e.toUpperCase().codePointAt(0)===t.keyCode:e===t.key}function Be(e,t,r){let n=ea(e,t);return n&&(r.didMatch=!0),n}function ea(e,t){if(e.length===0)return!1;if(e.includes("|")){let l=e.split("|");for(let s of l)if(ea(s,t))return!0;return!1}let r=!1,n=!1,o=!1,i=!1,a=e.split("+");if(!kd(a.pop(),t))return!1;if(a[0]==="any")return!0;for(let l of a)switch(l){case"ctrl":r=!0;break;case"shift":n=!0;break;case"alt":o=!0;break;case"meta":i=!0;break;case"primary":Co.value?i=!0:r=!0;break}return t.altKey===o&&t.ctrlKey===r&&t.shiftKey===n&&t.metaKey===i}function Md(e,t,r,n,o,i,a){return[d.useCallback((l,s,c,u)=>{var v;(i==="cell"||i==="multi-cell")&&l!==void 0&&(l={...l,range:{x:l.cell[0],y:l.cell[1],width:1,height:1}}),!a&&l!==void 0&&l.range.width>1&&(l={...l,range:{...l.range,width:1,x:l.cell[0]}});let h=r==="mixed"&&(c||u==="drag"),p=n==="mixed"&&h,m=o==="mixed"&&h,f={current:l===void 0?void 0:{...l,rangeStack:u==="drag"?((v=e.current)==null?void 0:v.rangeStack)??[]:[]},columns:p?e.columns:nt.empty(),rows:m?e.rows:nt.empty()};c&&(i==="multi-rect"||i==="multi-cell")&&f.current!==void 0&&e.current!==void 0&&(f={...f,current:{...f.current,rangeStack:[...e.current.rangeStack,e.current.range]}}),t(f,s)},[n,e,r,i,a,o,t]),d.useCallback((l,s,c)=>{l??(l=e.rows),s!==void 0&&(l=l.add(s));let u;if(o==="exclusive"&&l.length>0)u={current:void 0,columns:nt.empty(),rows:l};else{let h=c&&r==="mixed",p=c&&n==="mixed";u={current:h?e.current:void 0,columns:p?e.columns:nt.empty(),rows:l}}t(u,!1)},[n,e,r,o,t]),d.useCallback((l,s,c)=>{l??(l=e.columns),s!==void 0&&(l=l.add(s));let u;if(n==="exclusive"&&l.length>0)u={current:void 0,rows:nt.empty(),columns:l};else{let h=c&&r==="mixed",p=c&&o==="mixed";u={current:h?e.current:void 0,rows:p?e.rows:nt.empty(),columns:l}}t(u,!1)},[n,e,r,o,t])]}function Rd(e,t,r,n,o){let i=d.useCallback(s=>{if(e===!0){let c=[];for(let u=s.y;u<s.y+s.height;u++){let h=[];for(let p=s.x;p<s.x+s.width;p++)p<0||u>=o?h.push({kind:pe.Loading,allowOverlay:!1}):h.push(t([p,u]));c.push(h)}return c}return(e==null?void 0:e(s,n.signal))??[]},[n.signal,t,e,o]),a=e===void 0?void 0:i,l=d.useCallback(s=>{if(a===void 0)return[];let c={...s,x:s.x-r};if(c.x<0){c.x=0,c.width--;let u=a(c,n.signal);return typeof u=="function"?async()=>(await u()).map(h=>[{kind:pe.Loading,allowOverlay:!1},...h]):u.map(h=>[{kind:pe.Loading,allowOverlay:!1},...h])}return a(c,n.signal)},[n.signal,a,r]);return[e===void 0?void 0:l,a]}function Ed(e){if(e.copyData!==void 0)return{formatted:e.copyData,rawValue:e.copyData,format:"string",doNotEscape:!0};switch(e.kind){case pe.Boolean:return{formatted:e.data===!0?"TRUE":e.data===!1?"FALSE":e.data===void 0?"INDETERMINATE":"",rawValue:e.data,format:"boolean"};case pe.Custom:return{formatted:e.copyData,rawValue:e.copyData,format:"string"};case pe.Image:case pe.Bubble:return{formatted:e.data,rawValue:e.data,format:"string-array"};case pe.Drilldown:return{formatted:e.data.map(t=>t.text),rawValue:e.data.map(t=>t.text),format:"string-array"};case pe.Text:return{formatted:e.displayData??e.data,rawValue:e.data,format:"string"};case pe.Uri:return{formatted:e.displayData??e.data,rawValue:e.data,format:"url"};case pe.Markdown:case pe.RowID:return{formatted:e.data,rawValue:e.data,format:"string"};case pe.Number:return{formatted:e.displayData,rawValue:e.data,format:"number"};case pe.Loading:return{formatted:"#LOADING",rawValue:"",format:"string"};case pe.Protected:return{formatted:"************",rawValue:"",format:"string"};default:qo(e)}}function Id(e,t){return e.map((r,n)=>{let o=t[n];return r.map(i=>i.span!==void 0&&i.span[0]!==o?{formatted:"",rawValue:"",format:"string"}:Ed(i))})}function ta(e,t){return(t?/[\t\n",]/:/[\t\n"]/).test(e)&&(e=`"${e.replace(/"/g,'""')}"`),e}function Td(e){var r;let t=[];for(let n of e){let o=[];for(let i of n)i.format==="url"?o.push(((r=i.rawValue)==null?void 0:r.toString())??""):i.format==="string-array"?o.push(i.formatted.map(a=>ta(a,!0)).join(",")):o.push(i.doNotEscape===!0?i.formatted:ta(i.formatted,!1));t.push(o.join("	"))}return t.join(`
`)}function yi(e){return e.replace(/\t/g,"    ").replace(/ {2,}/g,t=>"<span> </span>".repeat(t.length))}function ra(e){return'"'+e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+'"'}function Pd(e){return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function Od(e){var r;let t=[];t.push('<style type="text/css"><!--br {mso-data-placement:same-cell;}--></style>',"<table><tbody>");for(let n of e){t.push("<tr>");for(let o of n){let i=`gdg-format="${o.format}"`;o.format==="url"?t.push(`<td ${i}><a href="${o.rawValue}">${yi(o.formatted)}</a></td>`):o.format==="string-array"?t.push(`<td ${i}><ol>${o.formatted.map((a,l)=>`<li gdg-raw-value=${ra(o.rawValue[l])}>`+yi(a)+"</li>").join("")}</ol></td>`):t.push(`<td gdg-raw-value=${ra(((r=o.rawValue)==null?void 0:r.toString())??"")} ${i}>${yi(o.formatted)}</td>`)}t.push("</tr>")}return t.push("</tbody></table>"),t.join("")}function Dd(e,t){let r=Id(e,t);return{textPlain:Td(r),textHtml:Od(r)}}function na(e){var a;let t=document.createElement("html");t.innerHTML=e.replace(/&nbsp;/g," ");let r=t.querySelector("table");if(r===null)return;let n=[r],o=[],i;for(;n.length>0;){let l=n.pop();if(l===void 0)break;if(l instanceof HTMLTableElement||l.nodeName==="TBODY")n.push(...[...l.children].reverse());else if(l instanceof HTMLTableRowElement)i!==void 0&&o.push(i),i=[],n.push(...[...l.children].reverse());else if(l instanceof HTMLTableCellElement){let s=l.cloneNode(!0),c=s.children.length===1&&s.children[0].nodeName==="P"?s.children[0]:null,u=(c==null?void 0:c.children.length)===1&&c.children[0].nodeName==="FONT",h=s.querySelectorAll("br");for(let f of h)f.replaceWith(`
`);let p=s.getAttribute("gdg-raw-value"),m=s.getAttribute("gdg-format")??"string";if(s.querySelector("a")!==null)i==null||i.push({rawValue:((a=s.querySelector("a"))==null?void 0:a.getAttribute("href"))??"",formatted:s.textContent??"",format:m});else if(s.querySelector("ol")!==null){let f=s.querySelectorAll("li");i==null||i.push({rawValue:[...f].map(v=>v.getAttribute("gdg-raw-value")??""),formatted:[...f].map(v=>v.textContent??""),format:"string-array"})}else if(p!==null)i==null||i.push({rawValue:Pd(p),formatted:s.textContent??"",format:m});else{let f=s.textContent??"";u&&(f=f.replace(/\n(?!\n)/g,"")),i==null||i.push({rawValue:f??"",formatted:f??"",format:m})}}}return i!==void 0&&o.push(i),o}function Hd(e,t,r,n,o){var l;let i=e;if(n==="allowPartial"||e.current===void 0||t===void 0)return e;let a=!1;do{if((e==null?void 0:e.current)===void 0)break;let s=(l=e.current)==null?void 0:l.range,c=[];if(s.width>2){let p=t({x:s.x,y:s.y,width:1,height:s.height},o.signal);if(typeof p=="function")return i;c.push(...p);let m=t({x:s.x+s.width-1,y:s.y,width:1,height:s.height},o.signal);if(typeof m=="function")return i;c.push(...m)}else{let p=t({x:s.x,y:s.y,width:s.width,height:s.height},o.signal);if(typeof p=="function")return i;c.push(...p)}let u=s.x-r,h=s.x+s.width-1-r;for(let p of c)for(let m of p)m.span!==void 0&&(u=Math.min(m.span[0],u),h=Math.max(m.span[1],h));u===s.x-r&&h===s.x+s.width-1-r?a=!0:e={current:{cell:e.current.cell??[0,0],range:{x:u+r,y:s.y,width:h-u+1,height:s.height},rangeStack:e.current.rangeStack},columns:e.columns,rows:e.rows}}while(!a);return e}function oa(e){return e.startsWith('"')&&e.endsWith('"')&&(e=e.slice(1,-1).replace(/""/g,'"')),e}function zd(e){let t;(function(l){l[l.None=0]="None",l[l.inString=1]="inString",l[l.inStringPostQuote=2]="inStringPostQuote"})(t||(t={}));let r=[],n=[],o=0,i=t.None;e=e.replace(/\r\n/g,`
`);let a=0;for(let l of e){switch(i){case t.None:l==="	"||l===`
`?(n.push(e.slice(o,a)),o=a+1,l===`
`&&(r.push(n),n=[])):l==='"'&&(i=t.inString);break;case t.inString:l==='"'&&(i=t.inStringPostQuote);break;case t.inStringPostQuote:l==='"'?i=t.inString:((l==="	"||l===`
`)&&(n.push(oa(e.slice(o,a))),o=a+1,l===`
`&&(r.push(n),n=[])),i=t.None);break}a++}return o<e.length&&n.push(oa(e.slice(o,e.length))),r.push(n),r.map(l=>l.map(s=>({rawValue:s,formatted:s,format:"string"})))}function Ad(e,t,r){var a;let n=Dd(e,t),o=l=>{var s;(s=window.navigator.clipboard)==null||s.writeText(l)},i=(l,s)=>{var c;return((c=window.navigator.clipboard)==null?void 0:c.write)===void 0?!1:(window.navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([l],{type:"text/plain"}),"text/html":new Blob([s],{type:"text/html"})})]),!0)};((a=window.navigator.clipboard)==null?void 0:a.write)!==void 0||(r==null?void 0:r.clipboardData)!==void 0?((l,s)=>{var c,u;try{if(r===void 0||r.clipboardData===null)throw Error("No clipboard data");(c=r==null?void 0:r.clipboardData)==null||c.setData("text/plain",l),(u=r==null?void 0:r.clipboardData)==null||u.setData("text/html",s)}catch{i(l,s)||o(l)}})(n.textPlain,n.textHtml):o(n.textPlain),r==null||r.preventDefault()}function ia(e){return e!==!0}function la(e){return typeof e=="string"?e:`${e}px`}var Ld=()=>e=>e.innerWidth,Fd=()=>e=>e.innerHeight,jd=Qt("div")({name:"Wrapper",class:"gdg-wmyidgi",propsAsIs:!1,vars:{"wmyidgi-0":[Ld()],"wmyidgi-1":[Fd()]}});const _d=e=>{let{inWidth:t,inHeight:r,children:n,...o}=e;return d.createElement(jd,{innerHeight:la(r),innerWidth:la(t),...o},n)};var Nd=2,Bd=1300;function Wd(e,t,r){let n=d.useRef(0),[o,i]=e??[0,0];d.useEffect(()=>{if(o===0&&i===0){n.current=0;return}let a=!1,l=0,s=c=>{var u;if(!a){if(l===0)l=c;else{let h=c-l;n.current=Math.min(1,n.current+h/Bd);let p=n.current**1.618*h*Nd;(u=t.current)==null||u.scrollBy(o*p,i*p),l=c,r==null||r()}window.requestAnimationFrame(s)}};return window.requestAnimationFrame(s),()=>{a=!0}},[t,o,i,r])}function $d({rowHeight:e,headerHeight:t,groupHeaderHeight:r,theme:n,overscrollX:o,overscrollY:i,scaleToRem:a,remSize:l}){let[s,c,u,h,p,m]=d.useMemo(()=>{if(!a||l===16)return[e,t,r,n,o,i];let f=l/16,v=e,k=us();return[typeof v=="number"?v*f:M=>Math.ceil(v(M)*f),Math.ceil(t*f),Math.ceil(r*f),{...n,headerIconSize:((n==null?void 0:n.headerIconSize)??k.headerIconSize)*f,cellHorizontalPadding:((n==null?void 0:n.cellHorizontalPadding)??k.cellHorizontalPadding)*f,cellVerticalPadding:((n==null?void 0:n.cellVerticalPadding)??k.cellVerticalPadding)*f},Math.ceil((o??0)*f),Math.ceil((i??0)*f)]},[r,t,o,i,l,e,a,n]);return{rowHeight:s,headerHeight:c,groupHeaderHeight:u,theme:h,overscrollX:p,overscrollY:m}}const Ar={downFill:!1,rightFill:!1,clear:!0,closeOverlay:!0,acceptOverlayDown:!0,acceptOverlayUp:!0,acceptOverlayLeft:!0,acceptOverlayRight:!0,copy:!0,paste:!0,cut:!0,search:!1,delete:!0,activateCell:!0,scrollToSelectedCell:!0,goToFirstCell:!0,goToFirstColumn:!0,goToFirstRow:!0,goToLastCell:!0,goToLastColumn:!0,goToLastRow:!0,goToNextPage:!0,goToPreviousPage:!0,selectToFirstCell:!0,selectToFirstColumn:!0,selectToFirstRow:!0,selectToLastCell:!0,selectToLastColumn:!0,selectToLastRow:!0,selectAll:!0,selectRow:!0,selectColumn:!0,goUpCell:!0,goRightCell:!0,goDownCell:!0,goLeftCell:!0,goUpCellRetainSelection:!0,goRightCellRetainSelection:!0,goDownCellRetainSelection:!0,goLeftCellRetainSelection:!0,selectGrowUp:!0,selectGrowRight:!0,selectGrowDown:!0,selectGrowLeft:!0};function We(e,t){return e===!0?t:e===!1?"":e}function aa(e){let t=Co.value;return{activateCell:We(e.activateCell," |Enter|shift+Enter"),clear:We(e.clear,"any+Escape"),closeOverlay:We(e.closeOverlay,"any+Escape"),acceptOverlayDown:We(e.acceptOverlayDown,"Enter"),acceptOverlayUp:We(e.acceptOverlayUp,"shift+Enter"),acceptOverlayLeft:We(e.acceptOverlayLeft,"shift+Tab"),acceptOverlayRight:We(e.acceptOverlayRight,"Tab"),copy:e.copy,cut:e.cut,delete:We(e.delete,t?"Backspace|Delete":"Delete"),downFill:We(e.downFill,"primary+_68"),scrollToSelectedCell:We(e.scrollToSelectedCell,"primary+Enter"),goDownCell:We(e.goDownCell,"ArrowDown"),goDownCellRetainSelection:We(e.goDownCellRetainSelection,"alt+ArrowDown"),goLeftCell:We(e.goLeftCell,"ArrowLeft|shift+Tab"),goLeftCellRetainSelection:We(e.goLeftCellRetainSelection,"alt+ArrowLeft"),goRightCell:We(e.goRightCell,"ArrowRight|Tab"),goRightCellRetainSelection:We(e.goRightCellRetainSelection,"alt+ArrowRight"),goUpCell:We(e.goUpCell,"ArrowUp"),goUpCellRetainSelection:We(e.goUpCellRetainSelection,"alt+ArrowUp"),goToFirstCell:We(e.goToFirstCell,"primary+Home"),goToFirstColumn:We(e.goToFirstColumn,"Home|primary+ArrowLeft"),goToFirstRow:We(e.goToFirstRow,"primary+ArrowUp"),goToLastCell:We(e.goToLastCell,"primary+End"),goToLastColumn:We(e.goToLastColumn,"End|primary+ArrowRight"),goToLastRow:We(e.goToLastRow,"primary+ArrowDown"),goToNextPage:We(e.goToNextPage,"PageDown"),goToPreviousPage:We(e.goToPreviousPage,"PageUp"),paste:e.paste,rightFill:We(e.rightFill,"primary+_82"),search:We(e.search,"primary+f"),selectAll:We(e.selectAll,"primary+a"),selectColumn:We(e.selectColumn,"ctrl+ "),selectGrowDown:We(e.selectGrowDown,"shift+ArrowDown"),selectGrowLeft:We(e.selectGrowLeft,"shift+ArrowLeft"),selectGrowRight:We(e.selectGrowRight,"shift+ArrowRight"),selectGrowUp:We(e.selectGrowUp,"shift+ArrowUp"),selectRow:We(e.selectRow,"shift+ "),selectToFirstCell:We(e.selectToFirstCell,"primary+shift+Home"),selectToFirstColumn:We(e.selectToFirstColumn,"primary+shift+ArrowLeft"),selectToFirstRow:We(e.selectToFirstRow,"primary+shift+ArrowUp"),selectToLastCell:We(e.selectToLastCell,"primary+shift+End"),selectToLastColumn:We(e.selectToLastColumn,"primary+shift+ArrowRight"),selectToLastRow:We(e.selectToLastRow,"primary+shift+ArrowDown")}}function Xd(e){let t=Ts(e);return d.useMemo(()=>{if(t===void 0)return aa(Ar);let r={...t,goToNextPage:(t==null?void 0:t.goToNextPage)??(t==null?void 0:t.pageDown)??Ar.goToNextPage,goToPreviousPage:(t==null?void 0:t.goToPreviousPage)??(t==null?void 0:t.pageUp)??Ar.goToPreviousPage,goToFirstCell:(t==null?void 0:t.goToFirstCell)??(t==null?void 0:t.first)??Ar.goToFirstCell,goToLastCell:(t==null?void 0:t.goToLastCell)??(t==null?void 0:t.last)??Ar.goToLastCell,selectToFirstCell:(t==null?void 0:t.selectToFirstCell)??(t==null?void 0:t.first)??Ar.selectToFirstCell,selectToLastCell:(t==null?void 0:t.selectToLastCell)??(t==null?void 0:t.last)??Ar.selectToLastCell};return aa({...Ar,...r})},[t])}function Kd(e){function t(r,n,o){if(typeof r=="number")return{headerIndex:r,isCollapsed:!1,depth:n,path:o};let i={headerIndex:r.headerIndex,isCollapsed:r.isCollapsed,depth:n,path:o};return r.subGroups!==void 0&&(i.subGroups=r.subGroups.map((a,l)=>t(a,n+1,[...o,l])).sort((a,l)=>a.headerIndex-l.headerIndex)),i}return e.map((r,n)=>t(r,0,[n])).sort((r,n)=>r.headerIndex-n.headerIndex)}function bi(e,t){let r=[];function n(l,s,c=!1){let u=s===null?t-l.headerIndex:s-l.headerIndex;if(l.subGroups!==void 0&&(u=l.subGroups[0].headerIndex-l.headerIndex),u--,r.push({rowIndex:-1,headerIndex:l.headerIndex,contentIndex:-1,skip:c,isCollapsed:l.isCollapsed,depth:l.depth,path:l.path,rows:u}),l.subGroups)for(let h=0;h<l.subGroups.length;h++){let p=h<l.subGroups.length-1?l.subGroups[h+1].headerIndex:s;n(l.subGroups[h],p,c||l.isCollapsed)}}let o=Kd(e.groups);for(let l=0;l<o.length;l++){let s=l<o.length-1?o[l+1].headerIndex:null;n(o[l],s)}let i=0,a=0;for(let l of r)l.contentIndex=a,a+=l.rows,l.rowIndex=i,i+=l.isCollapsed?1:l.rows+1;return r.filter(l=>l.skip===!1).map(l=>{let{skip:s,...c}=l;return c})}function xi(e,t){if(t===void 0||bi.length===0)return{path:[e],originalIndex:e,isGroupHeader:!1,groupIndex:e,contentIndex:e,groupRows:-1};let r=e;for(let n of t){if(r===0)return{path:[...n.path,-1],originalIndex:n.headerIndex,isGroupHeader:!0,groupIndex:-1,contentIndex:-1,groupRows:n.rows};if(n.isCollapsed)r--;else{if(r<=n.rows)return{path:[...n.path,r-1],originalIndex:n.headerIndex+r,isGroupHeader:!1,groupIndex:r-1,contentIndex:n.contentIndex+r-1,groupRows:n.rows};r=r-n.rows-1}}return{path:[e],originalIndex:e,isGroupHeader:!1,groupIndex:e,contentIndex:e,groupRows:-1}}function Vd(e,t,r,n){let o=d.useMemo(()=>e===void 0?void 0:bi(e,t),[e,t]),i=d.useMemo(()=>o==null?void 0:o.reduce((u,h)=>(u[h.rowIndex]=h,u),{}),[o]),a=d.useMemo(()=>o===void 0?t:o.reduce((u,h)=>u+(h.isCollapsed?1:h.rows+1),0),[o,t]),l=d.useMemo(()=>e===void 0||typeof r=="number"&&e.height===r?r:u=>i!=null&&i[u]?e.height:typeof r=="number"?r:r(u),[i,e,r]),s=d.useCallback(u=>{if(o===void 0)return u;let h=u;for(let p of o){if(h===0)return;if(h--,!p.isCollapsed){if(h<p.rows)return p.contentIndex+h;h-=p.rows}}return u},[o]),c=Dr(n??(e==null?void 0:e.themeOverride),d.useCallback(u=>{if(e===void 0)return n==null?void 0:n(u,u,u);if(n===void 0&&(e==null?void 0:e.themeOverride)===void 0)return;let{isGroupHeader:h,contentIndex:p,groupIndex:m}=xi(u,o);return h?e.themeOverride:n==null?void 0:n(u,m,p)},[o,n,e]));return e===void 0?{rowHeight:l,rows:t,rowNumberMapper:s,getRowThemeOverride:c}:{rowHeight:l,rows:a,rowNumberMapper:s,getRowThemeOverride:c}}function Yd(e,t){let r=d.useMemo(()=>e===void 0?void 0:bi(e,t),[e,t]);return{getRowGroupingForPath:ca,updateRowGroupingByPath:sa,mapper:d.useCallback(n=>{if(typeof n=="number")return xi(n,r);let o=xi(n[1],r);return{...o,originalIndex:[n[0],o.originalIndex]}},[r])}}function sa(e,t,r){let[n,...o]=t;return o[0]===-1?e.map((i,a)=>a===n?{...i,...r}:i):e.map((i,a)=>a===n?{...i,subGroups:sa(i.subGroups??[],o,r)}:i)}function ca(e,t){let[r,...n]=t;return n[0]===-1?e[r]:ca(e[r].subGroups??[],n)}function Gd(e,t){let[r]=d.useState(()=>({value:e,callback:t,facade:{get current(){return r.value},set current(n){let o=r.value;o!==n&&(r.value=n,r.callback(n,o))}}}));return r.callback=t,r.facade}function Ud(e,t,r,n,o){let[i,a]=d.useMemo(()=>[t!==void 0&&typeof r=="number"?Math.floor(t/r):0,t!==void 0&&typeof r=="number"?-(t%r):0],[t,r]),[l,s,c]=Is(d.useMemo(()=>({x:n.current.x,y:i,width:n.current.width??1,height:n.current.height??1,ty:a}),[n,a,i])),u=d.useRef(o);u.current=o;let h=Gd(null,f=>{f!==null&&t!==void 0?f.scrollTop=t:f!==null&&e!==void 0&&(f.scrollLeft=e)}),p=(l.height??1)>1;d.useLayoutEffect(()=>{if(t!==void 0&&h.current!==null&&p){if(h.current.scrollTop===t)return;h.current.scrollTop=t,h.current.scrollTop!==t&&c(),u.current()}},[t,p,c,h]);let m=(l.width??1)>1;return d.useLayoutEffect(()=>{if(e!==void 0&&h.current!==null&&m){if(h.current.scrollLeft===e)return;h.current.scrollLeft=e,h.current.scrollLeft!==e&&c(),u.current()}},[e,m,c,h]),{visibleRegion:l,setVisibleRegion:s,scrollRef:h}}var Jr=$t(yo(),1),qd=$t(vc(),1),ua=$t(bc(),1),Cn=$t(Sl(),1),Jd=$t(ei(),1),Qd=d.lazy(async()=>await $a(()=>import("./data-grid-overlay-editor--bKhiI3E.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),Zd=0;function eh(e){return(0,qd.default)((0,ua.default)((0,ua.default)(e).filter(t=>t.span!==void 0).map(t=>{var r,n;return(0,Cn.default)((((r=t.span)==null?void 0:r[0])??0)+1,(((n=t.span)==null?void 0:n[1])??0)+1)})))}function So(e,t){return e===void 0||t===0||e.columns.length===0&&e.current===void 0?e:{current:e.current===void 0?void 0:{cell:[e.current.cell[0]+t,e.current.cell[1]],range:{...e.current.range,x:e.current.range.x+t},rangeStack:e.current.rangeStack.map(r=>({...r,x:r.x+t}))},rows:e.rows,columns:e.columns.offset(t)}}var ko={kind:pe.Loading,allowOverlay:!1},Mo={columns:nt.empty(),rows:nt.empty(),current:void 0};const th=d.forwardRef((e,t)=>{var Na,Ba,Wa;let[r,n]=d.useState(Mo),[o,i]=d.useState(),a=d.useRef(null),l=d.useRef(null),[s,c]=d.useState(),u=d.useRef(),h=typeof window>"u"?null:window,{imageEditorOverride:p,getRowThemeOverride:m,markdownDivCreateNode:f,width:v,height:k,columns:M,rows:y,getCellContent:S,onCellClicked:T,onCellActivated:P,onFillPattern:E,onFinishedEditing:z,coercePasteValue:F,drawHeader:C,drawCell:R,editorBloom:L,onHeaderClicked:x,onColumnProposeMove:w,rangeSelectionColumnSpanning:I=!0,spanRangeBehavior:O="default",onGroupHeaderClicked:b,onCellContextMenu:G,className:_,onHeaderContextMenu:Z,getCellsForSelection:ee,onGroupHeaderContextMenu:V,onGroupHeaderRenamed:se,onCellEdited:oe,onCellsEdited:ue,onSearchResultsChanged:Te,searchResults:te,onSearchValueChange:X,searchValue:J,onKeyDown:re,onKeyUp:ae,keybindings:_e,editOnType:Le=!0,onRowAppended:Se,onColumnMoved:$e,validateCell:De,highlightRegions:ct,rangeSelect:ut="rect",columnSelect:Ze="multi",rowSelect:le="multi",rangeSelectionBlending:Re="exclusive",columnSelectionBlending:Pe="exclusive",rowSelectionBlending:Ke="exclusive",onDelete:be,onDragStart:Ve,onMouseMove:Ne,onPaste:Ge,copyHeaders:me=!1,freezeColumns:ye=0,cellActivationBehavior:rt="second-click",rowSelectionMode:qe="auto",onHeaderMenuClick:Ue,onHeaderIndicatorClick:pt,getGroupDetails:et,rowGrouping:He,onSearchClose:St,onItemHovered:At,onSelectionCleared:kt,showSearch:Et,onVisibleRegionChanged:_t,gridSelection:wt,onGridSelectionChange:pr,minColumnWidth:Lr=50,maxColumnWidth:ft=500,maxColumnAutoWidth:kr,provideEditor:ir,trailingRowOptions:Me,freezeTrailingRows:yt=0,allowedFillDirections:mr="orthogonal",scrollOffsetX:lr,scrollOffsetY:Zt,verticalBorder:Xe,onDragOverCell:xt,onDrop:Mt,onColumnResize:Bt,onColumnResizeEnd:Ot,onColumnResizeStart:Kt,customRenderers:Fr,fillHandle:Rt,experimental:Ct,fixedShadowX:Tt,fixedShadowY:Dt,headerIcons:Mr,imageWindowLoader:Ro,initialSize:jr,isDraggable:Rr,onDragLeave:Er,onRowMoved:vr,overscrollX:Eo,overscrollY:Io,preventDiagonalScrolling:kn,rightElement:Mn,rightElementProps:Rn,trapFocus:Qr=!1,smoothScrollX:Zr,smoothScrollY:_r,scaleToRem:To=!1,rowHeight:Mi=34,headerHeight:Po=36,groupHeaderHeight:en=Po,theme:Nr,isOutsideClick:Ri,renderers:qn,resizeIndicator:Oo,scrollToActiveCell:Jn=!0,drawFocusRing:tn=!0}=e,Qn=tn==="no-editor"?o===void 0:tn,it=typeof e.rowMarkers=="string"?void 0:e.rowMarkers,Vt=(it==null?void 0:it.kind)??e.rowMarkers??"none",Do=(it==null?void 0:it.width)??e.rowMarkerWidth,Ir=(it==null?void 0:it.startIndex)??e.rowMarkerStartIndex??1,Tr=(it==null?void 0:it.theme)??e.rowMarkerTheme,En=it==null?void 0:it.headerTheme,Br=it==null?void 0:it.headerAlwaysVisible,rn=le!=="multi"||(it==null?void 0:it.headerDisabled)===!0,nn=(it==null?void 0:it.checkboxStyle)??"square",Pr=Math.max(Lr,20),on=Math.max(ft,Pr),Ho=Math.max(kr??on,Pr),Zn=d.useMemo(()=>typeof window>"u"?{fontSize:"16px"}:window.getComputedStyle(document.documentElement),[]),{rows:Ee,rowNumberMapper:eo,rowHeight:Ei,getRowThemeOverride:ar}=Vd(He,y,Mi,m),{rowHeight:wr,headerHeight:ln,groupHeaderHeight:to,theme:an,overscrollX:ro,overscrollY:no}=$d({groupHeaderHeight:en,headerHeight:Po,overscrollX:Eo,overscrollY:Io,remSize:d.useMemo(()=>Number.parseFloat(Zn.fontSize),[Zn]),rowHeight:Ei,scaleToRem:To,theme:Nr}),yr=Xd(_e),sr=Do??(y>1e4?48:y>1e3?44:y>100?36:32),er=Vt!=="none",B=er?1:0,bt=Se!==void 0,sn=(Me==null?void 0:Me.sticky)===!0,[j,ne]=d.useState(!1),ve=Et??j,ge=d.useCallback(()=>{St===void 0?ne(!1):St()},[St]),A=d.useMemo(()=>wt===void 0?void 0:So(wt,B),[wt,B])??r,ce=d.useRef();ce.current===void 0&&(ce.current=new AbortController),d.useEffect(()=>()=>ce==null?void 0:ce.current.abort(),[]);let[we,je]=Rd(ee,S,B,ce.current,Ee),ke=d.useCallback((g,D,H)=>{if(De===void 0)return!0;let N=[g[0]-B,g[1]];return De==null?void 0:De(N,D,H)},[B,De]),dt=d.useRef(wt),he=d.useCallback((g,D)=>{D&&(g=Hd(g,we,B,O,ce.current)),pr===void 0?n(g):(dt.current=So(g,-B),pr(dt.current))},[pr,we,B,O]),Fe=Dr(Bt,d.useCallback((g,D,H,N)=>{Bt==null||Bt(M[H-B],D,H-B,N)},[Bt,B,M])),Ye=Dr(Ot,d.useCallback((g,D,H,N)=>{Ot==null||Ot(M[H-B],D,H-B,N)},[Ot,B,M])),lt=Dr(Kt,d.useCallback((g,D,H,N)=>{Kt==null||Kt(M[H-B],D,H-B,N)},[Kt,B,M])),Pt=Dr(C,d.useCallback((g,D)=>(C==null?void 0:C({...g,columnIndex:g.columnIndex-B},D))??!1,[C,B])),Gt=Dr(R,d.useCallback((g,D)=>(R==null?void 0:R({...g,col:g.col-B},D))??!1,[R,B])),at=d.useCallback(g=>{if(be!==void 0){let D=be(So(g,-B));return typeof D=="boolean"?D:So(D,B)}return!0},[be,B]),[mt,vt,Oe]=Md(A,he,Re,Pe,Ke,ut,I),st=d.useMemo(()=>Or(us(),an),[an]),[Nt,cn]=d.useState([0,0,0]),cr=d.useMemo(()=>{if(qn===void 0)return{};let g={};for(let D of qn)g[D.kind]=D;return g},[qn]),Ht=d.useCallback(g=>g.kind===pe.Custom?Fr==null?void 0:Fr.find(D=>D.isMatch(g)):cr[g.kind],[Fr,cr]),{sizedColumns:zt,nonGrowWidth:Ca}=oc(M,Ee,je,Nt[0]-(B===0?0:sr)-Nt[2],Pr,Ho,st,Ht,ce.current);Vt!=="none"&&(Ca+=sr);let Ii=d.useMemo(()=>zt.some(g=>g.group!==void 0),[zt]),oo=Ii?ln+to:ln,Sa=A.rows.length,ka=Vt==="none"?void 0:Sa===0?!1:Sa===Ee?!0:void 0,ot=d.useMemo(()=>Vt==="none"?zt:[{title:"",width:sr,icon:void 0,hasMenu:!1,style:"normal",themeOverride:Tr,rowMarker:nn,rowMarkerChecked:ka,headerRowMarkerTheme:En,headerRowMarkerAlwaysVisible:Br,headerRowMarkerDisabled:rn},...zt],[Vt,zt,sr,Tr,nn,ka,En,Br,rn]),Ut=d.useRef({height:1,width:1,x:0,y:0}),zo=d.useRef(!1),{setVisibleRegion:Ma,visibleRegion:un,scrollRef:gt}=Ud(lr,Zt,wr,Ut,()=>zo.current=!0);Ut.current=un;let Yh=un.x+B,Ao=un.y,Lt=d.useRef(null),Xt=d.useCallback(g=>{var D;g===!0?(D=Lt.current)==null||D.focus():window.requestAnimationFrame(()=>{var H;(H=Lt.current)==null||H.focus()})},[]),Wt=bt?Ee+1:Ee,tr=d.useCallback(g=>{let D=B===0?g:g.map(N=>({...N,location:[N.location[0]-B,N.location[1]]})),H=ue==null?void 0:ue(D);if(H!==!0)for(let N of D)oe==null||oe(N.location,N.value);return H},[oe,ue,B]),[dn,Ti]=d.useState(),Lo=A.current!==void 0&&A.current.range.width*A.current.range.height>1?A.current.range:void 0,In=Qn?(Na=A.current)==null?void 0:Na.cell:void 0,Fo=In==null?void 0:In[0],jo=In==null?void 0:In[1],Gh=d.useMemo(()=>{if((ct===void 0||ct.length===0)&&(Lo??Fo??jo??dn)===void 0)return;let g=[];if(ct!==void 0)for(let D of ct){let H=ot.length-D.range.x-B;H>0&&g.push({color:D.color,range:{...D.range,x:D.range.x+B,width:Math.min(H,D.range.width)},style:D.style})}return dn!==void 0&&g.push({color:mn(st.accentColor,0),range:dn,style:"dashed"}),Lo!==void 0&&g.push({color:mn(st.accentColor,.5),range:Lo,style:"solid-outline"}),Fo!==void 0&&jo!==void 0&&g.push({color:st.accentColor,range:{x:Fo,y:jo,width:1,height:1},style:"solid-outline"}),g.length>0?g:void 0},[dn,Lo,Fo,jo,ct,ot.length,st.accentColor,B]),Ra=d.useRef(ot);Ra.current=ot;let qt=d.useCallback(([g,D],H=!1)=>{var W,Y,$,K,U,Q,fe;let N=bt&&D===Wt-1;if(g===0&&er){if(N)return ko;let de=eo(D);return de===void 0?ko:{kind:Xr.Marker,allowOverlay:!1,checkboxStyle:nn,checked:(A==null?void 0:A.rows.hasIndex(D))===!0,markerKind:Vt==="clickable-number"?"number":Vt,row:Ir+de,drawHandle:vr!==void 0,cursor:Vt==="clickable-number"?"pointer":void 0}}else if(N){let de=g===B?(Me==null?void 0:Me.hint)??"":"",ie=Ra.current[g];if(((W=ie==null?void 0:ie.trailingRowOptions)==null?void 0:W.disabled)===!0)return ko;{let xe=((Y=ie==null?void 0:ie.trailingRowOptions)==null?void 0:Y.hint)??de,ze=(($=ie==null?void 0:ie.trailingRowOptions)==null?void 0:$.addIcon)??(Me==null?void 0:Me.addIcon);return{kind:Xr.NewRow,hint:xe,allowOverlay:!1,icon:ze}}}else{let de=g-B;if(H||(Ct==null?void 0:Ct.strict)===!0){let xe=Ut.current,ze=xe.x>de||de>xe.x+xe.width||xe.y>D||D>xe.y+xe.height||D>=Oi.current,Je=de===((U=(K=xe.extras)==null?void 0:K.selected)==null?void 0:U[0])&&D===((Q=xe.extras)==null?void 0:Q.selected[1]),Ie=!1;if(((fe=xe.extras)==null?void 0:fe.freezeRegions)!==void 0){for(let Ce of xe.extras.freezeRegions)if(qr(Ce,de,D)){Ie=!0;break}}if(ze&&!Je&&!Ie)return ko}let ie=S([de,D]);return B!==0&&ie.span!==void 0&&(ie={...ie,span:[ie.span[0]+B,ie.span[1]+B]}),ie}},[bt,Wt,er,eo,nn,A==null?void 0:A.rows,Vt,Ir,vr,B,Me==null?void 0:Me.hint,Me==null?void 0:Me.addIcon,Ct==null?void 0:Ct.strict,S]),Pi=d.useCallback(g=>{let D=(et==null?void 0:et(g))??{name:g};return se!==void 0&&g!==""&&(D={icon:D.icon,name:D.name,overrideTheme:D.overrideTheme,actions:[...D.actions??[],{title:"Rename",icon:"renameIcon",onClick:H=>Hi({group:D.name,bounds:H.bounds})}]}),D},[et,se]),_o=d.useCallback(g=>{var K;let[D,H]=g.cell,N=ot[D],W=(N==null?void 0:N.group)===void 0||(K=Pi(N.group))==null?void 0:K.overrideTheme,Y=N==null?void 0:N.themeOverride,$=ar==null?void 0:ar(H);i({...g,theme:Or(st,W,Y,$,g.content.themeOverride)})},[ar,ot,Pi,st]),Tn=d.useCallback((g,D,H)=>{var $;if(A.current===void 0)return;let[N,W]=A.current.cell,Y=qt([N,W]);if(Y.kind!==pe.Boolean&&Y.allowOverlay){let K=Y;if(H!==void 0)switch(K.kind){case pe.Number:{let U=G0(()=>H==="-"?-0:Number.parseFloat(H),0);K={...K,data:Number.isNaN(U)?0:U};break}case pe.Text:case pe.Markdown:case pe.Uri:K={...K,data:H};break}_o({target:g,content:K,initialValue:H,cell:[N,W],highlight:H===void 0,forceEditMode:H!==void 0})}else Y.kind===pe.Boolean&&D&&Y.readonly!==!0&&(tr([{location:A.current.cell,value:{...Y,data:ia(Y.data)}}]),($=Lt.current)==null||$.damage([{cell:A.current.cell}]))},[qt,A,tr,_o]),Ea=d.useCallback((g,D)=>{var W;let H=(W=Lt.current)==null?void 0:W.getBounds(g,D);if(H===void 0||gt.current===null)return;let N=qt([g,D]);N.allowOverlay&&_o({target:H,content:N,initialValue:void 0,highlight:!0,cell:[g,D],forceEditMode:!0})},[qt,gt,_o]),It=d.useCallback((g,D,H="both",N=0,W=0,Y=void 0)=>{if(gt.current!==null){let $=Lt.current,K=l.current,U=typeof g=="number"?g:g.unit==="cell"?g.amount:void 0,Q=typeof D=="number"?D:D.unit==="cell"?D.amount:void 0,fe=typeof g!="number"&&g.unit==="px"?g.amount:void 0,de=typeof D!="number"&&D.unit==="px"?D.amount:void 0;if($!==null&&K!==null){let ie={x:0,y:0,width:0,height:0},xe=0,ze=0;if((U!==void 0||Q!==void 0)&&(ie=$.getBounds((U??0)+B,Q??0)??ie,ie.width===0||ie.height===0))return;let Je=K.getBoundingClientRect(),Ie=Je.width/K.offsetWidth;if(fe!==void 0&&(ie={...ie,x:fe-Je.left-gt.current.scrollLeft,width:1}),de!==void 0&&(ie={...ie,y:de+Je.top-gt.current.scrollTop,height:1}),ie!==void 0){let Ce={x:ie.x-N,y:ie.y-W,width:ie.width+2*N,height:ie.height+2*W},Qe=0;for(let Ni=0;Ni<ye;Ni++)Qe+=zt[Ni].width;let Yt=0,Ft=yt+(sn?1:0);Ft>0&&(Yt=Ur(Wt,Ft,wr));let hr=Qe*Ie+Je.left+B*sr*Ie,xr=Je.right,nr=Je.top+oo*Ie,zn=Je.bottom-Yt*Ie,Vo=ie.width+N*2;switch(Y==null?void 0:Y.hAlign){case"start":xr=hr+Vo;break;case"end":hr=xr-Vo;break;case"center":hr=Math.floor((hr+xr)/2)-Vo/2,xr=hr+Vo;break}let Yo=ie.height+W*2;switch(Y==null?void 0:Y.vAlign){case"start":zn=nr+Yo;break;case"end":nr=zn-Yo;break;case"center":nr=Math.floor((nr+zn)/2)-Yo/2,zn=nr+Yo;break}hr>Ce.x?xe=Ce.x-hr:xr<Ce.x+Ce.width&&(xe=Ce.x+Ce.width-xr),nr>Ce.y?ze=Ce.y-nr:zn<Ce.y+Ce.height&&(ze=Ce.y+Ce.height-zn),H==="vertical"||typeof g=="number"&&g<ye?xe=0:(H==="horizontal"||typeof D=="number"&&D>=Wt-Ft)&&(ze=0),(xe!==0||ze!==0)&&(Ie!==1&&(xe/=Ie,ze/=Ie),gt.current.scrollTo({left:xe+gt.current.scrollLeft,top:ze+gt.current.scrollTop,behavior:(Y==null?void 0:Y.behavior)??"auto"}))}}}},[B,yt,sr,gt,oo,ye,zt,Wt,sn,wr]),Ia=d.useRef(Ea),Ta=d.useRef(S),Oi=d.useRef(Ee);Ia.current=Ea,Ta.current=S,Oi.current=Ee;let Pn=d.useCallback(async(g,D=!0,H)=>{var U,Q;if(((Q=(U=ot[g])==null?void 0:U.trailingRowOptions)==null?void 0:Q.disabled)===!0)return;let N=Se==null?void 0:Se(),W,Y=!0;N!==void 0&&(W=await N,W==="top"&&(Y=!1),typeof W=="number"&&(Y=!1));let $=0,K=()=>{if(Oi.current<=Ee){$<500&&window.setTimeout(K,$),$=50+$*2;return}let fe=typeof W=="number"?W:Y?Ee:0;Ko.current(g-B,fe,"both",0,0,H?{behavior:H}:void 0),mt({cell:[g,fe],range:{x:g,y:fe,width:1,height:1}},!1,!1,"edit");let de=Ta.current([g-B,fe]);de.allowOverlay&&po(de)&&de.readonly!==!0&&D&&window.setTimeout(()=>{Ia.current(g,fe)},0)};K()},[ot,Se,B,Ee,mt]),No=d.useCallback(g=>{var H,N;let D=((N=(H=zt[g])==null?void 0:H.trailingRowOptions)==null?void 0:N.targetColumn)??(Me==null?void 0:Me.targetColumn);if(typeof D=="number")return D+(er?1:0);if(typeof D=="object"){let W=M.indexOf(D);if(W>=0)return W+(er?1:0)}},[zt,M,er,Me==null?void 0:Me.targetColumn]),Wr=d.useRef(),On=d.useRef(),io=d.useCallback((g,D)=>{var W;let[H,N]=D;return Or(st,(W=ot[H])==null?void 0:W.themeOverride,ar==null?void 0:ar(N),g.themeOverride)},[ar,ot,st]),{mapper:hn}=Yd(He,y),ur=He==null?void 0:He.navigationBehavior,lo=d.useCallback(g=>{var fe,de,ie;let D=Co.value?g.metaKey:g.ctrlKey,H=D&&le==="multi",N=D&&Ze==="multi",[W,Y]=g.location,$=A.columns,K=A.rows,[U,Q]=((fe=A.current)==null?void 0:fe.cell)??[];if(g.kind==="cell"){if(On.current=void 0,fn.current=[W,Y],W===0&&er){if(bt===!0&&Y===Ee||Vt==="number"||le==="none")return;let xe=qt(g.location);if(xe.kind!==Xr.Marker)return;if(vr!==void 0){let Ie=Ht(xe);Jt((Ie==null?void 0:Ie.kind)===Xr.Marker);let Ce=(de=Ie==null?void 0:Ie.onClick)==null?void 0:de.call(Ie,{...g,cell:xe,posX:g.localEventX,posY:g.localEventY,bounds:g.bounds,theme:io(xe,g.location),preventDefault:()=>{}});if(Ce===void 0||Ce.checked===xe.checked)return}i(void 0),Xt();let ze=K.hasIndex(Y),Je=Wr.current;if(le==="multi"&&(g.shiftKey||g.isLongTouch===!0)&&Je!==void 0&&K.hasIndex(Je)){let Ie=[Math.min(Je,Y),Math.max(Je,Y)+1];H||qe==="multi"?vt(void 0,Ie,!0):vt(nt.fromSingleSelection(Ie),void 0,H)}else le==="multi"&&(H||g.isTouch||qe==="multi")?ze?vt(K.remove(Y),void 0,!0):(vt(void 0,Y,!0),Wr.current=Y):ze&&K.length===1?vt(nt.empty(),void 0,D):(vt(nt.fromSingleSelection(Y),void 0,D),Wr.current=Y)}else if(W>=B&&bt&&Y===Ee)Pn(No(W)??W);else if(U!==W||Q!==Y){let xe=qt(g.location),ze=Ht(xe);if((ze==null?void 0:ze.onSelect)!==void 0){let Ce=!1;if(ze.onSelect({...g,cell:xe,posX:g.localEventX,posY:g.localEventY,bounds:g.bounds,preventDefault:()=>Ce=!0,theme:io(xe,g.location)}),Ce)return}if(ur==="block"&&hn(Y).isGroupHeader)return;let Je=sn&&Y===Ee,Ie=sn&&A!==void 0&&((ie=A.current)==null?void 0:ie.cell[1])===Ee;if((g.shiftKey||g.isLongTouch===!0)&&U!==void 0&&Q!==void 0&&A.current!==void 0&&!Ie){if(Je)return;let Ce=Math.min(W,U),Qe=Math.max(W,U),Yt=Math.min(Y,Q),Ft=Math.max(Y,Q);mt({...A.current,range:{x:Ce,y:Yt,width:Qe-Ce+1,height:Ft-Yt+1}},!0,D,"click"),Wr.current=void 0,Xt()}else mt({cell:[W,Y],range:{x:W,y:Y,width:1,height:1}},!0,D,"click"),Wr.current=void 0,i(void 0),Xt()}}else if(g.kind==="header")if(fn.current=[W,Y],i(void 0),er&&W===0)Wr.current=void 0,On.current=void 0,!rn&&le==="multi"&&(K.length===Ee?vt(nt.empty(),void 0,D):vt(nt.fromSingleSelection([0,Ee]),void 0,D),Xt());else{let xe=On.current;if(Ze==="multi"&&(g.shiftKey||g.isLongTouch===!0)&&xe!==void 0&&$.hasIndex(xe)){let ze=[Math.min(xe,W),Math.max(xe,W)+1];N?Oe(void 0,ze,D):Oe(nt.fromSingleSelection(ze),void 0,D)}else N?($.hasIndex(W)?Oe($.remove(W),void 0,D):Oe(void 0,W,D),On.current=W):Ze!=="none"&&($.hasIndex(W)?Oe($.remove(W),void 0,D):Oe(nt.fromSingleSelection(W),void 0,D),On.current=W);Wr.current=void 0,Xt()}else g.kind==="group-header"?fn.current=[W,Y]:g.kind==="out-of-bounds"&&!g.isMaybeScrollbar&&(he(Mo,!1),i(void 0),Xt(),kt==null||kt(),Wr.current=void 0,On.current=void 0)},[le,Ze,A,er,B,bt,Ee,Vt,qt,vr,Xt,qe,Ht,io,vt,No,Pn,ur,hn,sn,mt,Oe,he,kt]),ao=d.useRef(!1),fn=d.useRef(),Pa=d.useRef(un),rr=d.useRef(),Uh=d.useCallback(g=>{if(Dn.current=!1,Pa.current=Ut.current,g.button!==0&&g.button!==1){rr.current=void 0;return}let D=performance.now();rr.current={button:g.button,time:D,location:g.location},(g==null?void 0:g.kind)==="header"&&(ao.current=!0);let H=g.kind==="cell"&&g.isFillHandle;!H&&g.kind!=="cell"&&g.isEdge||(c({previousSelection:A,fillHandle:H}),fn.current=void 0,!g.isTouch&&g.button===0&&!H?lo(g):!g.isTouch&&g.button===1&&(fn.current=g.location))},[A,lo]),[Di,Hi]=d.useState(),Oa=d.useCallback(g=>{if(g.kind!=="group-header"||Ze!=="multi")return;let D=Co.value?g.metaKey:g.ctrlKey,[H]=g.location,N=A.columns;if(H<B)return;let W=ot[H],Y=H,$=H;for(let K=H-1;K>=B&&_n(W.group,ot[K].group);K--)Y--;for(let K=H+1;K<ot.length&&_n(W.group,ot[K].group);K++)$++;if(Xt(),D)if(N.hasAll([Y,$+1])){let K=N;for(let U=Y;U<=$;U++)K=K.remove(U);Oe(K,void 0,D)}else Oe(void 0,[Y,$+1],D);else Oe(nt.fromSingleSelection([Y,$+1]),void 0,D)},[Ze,Xt,A.columns,ot,B,Oe]),Dn=d.useRef(!1),Bo=d.useCallback(async g=>{if(we!==void 0&&Fe!==void 0){let D=Ut.current.y,H=Ut.current.height,N=we({x:g,y:D,width:1,height:Math.min(H,Ee-D)},ce.current.signal);typeof N!="object"&&(N=await N());let W=zt[g-B],Y=document.createElement("canvas").getContext("2d",{alpha:!1});if(Y!==null){Y.font=st.baseFontFull;let $=wl(Y,st,W,0,N,Pr,on,!1,Ht);Fe==null||Fe(W,$.width,g,$.width)}}},[zt,we,on,st,Pr,Fe,B,Ee,Ht]),[qh,zi]=d.useState(),Hn=d.useCallback(async(g,D)=>{var K,U;let H=(K=g.current)==null?void 0:K.range;if(H===void 0||we===void 0||D.current===void 0)return;let N=D.current.range;if(E!==void 0){let Q=!1;if(E({fillDestination:{...N,x:N.x-B},patternSource:{...H,x:H.x-B},preventDefault:()=>Q=!0}),Q)return}let W=we(H,ce.current.signal);typeof W!="object"&&(W=await W());let Y=W,$=[];for(let Q=0;Q<N.width;Q++)for(let fe=0;fe<N.height;fe++){let de=[N.x+Q,N.y+fe];if(ll(de,H))continue;let ie=Y[fe%H.height][Q%H.width];Fn(ie)||!po(ie)||$.push({location:de,value:{...ie}})}tr($),(U=Lt.current)==null||U.damage($.map(Q=>({cell:Q.location})))},[we,tr,E,B]),Da=d.useCallback(()=>{A.current===void 0||A.current.range.width<=1||Hn({...A,current:{...A.current,range:{...A.current.range,width:1}}},A)},[Hn,A]),Ha=d.useCallback(()=>{A.current===void 0||A.current.range.height<=1||Hn({...A,current:{...A.current,range:{...A.current.range,height:1}}},A)},[Hn,A]),Jh=d.useCallback((g,D)=>{var fe,de;let H=s;if(c(void 0),Ti(void 0),zi(void 0),ao.current=!1,D)return;if((H==null?void 0:H.fillHandle)===!0&&A.current!==void 0&&((fe=H.previousSelection)==null?void 0:fe.current)!==void 0){if(dn===void 0)return;let ie={...A,current:{...A.current,range:Il(H.previousSelection.current.range,dn)}};Hn(H.previousSelection,ie),he(ie,!0);return}let[N,W]=g.location,[Y,$]=fn.current??[],K=()=>{Dn.current=!0},U=ie=>{var ze,Je,Ie;let xe=ie.isTouch||Y===N&&$===W;if(xe&&(T==null||T([N-B,W],{...ie,preventDefault:K})),ie.button===1)return!Dn.current;if(!Dn.current){let Ce=qt(g.location),Qe=Ht(Ce);if(Qe!==void 0&&Qe.onClick!==void 0&&xe){let Ft=Qe.onClick({...ie,cell:Ce,posX:ie.localEventX,posY:ie.localEventY,bounds:ie.bounds,theme:io(Ce,g.location),preventDefault:K});Ft!==void 0&&!Fn(Ft)&&go(Ft)&&(tr([{location:ie.location,value:Ft}]),(ze=Lt.current)==null||ze.damage([{cell:ie.location}]))}if(Dn.current||A.current===void 0)return!1;let Yt=!1;switch(Ce.activationBehaviorOverride??rt){case"double-click":case"second-click":{if(((Ie=(Je=H==null?void 0:H.previousSelection)==null?void 0:Je.current)==null?void 0:Ie.cell)===void 0)break;let[Ft,hr]=A.current.cell,[xr,nr]=H.previousSelection.current.cell;Yt=N===Ft&&N===xr&&W===hr&&W===nr&&(ie.isDoubleClick===!0||rt==="second-click");break}case"single-click":Yt=!0;break}if(Yt)return P==null||P([N-B,W]),Tn(ie.bounds,!1),!0}return!1},Q=g.location[0]-B;if(g.isTouch){let ie=Ut.current,xe=Pa.current;if(ie.x!==xe.x||ie.y!==xe.y)return;if(g.isLongTouch===!0){if(g.kind==="cell"&&Nn((de=A.current)==null?void 0:de.cell,g.location)){G==null||G([Q,g.location[1]],{...g,preventDefault:K});return}else if(g.kind==="header"&&A.columns.hasIndex(N)){Z==null||Z(Q,{...g,preventDefault:K});return}else if(g.kind==="group-header"){if(Q<0)return;V==null||V(Q,{...g,preventDefault:K});return}}g.kind==="cell"?U(g)||lo(g):g.kind==="group-header"?b==null||b(Q,{...g,preventDefault:K}):(g.kind==="header"&&(x==null||x(Q,{...g,preventDefault:K})),lo(g));return}if(g.kind==="header"){if(Q<0)return;g.isEdge?g.isDoubleClick===!0&&Bo(N):g.button===0&&N===Y&&W===$&&(x==null||x(Q,{...g,preventDefault:K}))}if(g.kind==="group-header"){if(Q<0)return;g.button===0&&N===Y&&W===$&&(b==null||b(Q,{...g,preventDefault:K}),Dn.current||Oa(g))}g.kind==="cell"&&(g.button===0||g.button===1)&&U(g),fn.current=void 0},[s,A,B,dn,Hn,he,T,qt,Ht,rt,io,tr,P,Tn,G,Z,V,lo,b,x,Bo,Oa]),Qh=d.useCallback(g=>{let D={...g,location:[g.location[0]-B,g.location[1]]};Ne==null||Ne(D),s!==void 0&&g.buttons===0&&(c(void 0),Ti(void 0),zi(void 0),ao.current=!1),zi(H=>{var N;return ao.current?[g.scrollEdge[0],0]:g.scrollEdge[0]===(H==null?void 0:H[0])&&g.scrollEdge[1]===H[1]?H:s===void 0||(((N=rr.current)==null?void 0:N.location[0])??0)<B?void 0:g.scrollEdge})},[s,Ne,B]),Zh=d.useCallback((g,D)=>{Ue==null||Ue(g-B,D)},[Ue,B]),e0=d.useCallback((g,D)=>{pt==null||pt(g-B,D)},[pt,B]),br=(Ba=A==null?void 0:A.current)==null?void 0:Ba.cell,t0=d.useCallback((g,D,H,N,W,Y)=>{zo.current=!1;let $=br;$!==void 0&&($=[$[0]-B,$[1]]);let K=ye===0?void 0:{x:0,y:g.y,width:ye,height:g.height},U=[];K!==void 0&&U.push(K),yt>0&&(U.push({x:g.x-B,y:Ee-yt,width:g.width,height:yt}),ye>0&&U.push({x:0,y:Ee-yt,width:ye,height:yt}));let Q={x:g.x-B,y:g.y,width:g.width,height:bt&&g.y+g.height>=Ee?g.height-1:g.height,tx:W,ty:Y,extras:{selected:$,freezeRegion:K,freezeRegions:U}};Ut.current=Q,Ma(Q),cn([D,H,N]),_t==null||_t(Q,Q.tx,Q.ty,Q.extras)},[br,B,bt,Ee,ye,yt,Ma,_t]),r0=Dr(w,d.useCallback((g,D)=>(w==null?void 0:w(g-B,D-B))!==!1,[w,B])),n0=Dr($e,d.useCallback((g,D)=>{$e==null||$e(g-B,D-B),Ze!=="none"&&Oe(nt.fromSingleSelection(D),void 0,!0)},[Ze,$e,B,Oe])),Ai=d.useRef(!1),o0=d.useCallback(g=>{if(g.location[0]===0&&B>0){g.preventDefault();return}Ve==null||Ve({...g,location:[g.location[0]-B,g.location[1]]}),g.defaultPrevented()||(Ai.current=!0),c(void 0)},[Ve,B]),i0=d.useCallback(()=>{Ai.current=!1},[]),za=He==null?void 0:He.selectionBehavior,Wo=d.useCallback(g=>{if(za!=="block-spanning")return;let{isGroupHeader:D,path:H,groupRows:N}=hn(g);if(D)return[g,g];let W=H[H.length-1];return[g-W,g+N-W-1]},[hn,za]),Li=d.useRef(),Fi=d.useCallback(g=>{var D,H,N;if(!Jl(g,Li.current)&&(Li.current=g,!(((D=rr==null?void 0:rr.current)==null?void 0:D.button)!==void 0&&rr.current.button>=1))){if(g.buttons!==0&&s!==void 0&&((H=rr.current)==null?void 0:H.location[0])===0&&g.location[0]===0&&B===1&&le==="multi"&&s.previousSelection&&!s.previousSelection.rows.hasIndex(rr.current.location[1])&&A.rows.hasIndex(rr.current.location[1])){let W=Math.min(rr.current.location[1],g.location[1]),Y=Math.max(rr.current.location[1],g.location[1])+1;vt(nt.fromSingleSelection([W,Y]),void 0,!1)}if(g.buttons!==0&&s!==void 0&&A.current!==void 0&&!Ai.current&&!ao.current&&(ut==="rect"||ut==="multi-rect")){let[W,Y]=A.current.cell,[$,K]=g.location;if(K<0&&(K=Ut.current.y),s.fillHandle===!0&&((N=s.previousSelection)==null?void 0:N.current)!==void 0){let U=s.previousSelection.current.range;K=Math.min(K,bt?Ee-1:Ee),Ti(Hc(U,$,K,mr))}else{if(bt&&Y===Ee)return;if(bt&&K===Ee)if(g.kind==="out-of-bounds")K--;else return;$=Math.max($,B);let U=Wo(Y);K=U===void 0?K:(0,Jr.default)(K,U[0],U[1]);let Q=$-W,fe=K-Y,de={x:Q>=0?W:$,y:fe>=0?Y:K,width:Math.abs(Q)+1,height:Math.abs(fe)+1};mt({...A.current,range:de},!0,!1,"drag")}}At==null||At({...g,location:[g.location[0]-B,g.location[1]]})}},[s,B,le,A,ut,At,vt,bt,Ee,mr,Wo,mt]);Wd(qh,gt,d.useCallback(()=>{var $,K;let g=Li.current;if(g===void 0)return;let[D,H]=g.scrollEdge,[N,W]=g.location,Y=Ut.current;D===-1?N=((K=($=Y.extras)==null?void 0:$.freezeRegion)==null?void 0:K.x)??Y.x:D===1&&(N=Y.x+Y.width),H===-1?W=Math.max(0,Y.y):H===1&&(W=Math.min(Ee-1,Y.y+Y.height)),N=(0,Jr.default)(N,0,ot.length-1),W=(0,Jr.default)(W,0,Ee-1),Fi({...g,location:[N,W]})},[ot.length,Fi,Ee]));let dr=d.useCallback(g=>{if(A.current===void 0)return;let[D,H]=g,[N,W]=A.current.cell,Y=A.current.range,$=Y.x,K=Y.x+Y.width,U=Y.y,Q=Y.y+Y.height,[fe,de]=Wo(W)??[0,Ee-1],ie=de+1;if(H!==0)switch(H){case 2:Q=ie,U=W,It(0,Q,"vertical");break;case-2:U=fe,Q=W+1,It(0,U,"vertical");break;case 1:U<W?(U++,It(0,U,"vertical")):(Q=Math.min(ie,Q+1),It(0,Q,"vertical"));break;case-1:Q>W+1?(Q--,It(0,Q,"vertical")):(U=Math.max(fe,U-1),It(0,U,"vertical"));break;default:qo(H)}if(D!==0)if(D===2)K=ot.length,$=N,It(K-1-B,0,"horizontal");else if(D===-2)$=B,K=N+1,It($-B,0,"horizontal");else{let xe=[];if(we!==void 0){let ze=we({x:$,y:U,width:K-$-B,height:Q-U},ce.current.signal);typeof ze=="object"&&(xe=eh(ze))}if(D===1){let ze=!1;if($<N){if(xe.length>0){let Je=(0,Cn.default)($+1,N+1).find(Ie=>!xe.includes(Ie-B));Je!==void 0&&($=Je,ze=!0)}else $++,ze=!0;ze&&It($,0,"horizontal")}ze||(K=Math.min(ot.length,K+1),It(K-1-B,0,"horizontal"))}else if(D===-1){let ze=!1;if(K>N+1){if(xe.length>0){let Je=(0,Cn.default)(K-1,N,-1).find(Ie=>!xe.includes(Ie-B));Je!==void 0&&(K=Je,ze=!0)}else K--,ze=!0;ze&&It(K-B,0,"horizontal")}ze||($=Math.max(B,$-1),It($-B,0,"horizontal"))}else qo(D)}mt({cell:A.current.cell,range:{x:$,y:U,width:K-$,height:Q-U}},!0,!1,"keyboard-select")},[we,Wo,A,ot.length,B,Ee,It,mt]),ji=d.useRef(Jn);ji.current=Jn;let $r=d.useCallback((g,D,H,N)=>{let W=Wt-(H?0:1);g=(0,Jr.default)(g,B,zt.length-1+B),D=(0,Jr.default)(D,0,W);let Y=br==null?void 0:br[0],$=br==null?void 0:br[1];if(g===Y&&D===$)return!1;if(N&&A.current!==void 0){let K=[...A.current.rangeStack];(A.current.range.width>1||A.current.range.height>1)&&K.push(A.current.range),he({...A,current:{cell:[g,D],range:{x:g,y:D,width:1,height:1},rangeStack:K}},!0)}else mt({cell:[g,D],range:{x:g,y:D,width:1,height:1}},!0,!1,"keyboard-nav");return u.current!==void 0&&u.current[0]===g&&u.current[1]===D&&(u.current=void 0),ji.current&&It(g-B,D),!0},[Wt,B,zt.length,br,A,It,he,mt]),l0=d.useCallback((g,D)=>{(o==null?void 0:o.cell)!==void 0&&g!==void 0&&go(g)&&(tr([{location:o.cell,value:g}]),window.requestAnimationFrame(()=>{var W;(W=Lt.current)==null||W.damage([{cell:o.cell}])})),Xt(!0),i(void 0);let[H,N]=D;if(A.current!==void 0&&(H!==0||N!==0)){let W=A.current.cell[1]===Wt-1&&g!==void 0;$r((0,Jr.default)(A.current.cell[0]+H,0,ot.length-1),(0,Jr.default)(A.current.cell[1]+N,0,Wt-1),W,!1)}z==null||z(g,D)},[o==null?void 0:o.cell,Xt,A,z,tr,Wt,$r,ot.length]),a0=d.useMemo(()=>`gdg-overlay-${Zd++}`,[]),gn=d.useCallback(g=>{var H,N,W,Y,$;Xt();let D=[];for(let K=g.x;K<g.x+g.width;K++)for(let U=g.y;U<g.y+g.height;U++){let Q=S([K-B,U]);if(!Q.allowOverlay&&Q.kind!==pe.Boolean)continue;let fe;if(Q.kind===pe.Custom){let de=Ht(Q),ie=(H=de==null?void 0:de.provideEditor)==null?void 0:H.call(de,{...Q,location:[K-B,U]});(de==null?void 0:de.onDelete)===void 0?rf(ie)&&(fe=(N=ie==null?void 0:ie.deletedValue)==null?void 0:N.call(ie,Q)):fe=de.onDelete(Q)}else(go(Q)&&Q.allowOverlay||Q.kind===pe.Boolean)&&(fe=(Y=(W=Ht(Q))==null?void 0:W.onDelete)==null?void 0:Y.call(W,Q));fe!==void 0&&!Fn(fe)&&go(fe)&&D.push({location:[K,U],value:fe})}tr(D),($=Lt.current)==null||$.damage(D.map(K=>({cell:K.location})))},[Xt,S,Ht,tr,B]),so=o!==void 0,Aa=d.useCallback(g=>{var ze,Je;let D=()=>{g.stopPropagation(),g.preventDefault()},H={didMatch:!1},{bounds:N}=g,W=A.columns,Y=A.rows,$=yr;if(!so&&Be($.clear,g,H))he(Mo,!1),kt==null||kt();else if(!so&&Be($.selectAll,g,H))he({columns:nt.empty(),rows:nt.empty(),current:{cell:((ze=A.current)==null?void 0:ze.cell)??[B,0],range:{x:B,y:0,width:M.length,height:Ee},rangeStack:[]}},!1);else if(Be($.search,g,H))(Je=a==null?void 0:a.current)==null||Je.focus({preventScroll:!0}),ne(!0);else if(Be($.delete,g,H)){let Ie=(at==null?void 0:at(A))??!0;if(Ie!==!1){let Ce=Ie===!0?A:Ie;if(Ce.current!==void 0){gn(Ce.current.range);for(let Qe of Ce.current.rangeStack)gn(Qe)}for(let Qe of Ce.rows)gn({x:B,y:Qe,width:M.length,height:1});for(let Qe of Ce.columns)gn({x:Qe,y:0,width:1,height:Ee})}}if(H.didMatch)return D(),!0;if(A.current===void 0)return!1;let[K,U]=A.current.cell,[,Q]=A.current.cell,fe=!1,de=!1;if(Be($.scrollToSelectedCell,g,H)?Ko.current(K-B,U):Ze!=="none"&&Be($.selectColumn,g,H)?W.hasIndex(K)?Oe(W.remove(K),void 0,!0):Ze==="single"?Oe(nt.fromSingleSelection(K),void 0,!0):Oe(void 0,K,!0):le!=="none"&&Be($.selectRow,g,H)?Y.hasIndex(U)?vt(Y.remove(U),void 0,!0):le==="single"?vt(nt.fromSingleSelection(U),void 0,!0):vt(void 0,U,!0):!so&&N!==void 0&&Be($.activateCell,g,H)?U===Ee&&bt?window.setTimeout(()=>{Pn(No(K)??K)},0):(P==null||P([K-B,U]),Tn(N,!0)):A.current.range.height>1&&Be($.downFill,g,H)?Ha():A.current.range.width>1&&Be($.rightFill,g,H)?Da():Be($.goToNextPage,g,H)?U+=Math.max(1,Ut.current.height-4):Be($.goToPreviousPage,g,H)?U-=Math.max(1,Ut.current.height-4):Be($.goToFirstCell,g,H)?(i(void 0),U=0,K=0):Be($.goToLastCell,g,H)?(i(void 0),U=2**53-1,K=2**53-1):Be($.selectToFirstCell,g,H)?(i(void 0),dr([-2,-2])):Be($.selectToLastCell,g,H)?(i(void 0),dr([2,2])):so?(Be($.closeOverlay,g,H)&&i(void 0),Be($.acceptOverlayDown,g,H)&&(i(void 0),U++),Be($.acceptOverlayUp,g,H)&&(i(void 0),U--),Be($.acceptOverlayLeft,g,H)&&(i(void 0),K--),Be($.acceptOverlayRight,g,H)&&(i(void 0),K++)):(Be($.goDownCell,g,H)?U+=1:Be($.goUpCell,g,H)?--U:Be($.goRightCell,g,H)?K+=1:Be($.goLeftCell,g,H)?--K:Be($.goDownCellRetainSelection,g,H)?(U+=1,fe=!0):Be($.goUpCellRetainSelection,g,H)?(--U,fe=!0):Be($.goRightCellRetainSelection,g,H)?(K+=1,fe=!0):Be($.goLeftCellRetainSelection,g,H)?(--K,fe=!0):Be($.goToLastRow,g,H)?U=Ee-1:Be($.goToFirstRow,g,H)?U=-(2**53-1):Be($.goToLastColumn,g,H)?K=2**53-1:Be($.goToFirstColumn,g,H)?K=-(2**53-1):(ut==="rect"||ut==="multi-rect")&&(Be($.selectGrowDown,g,H)?dr([0,1]):Be($.selectGrowUp,g,H)?dr([0,-1]):Be($.selectGrowRight,g,H)?dr([1,0]):Be($.selectGrowLeft,g,H)?dr([-1,0]):Be($.selectToLastRow,g,H)?dr([0,2]):Be($.selectToFirstRow,g,H)?dr([0,-2]):Be($.selectToLastColumn,g,H)?dr([2,0]):Be($.selectToFirstColumn,g,H)&&dr([-2,0])),de=H.didMatch),ur!==void 0&&ur!=="normal"&&U!==Q){let Ie=ur==="skip-up"||ur==="skip"||ur==="block",Ce=ur==="skip-down"||ur==="skip"||ur==="block",Qe=U<Q;if(Qe&&Ie){for(;U>=0&&hn(U).isGroupHeader;)U--;U<0&&(U=Q)}else if(!Qe&&Ce){for(;U<Ee&&hn(U).isGroupHeader;)U++;U>=Ee&&(U=Q)}}let ie=$r(K,U,!1,fe),xe=H.didMatch;return xe&&(ie||!de||Qr)&&D(),xe},[ur,so,A,yr,Ze,le,ut,B,hn,Ee,$r,he,kt,M.length,at,Qr,gn,Oe,vt,bt,No,Pn,P,Tn,Ha,Da,dr]),co=d.useCallback(g=>{let D=!1;if(re!==void 0&&re({...g,...g.location&&{location:[g.location[0]-B,g.location[1]]},cancel:()=>{D=!0}}),D||Aa(g)||A.current===void 0)return;let[H,N]=A.current.cell,W=Ut.current;if(Le&&!g.metaKey&&!g.ctrlKey&&A.current!==void 0&&g.key.length===1&&/[\p{L}\p{M}\p{N}\p{S}\p{P}]/u.test(g.key)&&g.bounds!==void 0&&po(S([H-B,Math.max(0,Math.min(N,Ee-1))]))){if((!bt||N!==Ee)&&(W.y>N||N>W.y+W.height||W.x>H||H>W.x+W.width))return;P==null||P([H-B,N]),Tn(g.bounds,!0,g.key),g.stopPropagation(),g.preventDefault()}},[Le,re,Aa,A,S,B,Ee,bt,P,Tn]),s0=d.useCallback((g,D)=>{let H=g.location[0]-B;if(g.kind==="header"&&(Z==null||Z(H,{...g,preventDefault:D})),g.kind==="group-header"){if(H<0)return;V==null||V(H,{...g,preventDefault:D})}if(g.kind==="cell"){let[N,W]=g.location;G==null||G([H,W],{...g,preventDefault:D}),$s(A,g.location)||$r(N,W,!1,!1)}},[A,G,V,Z,B,$r]),_i=d.useCallback(async g=>{var $,K,U;if(!yr.paste)return;function D(Q,fe,de,ie){var ze,Je;let xe=typeof de=="object"?(de==null?void 0:de.join(`
`))??"":(de==null?void 0:de.toString())??"";if(!Fn(Q)&&po(Q)&&Q.readonly!==!0){let Ie=F==null?void 0:F(xe,Q);if(Ie!==void 0&&go(Ie))return{location:fe,value:Ie};let Ce=Ht(Q);if(Ce===void 0)return;if(Ce.kind===pe.Custom){Jt(Q.kind===pe.Custom);let Qe=(ze=Ce.onPaste)==null?void 0:ze.call(Ce,xe,Q.data);return Qe===void 0?void 0:{location:fe,value:{...Q,data:Qe}}}else{let Qe=(Je=Ce.onPaste)==null?void 0:Je.call(Ce,xe,Q,{formatted:ie,formattedString:typeof ie=="string"?ie:ie==null?void 0:ie.join(`
`),rawValue:de});return Qe===void 0?void 0:(Jt(Qe.kind===Q.kind),{location:fe,value:Qe})}}}let H=A.columns,N=A.rows,W=(($=gt.current)==null?void 0:$.contains(document.activeElement))===!0||((K=l.current)==null?void 0:K.contains(document.activeElement))===!0,Y;if(A.current===void 0?H.length===1?Y=[H.first()??0,0]:N.length===1&&(Y=[B,N.first()??0]):Y=[A.current.range.x,A.current.range.y],W&&Y!==void 0){let Q,fe,de="text/plain",ie="text/html";if(navigator.clipboard.read!==void 0){let Ie=await navigator.clipboard.read();for(let Ce of Ie){if(Ce.types.includes(ie)){let Qe=na(await(await Ce.getType(ie)).text());if(Qe!==void 0){Q=Qe;break}}Ce.types.includes(de)&&(fe=await(await Ce.getType(de)).text())}}else if(navigator.clipboard.readText!==void 0)fe=await navigator.clipboard.readText();else if(g!==void 0&&(g==null?void 0:g.clipboardData)!==null)g.clipboardData.types.includes(ie)&&(Q=na(g.clipboardData.getData(ie))),Q===void 0&&g.clipboardData.types.includes(de)&&(fe=g.clipboardData.getData(de));else return;let[xe,ze]=Y,Je=[];do{if(Ge===void 0){let Ie=qt(Y),Ce=fe??(Q==null?void 0:Q.map(Yt=>Yt.map(Ft=>Ft.rawValue).join("	")).join("	"))??"",Qe=D(Ie,Y,Ce,void 0);Qe!==void 0&&Je.push(Qe);break}if(Q===void 0){if(fe===void 0)return;Q=zd(fe)}if(Ge===!1||typeof Ge=="function"&&(Ge==null?void 0:Ge([Y[0]-B,Y[1]],Q.map(Ie=>Ie.map(Ce=>{var Qe;return((Qe=Ce.rawValue)==null?void 0:Qe.toString())??""}))))!==!0)return;for(let[Ie,Ce]of Q.entries()){if(Ie+ze>=Ee)break;for(let[Qe,Yt]of Ce.entries()){let Ft=[Qe+xe,Ie+ze],[hr,xr]=Ft;if(hr>=ot.length||xr>=Wt)continue;let nr=D(qt(Ft),Ft,Yt.rawValue,Yt.formatted);nr!==void 0&&Je.push(nr)}}}while(!1);tr(Je),(U=Lt.current)==null||U.damage(Je.map(Ie=>({cell:Ie.location})))}},[F,Ht,qt,A,yr.paste,gt,ot.length,tr,Wt,Ge,B,Ee]);jt("paste",_i,h,!1,!0);let uo=d.useCallback(async(g,D)=>{var $,K;if(!yr.copy)return;let H=D===!0||(($=gt.current)==null?void 0:$.contains(document.activeElement))===!0||((K=l.current)==null?void 0:K.contains(document.activeElement))===!0,N=A.columns,W=A.rows,Y=(U,Q)=>{Ad(me?[Q.map(fe=>({kind:pe.Text,data:M[fe].title,displayData:M[fe].title,allowOverlay:!1})),...U]:U,Q,g)};if(H&&we!==void 0){if(A.current!==void 0){let U=we(A.current.range,ce.current.signal);typeof U!="object"&&(U=await U()),Y(U,(0,Cn.default)(A.current.range.x-B,A.current.range.x+A.current.range.width-B))}else if(W!==void 0&&W.length>0){let U=[...W].map(Q=>{let fe=we({x:B,y:Q,width:M.length,height:1},ce.current.signal);return typeof fe=="object"?fe[0]:fe().then(de=>de[0])});U.some(Q=>Q instanceof Promise)?Y(await Promise.all(U),(0,Cn.default)(M.length)):Y(U,(0,Cn.default)(M.length))}else if(N.length>0){let U=[],Q=[];for(let fe of N){let de=we({x:fe,y:0,width:1,height:Ee},ce.current.signal);typeof de!="object"&&(de=await de()),U.push(de),Q.push(fe-B)}U.length===1?Y(U[0],Q):Y(U.reduce((fe,de)=>fe.map((ie,xe)=>[...ie,...de[xe]])),Q)}}},[M,we,A,yr.copy,B,gt,Ee,me]);jt("copy",uo,h,!1,!1),jt("cut",d.useCallback(async g=>{var D,H;if(yr.cut&&(((D=gt.current)==null?void 0:D.contains(document.activeElement))===!0||((H=l.current)==null?void 0:H.contains(document.activeElement))===!0)&&(await uo(g),A.current!==void 0)){let N={current:{cell:A.current.cell,range:A.current.range,rangeStack:[]},rows:nt.empty(),columns:nt.empty()},W=at==null?void 0:at(N);if(W===!1||(N=W===!0?N:W,N.current===void 0))return;gn(N.current.range)}},[gn,A,yr.cut,uo,gt,at]),h,!1,!1);let c0=d.useCallback((g,D)=>{if(Te!==void 0){B!==0&&(g=g.map(W=>[W[0]-B,W[1]])),Te(g,D);return}if(g.length===0||D===-1)return;let[H,N]=g[D];u.current!==void 0&&u.current[0]===H&&u.current[1]===N||(u.current=[H,N],$r(H,N,!1,!1))},[Te,B,$r]),[$o,Xo]=((Wa=wt==null?void 0:wt.current)==null?void 0:Wa.cell)??[],Ko=d.useRef(It);Ko.current=It,d.useLayoutEffect(()=>{var g,D,H,N;ji.current&&!zo.current&&$o!==void 0&&Xo!==void 0&&($o!==((D=(g=dt.current)==null?void 0:g.current)==null?void 0:D.cell[0])||Xo!==((N=(H=dt.current)==null?void 0:H.current)==null?void 0:N.cell[1]))&&Ko.current($o,Xo),zo.current=!1},[$o,Xo]);let La=A.current!==void 0&&(A.current.cell[0]>=ot.length||A.current.cell[1]>=Wt);d.useLayoutEffect(()=>{La&&he(Mo,!1)},[La,he]);let u0=d.useMemo(()=>bt===!0&&(Me==null?void 0:Me.tint)===!0?nt.fromSingleSelection(Wt-1):nt.empty(),[Wt,bt,Me==null?void 0:Me.tint]),d0=d.useCallback(g=>typeof Xe=="boolean"?Xe:(Xe==null?void 0:Xe(g-B))??!0,[B,Xe]),h0=d.useMemo(()=>{if(Di===void 0||l.current===null)return null;let{bounds:g,group:D}=Di,H=l.current.getBoundingClientRect();return d.createElement(Sd,{bounds:g,group:D,canvasBounds:H,onClose:()=>Hi(void 0),onFinish:N=>{Hi(void 0),se==null||se(D,N)}})},[se,Di]),f0=Math.min(ot.length,ye+(er?1:0));d.useImperativeHandle(t,()=>({appendRow:(g,D)=>Pn(g+B,D),updateCells:g=>{var D;return B!==0&&(g=g.map(H=>({cell:[H.cell[0]+B,H.cell[1]]}))),(D=Lt.current)==null?void 0:D.damage(g)},getBounds:(g,D)=>{var H;if(!((l==null?void 0:l.current)===null||(gt==null?void 0:gt.current)===null)){if(g===void 0&&D===void 0){let N=l.current.getBoundingClientRect(),W=N.width/gt.current.clientWidth;return{x:N.x-gt.current.scrollLeft*W,y:N.y-gt.current.scrollTop*W,width:gt.current.scrollWidth*W,height:gt.current.scrollHeight*W}}return(H=Lt.current)==null?void 0:H.getBounds((g??0)+B,D)}},focus:()=>{var g;return(g=Lt.current)==null?void 0:g.focus()},emit:async g=>{switch(g){case"delete":co({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!1,key:"Delete",keyCode:46,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"fill-right":co({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!0,key:"r",keyCode:82,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"fill-down":co({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!0,key:"d",keyCode:68,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"copy":await uo(void 0,!0);break;case"paste":await _i();break}},scrollTo:It,remeasureColumns:g=>{for(let D of g)Bo(D+B)},getMouseArgsForPosition:(g,D,H)=>{if((Lt==null?void 0:Lt.current)===null)return;let N=Lt.current.getMouseArgsForPosition(g,D,H);if(N!==void 0)return{...N,location:[N.location[0]-B,N.location[1]]}}}),[Pn,Bo,gt,uo,co,_i,B,It]);let[Fa,ja]=br??[],g0=d.useCallback(g=>{let[D,H]=g;if(H===-1){Ze!=="none"&&(Oe(nt.fromSingleSelection(D),void 0,!1),Xt());return}Fa===D&&ja===H||(mt({cell:g,range:{x:D,y:H,width:1,height:1}},!0,!1,"keyboard-nav"),It(D,H))},[Ze,Xt,It,Fa,ja,mt,Oe]),[p0,m0]=d.useState(!1),_a=d.useRef((0,Jd.default)(g=>{m0(g)},5)),v0=d.useCallback(()=>{_a.current(!0),A.current===void 0&&A.columns.length===0&&A.rows.length===0&&s===void 0&&mt({cell:[B,Ao],range:{x:B,y:Ao,width:1,height:1}},!0,!1,"keyboard-select")},[Ao,A,s,B,mt]),w0=d.useCallback(()=>{_a.current(!1)},[]),[y0,b0]=d.useMemo(()=>{let g,D=(Ct==null?void 0:Ct.scrollbarWidthOverride)??ni(),H=Ee+(bt?1:0);if(typeof wr=="number")g=oo+H*wr;else{let W=0,Y=Math.min(H,10);for(let $=0;$<Y;$++)W+=wr($);W=Math.floor(W/Y),g=oo+H*W}g+=D;let N=ot.reduce((W,Y)=>Y.width+W,0)+D;return[`${Math.min(1e5,N)}px`,`${Math.min(1e5,g)}px`]},[ot,Ct==null?void 0:Ct.scrollbarWidthOverride,wr,Ee,bt,oo]),x0=d.useMemo(()=>Q0(st),[st]);return d.createElement(Z0.Provider,{value:st},d.createElement(_d,{style:x0,className:_,inWidth:v??y0,inHeight:k??b0},d.createElement(bd,{fillHandle:Rt,drawFocusRing:Qn,experimental:Ct,fixedShadowX:Tt,fixedShadowY:Dt,getRowThemeOverride:ar,headerIcons:Mr,imageWindowLoader:Ro,initialSize:jr,isDraggable:Rr,onDragLeave:Er,onRowMoved:vr,overscrollX:ro,overscrollY:no,preventDiagonalScrolling:kn,rightElement:Mn,rightElementProps:Rn,smoothScrollX:Zr,smoothScrollY:_r,className:_,enableGroups:Ii,onCanvasFocused:v0,onCanvasBlur:w0,canvasRef:l,onContextMenu:s0,theme:st,cellXOffset:Yh,cellYOffset:Ao,accessibilityHeight:un.height,onDragEnd:i0,columns:ot,nonGrowWidth:Ca,drawHeader:Pt,onColumnProposeMove:r0,drawCell:Gt,disabledRows:u0,freezeColumns:f0,lockColumns:B,firstColAccessible:B===0,getCellContent:qt,minColumnWidth:Pr,maxColumnWidth:on,searchInputRef:a,showSearch:ve,onSearchClose:ge,highlightRegions:Gh,getCellsForSelection:we,getGroupDetails:Pi,headerHeight:ln,isFocused:p0,groupHeaderHeight:Ii?to:0,freezeTrailingRows:yt+(bt&&(Me==null?void 0:Me.sticky)===!0?1:0),hasAppendRow:bt,onColumnResize:Fe,onColumnResizeEnd:Ye,onColumnResizeStart:lt,onCellFocused:g0,onColumnMoved:n0,onDragStart:o0,onHeaderMenuClick:Zh,onHeaderIndicatorClick:e0,onItemHovered:Fi,isFilling:(s==null?void 0:s.fillHandle)===!0,onMouseMove:Qh,onKeyDown:co,onKeyUp:ae,onMouseDown:Uh,onMouseUp:Jh,onDragOverCell:xt,onDrop:Mt,onSearchResultsChanged:c0,onVisibleRegionChanged:t0,clientSize:Nt,rowHeight:wr,searchResults:te,searchValue:J,onSearchValueChange:X,rows:Wt,scrollRef:gt,selection:A,translateX:un.tx,translateY:un.ty,verticalBorder:d0,gridRef:Lt,getCellRenderer:Ht,resizeIndicator:Oo}),h0,o!==void 0&&d.createElement(d.Suspense,{fallback:null},d.createElement(Qd,{...o,validateCell:ke,bloom:L,id:a0,getCellRenderer:Ht,className:(Ct==null?void 0:Ct.isSubGrid)===!0?"click-outside-ignore":void 0,provideEditor:ir,imageEditorOverride:p,onFinishEditing:l0,markdownDivCreateNode:f,isOutsideClick:Ri,customEventTarget:Ct==null?void 0:Ct.eventTarget}))))});function da(e){let{cell:t,posX:r,posY:n,bounds:o,theme:i}=e,{width:a,height:l,x:s,y:c}=o,u=t.maxSize??i.checkboxMaxSize,h=Math.floor(o.y+l/2),p=rl(u,l,i.cellVerticalPadding),m=el(tl(t.contentAlign??"center",s,a,i.cellHorizontalPadding,p),h,p),f=nl(s+r,c+n,m);return Yi(t)&&f}const rh={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??"false"},kind:pe.Boolean,needsHover:!0,useLabel:!1,needsHoverPosition:!0,measure:()=>50,draw:e=>nh(e,e.cell.data,Yi(e.cell),e.cell.maxSize??e.theme.checkboxMaxSize,e.cell.hoverEffectIntensity??.35),onDelete:e=>({...e,data:!1}),onSelect:e=>{da(e)&&e.preventDefault()},onClick:e=>{if(da(e))return{...e.cell,data:ia(e.cell.data)}},onPaste:(e,t)=>{let r=null;return e.toLowerCase()==="true"?r=!0:e.toLowerCase()==="false"?r=!1:e.toLowerCase()==="indeterminate"&&(r=void 0),r===t.data?void 0:{...t,data:r}}};function nh(e,t,r,n,o){if(!r&&t===null)return;let{ctx:i,hoverAmount:a,theme:l,rect:s,highlighted:c,hoverX:u,hoverY:h,cell:{contentAlign:p}}=e,{x:m,y:f,width:v,height:k}=s,M=!1;if(o>0){let y=r?1-o+o*a:.4;if(t===null&&(y*=a),y===0)return;y<1&&(M=!0,i.globalAlpha=y)}pi(i,l,t,m,f,v,k,c,u,h,n,p),M&&(i.globalAlpha=1)}const oh=Qt("div")({name:"BubblesOverlayEditorStyle",class:"gdg-b1ygi5by",propsAsIs:!1});var ih=e=>{let{bubbles:t}=e;return d.createElement(oh,null,t.map((r,n)=>d.createElement("div",{key:n,className:"boe-bubble"},r)),d.createElement("textarea",{className:"gdg-input",autoFocus:!0}))};const lh={getAccessibilityString:e=>ol(e.data),kind:pe.Bubble,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:(e,t,r)=>{let n=t.data.reduce((o,i)=>e.measureText(i).width+o+r.bubblePadding*2+r.bubbleMargin,0);return t.data.length===0?r.cellHorizontalPadding*2:n+2*r.cellHorizontalPadding-r.bubbleMargin},draw:e=>ah(e,e.cell.data),provideEditor:()=>e=>{let{value:t}=e;return d.createElement(ih,{bubbles:t.data})},onPaste:()=>{}};function ah(e,t){let{rect:r,theme:n,ctx:o,highlighted:i}=e,{x:a,y:l,width:s,height:c}=r,u=a+n.cellHorizontalPadding,h=[];for(let p of t){if(u>a+s)break;let m=bn(p,o,n.baseFontFull).width;h.push({x:u,width:m}),u+=m+n.bubblePadding*2+n.bubbleMargin}o.beginPath();for(let p of h)gr(o,p.x,l+(c-n.bubbleHeight)/2,p.width+n.bubblePadding*2,n.bubbleHeight,n.roundingRadius??n.bubbleHeight/2);o.fillStyle=i?n.bgBubbleSelected:n.bgBubble,o.fill();for(let[p,m]of h.entries())o.beginPath(),o.fillStyle=n.textBubble,o.fillText(t[p],m.x+n.bubblePadding,l+c/2+Hr(o,n))}var sh=Qt("div")({name:"DrilldownOverlayEditorStyle",class:"gdg-d4zsq0x",propsAsIs:!1}),ch=e=>{let{drilldowns:t}=e;return d.createElement(sh,null,t.map((r,n)=>d.createElement("div",{key:n,className:"doe-bubble"},r.img!==void 0&&d.createElement("img",{src:r.img}),d.createElement("div",null,r.text))))};const uh={getAccessibilityString:e=>ol(e.data.map(t=>t.text)),kind:pe.Drilldown,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:(e,t,r)=>t.data.reduce((n,o)=>e.measureText(o.text).width+n+r.bubblePadding*2+r.bubbleMargin+(o.img===void 0?0:18),0)+2*r.cellHorizontalPadding-4,draw:e=>hh(e,e.cell.data),provideEditor:()=>e=>{let{value:t}=e;return d.createElement(ch,{drilldowns:t.data})},onPaste:()=>{}};var Ci={};function dh(e,t,r,n){let o=Math.ceil(window.devicePixelRatio),i=r-10,a=r*o,l=n+5,s=n*3,c=(s+10)*o,u=`${e},${t},${o},${r}`;if(Ci[u]!==void 0)return{el:Ci[u],height:a,width:c,middleWidth:4*o,sideWidth:l*o,padding:5*o,dpr:o};let h=document.createElement("canvas"),p=h.getContext("2d");return p===null?null:(h.width=c,h.height=a,p.scale(o,o),Ci[u]=h,p.beginPath(),gr(p,5,5,s,i,n),p.shadowColor="rgba(24, 25, 34, 0.4)",p.shadowBlur=1,p.fillStyle=e,p.fill(),p.shadowColor="rgba(24, 25, 34, 0.3)",p.shadowOffsetY=1,p.shadowBlur=5,p.fillStyle=e,p.fill(),p.shadowOffsetY=0,p.shadowBlur=0,p.shadowBlur=0,p.beginPath(),gr(p,5.5,5.5,s,i,n),p.strokeStyle=t,p.lineWidth=1,p.stroke(),{el:h,height:a,width:c,sideWidth:l*o,middleWidth:n*o,padding:5*o,dpr:o})}function hh(e,t){let{rect:r,theme:n,ctx:o,imageLoader:i,col:a,row:l}=e,{x:s,width:c}=r,u=n.baseFontFull,h=pl(o,u),p=Math.min(r.height,Math.max(16,Math.ceil(h*n.lineHeight)*2)),m=Math.floor(r.y+(r.height-p)/2),f=p-10,v=n.bubblePadding,k=n.bubbleMargin,M=s+n.cellHorizontalPadding,y=n.roundingRadius??6,S=dh(n.bgCell,n.drilldownBorder,p,y),T=[];for(let P of t){if(M>s+c)break;let E=bn(P.text,o,u).width,z=0;P.img!==void 0&&i.loadOrGetImage(P.img,a,l)!==void 0&&(z=f-8+4);let F=E+z+v*2;T.push({x:M,width:F}),M+=F+k}if(S!==null){let{el:P,height:E,middleWidth:z,sideWidth:F,width:C,dpr:R,padding:L}=S,x=F/R,w=L/R;for(let I of T){let O=Math.floor(I.x),b=Math.floor(I.width),G=b-(x-w)*2;o.imageSmoothingEnabled=!1,o.drawImage(P,0,0,F,E,O-w,m,x,p),G>0&&o.drawImage(P,F,0,z,E,O+(x-w),m,G,p),o.drawImage(P,C-F,0,F,E,O+b-(x-w),m,x,p),o.imageSmoothingEnabled=!0}}o.beginPath();for(let[P,E]of T.entries()){let z=t[P],F=E.x+v;if(z.img!==void 0){let C=i.loadOrGetImage(z.img,a,l);if(C!==void 0){let R=f-8,L=0,x=0,w=C.width,I=C.height;w>I?(L+=(w-I)/2,w=I):I>w&&(x+=(I-w)/2,I=w),o.beginPath(),gr(o,F,m+p/2-R/2,R,R,n.roundingRadius??3),o.save(),o.clip(),o.drawImage(C,L,x,w,I,F,m+p/2-R/2,R,R),o.restore(),F+=R+4}}o.beginPath(),o.fillStyle=n.textBubble,o.fillText(z.text,F,m+p/2+Hr(o,n))}}const fh={getAccessibilityString:e=>e.data.join(", "),kind:pe.Image,needsHover:!1,useLabel:!1,needsHoverPosition:!1,draw:e=>gh(e,e.cell.displayData??e.cell.data,e.cell.rounding??e.theme.roundingRadius??4,e.cell.contentAlign),measure:(e,t)=>t.data.length*50,onDelete:e=>({...e,data:[]}),provideEditor:()=>e=>{let{value:t,onFinishedEditing:r,imageEditorOverride:n}=e,o=n??Os;return d.createElement(o,{urls:t.data,canWrite:t.readonly!==!0,onCancel:r,onChange:i=>{r({...t,data:[i]})}})},onPaste:(e,t)=>{e=e.trim();let r=e.split(",").map(n=>{try{return new URL(n),n}catch{return}}).filter(n=>n!==void 0);if(!(r.length===t.data.length&&r.every((n,o)=>n===t.data[o])))return{...t,data:r}}};var Si=4;function gh(e,t,r,n){let{rect:o,col:i,row:a,theme:l,ctx:s,imageLoader:c}=e,{x:u,y:h,height:p,width:m}=o,f=p-l.cellVerticalPadding*2,v=[],k=0;for(let y=0;y<t.length;y++){let S=t[y];if(S.length===0)continue;let T=c.loadOrGetImage(S,i,a);if(T!==void 0){v[y]=T;let P=T.width*(f/T.height);k+=P+Si}}if(k===0)return;k-=Si;let M=u+l.cellHorizontalPadding;n==="right"?M=Math.floor(u+m-l.cellHorizontalPadding-k):n==="center"&&(M=Math.floor(u+m/2-k/2));for(let y of v){if(y===void 0)continue;let S=y.width*(f/y.height);r>0&&(s.beginPath(),gr(s,M,h+l.cellVerticalPadding,S,f,r),s.save(),s.clip()),s.drawImage(y,M,h+l.cellVerticalPadding,S,f),r>0&&s.restore(),M+=S+Si}}function ph(e,t){let r=e*49632+t*325176;return r^=r<<13,r^=r>>17,r^=r<<5,r/4294967295*2}const mh={getAccessibilityString:()=>"",kind:pe.Loading,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:()=>120,draw:e=>{let{cell:t,col:r,row:n,ctx:o,rect:i,theme:a}=e;if(t.skeletonWidth===void 0||t.skeletonWidth===0)return;let l=t.skeletonWidth;t.skeletonWidthVariability!==void 0&&t.skeletonWidthVariability>0&&(l+=Math.round(ph(r,n)*t.skeletonWidthVariability));let s=a.cellHorizontalPadding;l+s*2>=i.width&&(l=i.width-s*2-1);let c=t.skeletonHeight??Math.min(18,i.height-2*a.cellVerticalPadding);gr(o,i.x+s,i.y+(i.height-c)/2,l,c,a.roundingRadius??3),o.fillStyle=mn(a.textDark,.1),o.fill()},onPaste:()=>{}};var vh=()=>e=>e.targetWidth;const ha=Qt("div")({name:"MarkdownOverlayEditorStyle",class:"gdg-m1pnx84e",propsAsIs:!1,vars:{"m1pnx84e-0":[vh(),"px"]}}),wh=e=>{let{value:t,onChange:r,forceEditMode:n,createNode:o,targetRect:i,onFinish:a,validatedSelection:l}=e,s=t.data,c=t.readonly===!0,[u,h]=d.useState(s===""||n),p=d.useCallback(()=>{h(f=>!f)},[]),m=s?"gdg-ml-6":"";return u?d.createElement(ha,{targetWidth:i.width-20},d.createElement(vo,{autoFocus:!0,highlight:!1,validatedSelection:l,value:s,onKeyDown:f=>{f.key==="Enter"&&f.stopPropagation()},onChange:r}),d.createElement("div",{className:`gdg-edit-icon gdg-checkmark-hover ${m}`,onClick:()=>a(t)},d.createElement(Ms,null))):d.createElement(ha,{targetWidth:i.width},d.createElement(Hs,{contents:s,createNode:o}),!c&&d.createElement(d.Fragment,null,d.createElement("div",{className:"spacer"}),d.createElement("div",{className:`gdg-edit-icon gdg-edit-hover ${m}`,onClick:p},d.createElement(ti,null))),d.createElement("textarea",{className:"gdg-md-edit-textarea gdg-input",autoFocus:!0}))},yh={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??""},kind:pe.Markdown,needsHover:!1,needsHoverPosition:!1,drawPrep:Wn,measure:(e,t,r)=>{let n=t.data.split(`
`)[0];return e.measureText(n).width+2*r.cellHorizontalPadding},draw:e=>Sr(e,e.cell.data,e.cell.contentAlign),onDelete:e=>({...e,data:""}),provideEditor:()=>e=>{let{onChange:t,value:r,target:n,onFinishedEditing:o,markdownDivCreateNode:i,forceEditMode:a,validatedSelection:l}=e;return d.createElement(wh,{onFinish:o,targetRect:n,value:r,validatedSelection:l,onChange:s=>t({...r,data:s.target.value}),forceEditMode:a,createNode:i})},onPaste:(e,t)=>e===t.data?void 0:{...t,data:e}},bh={getAccessibilityString:e=>e.row.toString(),kind:Xr.Marker,needsHover:!0,needsHoverPosition:!1,drawPrep:xh,measure:()=>44,draw:e=>Sh(e,e.cell.row,e.cell.checked,e.cell.markerKind,e.cell.drawHandle,e.cell.checkboxStyle),onClick:e=>{let{bounds:t,cell:r,posX:n,posY:o}=e,{width:i,height:a}=t,l=r.drawHandle?7+(i-7)/2:i/2,s=a/2;if(Math.abs(n-l)<=10&&Math.abs(o-s)<=10)return{...r,checked:!r.checked}},onPaste:()=>{}};function xh(e,t){let{ctx:r,theme:n}=e,o=n.markerFontFull,i=t??{};return(i==null?void 0:i.font)!==o&&(r.font=o,i.font=o),i.deprep=Ch,r.textAlign="center",i}function Ch(e){let{ctx:t}=e;t.textAlign="start"}function Sh(e,t,r,n,o,i){let{ctx:a,rect:l,hoverAmount:s,theme:c}=e,{x:u,y:h,width:p,height:m}=l,f=r?1:n==="checkbox-visible"?.6+.4*s:s;if(n!=="number"&&f>0){a.globalAlpha=f;let v=7*(r?s:1);if(pi(a,c,r,o?u+v:u,h,o?p-v:p,m,!0,void 0,void 0,c.checkboxMaxSize,"center",i),o){a.globalAlpha=s,a.beginPath();for(let k of[3,6])for(let M of[-5,-1,3])a.rect(u+k,h+m/2+M,2,2);a.fillStyle=c.textLight,a.fill(),a.beginPath()}a.globalAlpha=1}if(n==="number"||n==="both"&&!r){let v=t.toString(),k=c.markerFontFull,M=u+p/2;n==="both"&&s!==0&&(a.globalAlpha=1-s),a.fillStyle=c.textLight,a.font=k,a.fillText(v,M,h+m/2+Hr(a,k)),s!==0&&(a.globalAlpha=1)}}const kh={getAccessibilityString:()=>"",kind:Xr.NewRow,needsHover:!0,needsHoverPosition:!1,measure:()=>200,draw:e=>Mh(e,e.cell.hint,e.cell.icon),onPaste:()=>{}};function Mh(e,t,r){let{ctx:n,rect:o,hoverAmount:i,theme:a,spriteManager:l}=e,{x:s,y:c,width:u,height:h}=o;n.beginPath(),n.globalAlpha=i,n.rect(s+1,c+1,u,h-2),n.fillStyle=a.bgHeaderHovered,n.fill(),n.globalAlpha=1,n.beginPath();let p=t!=="",m=0;if(r!==void 0){let f=h-8,v=s+8/2,k=c+8/2;l.drawSprite(r,"normal",n,v,k,f,a,p?1:i),m=f}else{m=24;let f=p?12:i*12,v=p?0:(1-i)*12*.5,k=a.cellHorizontalPadding+4;f>0&&(n.moveTo(s+k+v,c+h/2),n.lineTo(s+k+v+f,c+h/2),n.moveTo(s+k+v+f*.5,c+h/2-f*.5),n.lineTo(s+k+v+f*.5,c+h/2+f*.5),n.lineWidth=2,n.strokeStyle=a.bgIconHeader,n.lineCap="round",n.stroke())}n.fillStyle=a.textMedium,n.fillText(t,m+s+a.cellHorizontalPadding+.5,c+h/2+Hr(n,a)),n.beginPath()}function fa(e,t,r,n,o,i,a){e.textBaseline="alphabetic";let l=Rh(e,o,n,t,(r==null?void 0:r.fullSize)??!1);e.beginPath(),gr(e,l.x,l.y,l.width,l.height,t.roundingRadius??4),e.globalAlpha=i,e.fillStyle=(r==null?void 0:r.bgColor)??mn(t.textDark,.1),e.fill(),e.globalAlpha=1,e.fillStyle=t.textDark,e.textBaseline="middle",a==null||a("text")}function Rh(e,t,r,n,o){let i=n.cellHorizontalPadding,a=n.cellVerticalPadding;if(o)return{x:t.x+i/2,y:t.y+a/2+1,width:t.width-i,height:t.height-a-1};let l=bn(r,e,n.baseFontFull,"alphabetic"),s=t.height-a,c=Math.min(s,l.actualBoundingBoxAscent*2.5);return{x:t.x+i/2,y:t.y+(t.height-c)/2+1,width:l.width+i*3,height:c-1}}var Eh=d.lazy(async()=>await $a(()=>import("./number-overlay-editor-DINk-4Qy.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([7,1,5,3,4]),import.meta.url));const Ih={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??""},kind:pe.Number,needsHover:e=>e.hoverEffect===!0,needsHoverPosition:!1,useLabel:!0,drawPrep:Wn,draw:e=>{let{hoverAmount:t,cell:r,ctx:n,theme:o,rect:i,overrideCursor:a}=e,{hoverEffect:l,displayData:s,hoverEffectTheme:c}=r;l===!0&&t>0&&fa(n,o,c,s,i,t,a),Sr(e,e.cell.displayData,e.cell.contentAlign)},measure:(e,t,r)=>e.measureText(t.displayData).width+r.cellHorizontalPadding*2,onDelete:e=>({...e,data:void 0}),provideEditor:()=>e=>{let{isHighlighted:t,onChange:r,value:n,validatedSelection:o}=e;return d.createElement(d.Suspense,{fallback:null},d.createElement(Eh,{highlight:t,disabled:n.readonly===!0,value:n.data,fixedDecimals:n.fixedDecimals,allowNegative:n.allowNegative,thousandSeparator:n.thousandSeparator,decimalSeparator:n.decimalSeparator,validatedSelection:o,onChange:i=>r({...n,data:Number.isNaN(i.floatValue??0)?0:i.floatValue})}))},onPaste:(e,t,r)=>{let n=typeof r.rawValue=="number"?r.rawValue:Number.parseFloat(typeof r.rawValue=="string"?r.rawValue:e);if(!(Number.isNaN(n)||t.data===n))return{...t,data:n,displayData:r.formattedString??t.displayData}}},Th={getAccessibilityString:()=>"",measure:()=>108,kind:pe.Protected,needsHover:!1,needsHoverPosition:!1,draw:Ph,onPaste:()=>{}};function Ph(e){let{ctx:t,theme:r,rect:n}=e,{x:o,y:i,height:a}=n;t.beginPath();let l=2.5,s=o+r.cellHorizontalPadding+l,c=i+a/2,u=Math.cos(Zi(30))*l,h=Math.sin(Zi(30))*l;for(let p=0;p<12;p++)t.moveTo(s,c-l),t.lineTo(s,c+l),t.moveTo(s+u,c-h),t.lineTo(s-u,c+h),t.moveTo(s-u,c-h),t.lineTo(s+u,c+h),s+=8;t.lineWidth=1.1,t.lineCap="square",t.strokeStyle=r.textLight,t.stroke()}const Oh={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??""},kind:pe.RowID,needsHover:!1,needsHoverPosition:!1,drawPrep:(e,t)=>Wn(e,t,e.theme.textLight),draw:e=>Sr(e,e.cell.data,e.cell.contentAlign),measure:(e,t,r)=>e.measureText(t.data).width+r.cellHorizontalPadding*2,provideEditor:()=>e=>{let{isHighlighted:t,onChange:r,value:n,validatedSelection:o}=e;return d.createElement(vo,{highlight:t,autoFocus:n.readonly!==!0,disabled:n.readonly!==!1,value:n.data,validatedSelection:o,onChange:i=>r({...n,data:i.target.value})})},onPaste:()=>{}},Dh={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??""},kind:pe.Text,needsHover:e=>e.hoverEffect===!0,needsHoverPosition:!1,drawPrep:Wn,useLabel:!0,draw:e=>{let{cell:t,hoverAmount:r,hyperWrapping:n,ctx:o,rect:i,theme:a,overrideCursor:l}=e,{displayData:s,contentAlign:c,hoverEffect:u,allowWrapping:h,hoverEffectTheme:p}=t;u===!0&&r>0&&fa(o,a,p,s,i,r,l),Sr(e,s,c,h,n)},measure:(e,t,r)=>{let n=t.displayData.split(`
`,t.allowWrapping===!0?void 0:1),o=0;for(let i of n)o=Math.max(o,e.measureText(i).width);return o+2*r.cellHorizontalPadding},onDelete:e=>({...e,data:""}),provideEditor:e=>({disablePadding:e.allowWrapping===!0,editor:t=>{let{isHighlighted:r,onChange:n,value:o,validatedSelection:i}=t;return d.createElement(vo,{style:e.allowWrapping===!0?{padding:"3px 8.5px"}:void 0,highlight:r,autoFocus:o.readonly!==!0,disabled:o.readonly===!0,altNewline:!0,value:o.data,validatedSelection:i,onChange:a=>n({...o,data:a.target.value})})}}),onPaste:(e,t,r)=>e===t.data?void 0:{...t,data:e,displayData:r.formattedString??t.displayData}},Hh=Qt("div")({name:"UriOverlayEditorStyle",class:"gdg-u1rrojo",propsAsIs:!1});var zh=e=>{let{uri:t,onChange:r,forceEditMode:n,readonly:o,validatedSelection:i,preview:a}=e,[l,s]=d.useState(!o&&(t===""||n)),c=d.useCallback(()=>{s(!0)},[]);return l?d.createElement(vo,{validatedSelection:i,highlight:!0,autoFocus:!0,value:t,onChange:r}):d.createElement(Hh,null,d.createElement("a",{className:"gdg-link-area",href:t,target:"_blank",rel:"noopener noreferrer"},a),!o&&d.createElement("div",{className:"gdg-edit-icon",onClick:c},d.createElement(ti,null)),d.createElement("textarea",{className:"gdg-input",autoFocus:!0}))};function ga(e,t,r,n){let o=r.cellHorizontalPadding,i=t.height/2-e.actualBoundingBoxAscent/2,a=e.width,l=e.actualBoundingBoxAscent;return n==="right"?o=t.width-a-r.cellHorizontalPadding:n==="center"&&(o=t.width/2-a/2),{x:o,y:i,width:a,height:l}}function pa(e){let{cell:t,bounds:r,posX:n,posY:o,theme:i}=e,a=t.displayData??t.data;if(t.hoverEffect!==!0||t.onClickUri===void 0)return!1;let l=dl(a,i.baseFontFull);if(l===void 0)return!1;let s=ga(l,r,i,t.contentAlign);return qr({x:s.x-4,y:s.y-4,width:s.width+8,height:s.height+8},n,o)}const Ah=[bh,kh,rh,lh,uh,fh,mh,yh,Ih,Th,Oh,Dh,{getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??""},kind:pe.Uri,needsHover:e=>e.hoverEffect===!0,needsHoverPosition:!0,useLabel:!0,drawPrep:Wn,draw:e=>{let{cell:t,theme:r,overrideCursor:n,hoverX:o,hoverY:i,rect:a,ctx:l}=e,s=t.displayData??t.data,c=t.hoverEffect===!0;if(n!==void 0&&c&&o!==void 0&&i!==void 0){let{x:u,y:h,width:p,height:m}=ga(bn(s,l,r.baseFontFull),a,r,t.contentAlign);if(o>=u-4&&o<=u-4+p+8&&i>=h-4&&i<=h-4+m+8){let f=Hr(l,r.baseFontFull);n("pointer");let v=h-f;l.beginPath(),l.moveTo(a.x+u,Math.floor(a.y+v+m+5)+.5),l.lineTo(a.x+u+p,Math.floor(a.y+v+m+5)+.5),l.strokeStyle=r.linkColor,l.stroke(),l.save(),l.fillStyle=e.cellFillColor,Sr({...e,rect:{...a,x:a.x-1}},s,t.contentAlign),Sr({...e,rect:{...a,x:a.x-2}},s,t.contentAlign),Sr({...e,rect:{...a,x:a.x+1}},s,t.contentAlign),Sr({...e,rect:{...a,x:a.x+2}},s,t.contentAlign),l.restore()}}l.fillStyle=c?r.linkColor:r.textDark,Sr(e,s,t.contentAlign)},onSelect:e=>{pa(e)&&e.preventDefault()},onClick:e=>{var r;let{cell:t}=e;pa(e)&&((r=t.onClickUri)==null||r.call(t,e))},measure:(e,t,r)=>e.measureText(t.displayData??t.data).width+r.cellHorizontalPadding*2,onDelete:e=>({...e,data:""}),provideEditor:e=>t=>{let{onChange:r,value:n,forceEditMode:o,validatedSelection:i}=t;return d.createElement(zh,{forceEditMode:n.readonly!==!0&&(o||e.hoverEffect===!0&&e.onClickUri!==void 0),uri:n.data,preview:n.displayData??n.data,validatedSelection:i,readonly:n.readonly===!0,onChange:a=>r({...n,data:a.target.value})})},onPaste:(e,t,r)=>e===t.data?void 0:{...t,data:e,displayData:r.formattedString??t.displayData}}];var Lh=$t(q(((e,t)=>{var r=ei(),n=ho(),o="Expected a function";function i(a,l,s){var c=!0,u=!0;if(typeof a!="function")throw TypeError(o);return n(s)&&(c="leading"in s?!!s.leading:c,u="trailing"in s?!!s.trailing:u),r(a,l,{leading:c,maxWait:l,trailing:u})}t.exports=i}))(),1),ki=[],Fh=class extends vl{constructor(){super(...arguments);tt(this,"imageLoaded",()=>{});tt(this,"loadedLocations",[]);tt(this,"cache",{});tt(this,"sendLoaded",(0,Lh.default)(()=>{this.imageLoaded(new $n(this.loadedLocations)),this.loadedLocations=[]},20));tt(this,"clearOutOfWindow",()=>{let t=Object.keys(this.cache);for(let r of t){let n=this.cache[r],o=!1;for(let i=0;i<n.cells.length;i++){let a=n.cells[i];if(this.isInWindow(a)){o=!0;break}}o?n.cells=n.cells.filter(this.isInWindow):(n.cancel(),delete this.cache[r])}})}setCallback(t){this.imageLoaded=t}loadImage(t,r,n,o){let i=!1,a=ki.pop()??new Image,l=!1,s={img:void 0,cells:[or(r,n)],url:t,cancel:()=>{l||(l=!0,ki.length<12?ki.unshift(a):i||(a.src=""))}},c=new Promise(u=>a.addEventListener("load",()=>u(null)));requestAnimationFrame(async()=>{try{a.src=t,await c,await a.decode();let u=this.cache[o];if(u!==void 0&&!l){u.img=a;for(let h of u.cells)this.loadedLocations.push(ci(h));i=!0,this.sendLoaded()}}catch{s.cancel()}}),this.cache[o]=s}loadOrGetImage(t,r,n){let o=t,i=this.cache[o];if(i!==void 0){let a=or(r,n);return i.cells.includes(a)||i.cells.push(a),i.img}else this.loadImage(t,r,n,o)}};const jh=d.forwardRef((e,t)=>{let r=d.useMemo(()=>({...Pc,...e.headerIcons}),[e.headerIcons]),n=d.useMemo(()=>e.renderers??Ah,[e.renderers]),o=d.useMemo(()=>e.imageWindowLoader??new Fh,[e.imageWindowLoader]);return d.createElement(th,{...e,renderers:n,headerIcons:r,ref:t,imageWindowLoader:o})});function _h(e){switch(e){case"string":return pe.Text;case"number":return pe.Number;case"boolean":return pe.Boolean;default:return pe.Text}}function Nh(e){switch(e){case"string":return Kr.HeaderString;case"number":case"integer":return Kr.HeaderNumber;case"boolean":return Kr.HeaderBoolean;case"date":case"datetime":return Kr.HeaderDate;case"time":return Kr.HeaderTime;case"unknown":return Kr.HeaderString;default:return Ja(e),Kr.HeaderString}}function ma(e){return"rowIdx"in e&&"columnId"in e&&"value"in e}function Bh(e){return"rowIdx"in e&&"type"in e}function Wh(e){return"columnIdx"in e&&"type"in e}function $h(e){let{selection:t,data:r,setData:n,onAddEdits:o,columns:i,editableColumns:a}=e;if(!t.current)return;let{range:l}=t.current,{x:s,y:c}=l;navigator.clipboard.readText().then(u=>{if(!u.trim())return;let h=u.split(`
`).filter(f=>f.trim()),p=[];for(let f of h){let v=f.split("	");p.push(v)}if(p.length===0)return;let m=[];for(let[f,v]of p.entries()){if(!v)continue;let k=c+f;if(k>=r.length)break;for(let[M,y]of v.entries()){if(y===void 0)continue;let S=s+M;if(!i||S>=i.length)break;let T=i[S],P=T.dataType;if(!(a==="all"||a.includes(T.title)))continue;let E=y;switch(P){case"integer":case"number":{let F=Number(y);if(Number.isNaN(F))continue;E=F;break}case"boolean":{let F=y.toLowerCase();E=F==="true"||F==="1";break}}let z=i[S].title;m.push({rowIdx:k,columnId:z,value:E})}}m.length>0&&(o(m),n(f=>{let v=[...f];for(let k of m)if(ma(k)){let M=k.rowIdx,y=k.columnId;if(M<v.length){let S=v[M];y in S&&(S[y]=k.value)}}return v}))}).catch(u=>{Bi.error("Failed to read clipboard data",u)})}function Xh(e){return e==="light"?{lineHeight:1.25}:{lineHeight:1.25,accentColor:"#7c3aed",accentLight:"rgba(124, 58, 237, 0.15)",textDark:"#f4f4f5",textMedium:"#a1a1aa",textLight:"#71717a",textBubble:"#f4f4f5",bgIconHeader:"#a1a1aa",fgIconHeader:"#18181b",textHeader:"#d4d4d8",textHeaderSelected:"#18181b",bgCell:"#18181b",bgCellMedium:"#27272a",bgHeader:"#27272a",bgHeaderHasFocus:"#3f3f46",bgHeaderHovered:"#3f3f46",bgBubble:"#27272a",bgBubbleSelected:"#7c3aed",bgSearchResult:"#312e81",borderColor:"#27272a",drilldownBorder:"#7c3aed",linkColor:"#818cf8",headerFontStyle:"bold 14px",baseFontStyle:"13px"}}var va=$t(k0(),1),Ae=$t(M0(),1);const Kh=e=>{let t=(0,va.c)(19),{currentColumnName:r,onRename:n,onCancel:o}=e,[i,a]=(0,d.useState)(""),l;t[0]!==r||t[1]!==i||t[2]!==n?(l=()=>{i.trim()&&(n(i.trim()),a(r))},t[0]=r,t[1]=i,t[2]=n,t[3]=l):l=t[3];let s=l,c;t[4]!==s||t[5]!==o?(c=y=>{y.key==="Enter"?s():y.key==="Escape"&&o()},t[4]=s,t[5]=o,t[6]=c):c=t[6];let u=c,h;t[7]===Symbol.for("react.memo_cache_sentinel")?(h=(0,Ae.jsxs)(Ya,{children:[(0,Ae.jsx)(_0,{className:"mr-2 h-3.5 w-3.5"}),"Rename column"]}),t[7]=h):h=t[7];let p;t[8]===Symbol.for("react.memo_cache_sentinel")?(p=(0,Ae.jsx)(Xi,{htmlFor:"rename-input",children:"Column name"}),t[8]=p):p=t[8];let m;t[9]===Symbol.for("react.memo_cache_sentinel")?(m=y=>a(y.target.value),t[9]=m):m=t[9];let f;t[10]!==u||t[11]!==i?(f=(0,Ae.jsxs)("div",{children:[p,(0,Ae.jsx)(qa,{value:i,onChange:m,placeholder:"Enter new column name",className:"mt-1",onKeyDown:u})]}),t[10]=u,t[11]=i,t[12]=f):f=t[12];let v=!i.trim(),k;t[13]!==s||t[14]!==v?(k=(0,Ae.jsx)($i,{onClick:s,disabled:v,size:"sm",className:"w-full",children:"Rename"}),t[13]=s,t[14]=v,t[15]=k):k=t[15];let M;return t[16]!==f||t[17]!==k?(M=(0,Ae.jsxs)(Ua,{children:[h,(0,Ae.jsx)(Ga,{children:(0,Ae.jsx)(Va,{className:"w-64 p-4",children:(0,Ae.jsxs)("div",{className:"space-y-3",children:[f,k]})})})]}),t[16]=f,t[17]=k,t[18]=M):M=t[18],M},wa=e=>{let t=(0,va.c)(77),{direction:r,onAdd:n,onCancel:o}=e,[i,a]=(0,d.useState)(""),[l,s]=(0,d.useState)("string"),c,u,h,p,m,f,v,k,M,y,S,T,P,E,z;if(t[0]!==i||t[1]!==l||t[2]!==r||t[3]!==n||t[4]!==o){let G=["string","number","boolean","datetime"],_;t[20]!==i||t[21]!==l||t[22]!==n?(_=()=>{i.trim()&&(n(i.trim(),l),a(""),s("string"))},t[20]=i,t[21]=l,t[22]=n,t[23]=_):_=t[23],f=_;let Z;t[24]!==f||t[25]!==o?(Z=ae=>{ae.key==="Enter"?f():ae.key==="Escape"&&o()},t[24]=f,t[25]=o,t[26]=Z):Z=t[26];let ee=Z;m=Ua;let V;t[27]===Symbol.for("react.memo_cache_sentinel")?(V=(0,Ae.jsx)(N0,{className:"mr-2 h-3.5 w-3.5"}),t[27]=V):V=t[27],t[28]===r?z=t[29]:(z=(0,Ae.jsxs)(Ya,{children:[V,"Add column to the ",r]}),t[28]=r,t[29]=z),p=Ga,h=Va,E="w-64 p-4",T="space-y-3";let se=`add-column-input-${r}`,oe;t[30]===se?oe=t[31]:(oe=(0,Ae.jsx)(Xi,{htmlFor:se,children:"Column name"}),t[30]=se,t[31]=oe);let ue=`add-column-input-${r}`,Te;t[32]===Symbol.for("react.memo_cache_sentinel")?(Te=ae=>a(ae.target.value),t[32]=Te):Te=t[32];let te;t[33]!==i||t[34]!==ee||t[35]!==ue?(te=(0,Ae.jsx)(qa,{id:ue,value:i,onChange:Te,placeholder:"Enter column name",className:"mt-1",onKeyDown:ee}),t[33]=i,t[34]=ee,t[35]=ue,t[36]=te):te=t[36],t[37]!==oe||t[38]!==te?(P=(0,Ae.jsxs)("div",{children:[oe,te]}),t[37]=oe,t[38]=te,t[39]=P):P=t[39];let X=`add-column-type-${r}`;t[40]===X?S=t[41]:(S=(0,Ae.jsx)(Xi,{htmlFor:X,children:"Data type"}),t[40]=X,t[41]=S),u=A0,k=l,t[42]===Symbol.for("react.memo_cache_sentinel")?(M=ae=>s(ae),t[42]=M):M=t[42];let J=`add-column-type-${r}`,re;t[43]===Symbol.for("react.memo_cache_sentinel")?(re=(0,Ae.jsx)(O0,{}),t[43]=re):re=t[43],t[44]===J?y=t[45]:(y=(0,Ae.jsx)(z0,{id:J,className:"mt-1",children:re}),t[44]=J,t[45]=y),c=H0,v=G.map(Vh),t[0]=i,t[1]=l,t[2]=r,t[3]=n,t[4]=o,t[5]=c,t[6]=u,t[7]=h,t[8]=p,t[9]=m,t[10]=f,t[11]=v,t[12]=k,t[13]=M,t[14]=y,t[15]=S,t[16]=T,t[17]=P,t[18]=E,t[19]=z}else c=t[5],u=t[6],h=t[7],p=t[8],m=t[9],f=t[10],v=t[11],k=t[12],M=t[13],y=t[14],S=t[15],T=t[16],P=t[17],E=t[18],z=t[19];let F;t[46]!==c||t[47]!==v?(F=(0,Ae.jsx)(c,{children:v}),t[46]=c,t[47]=v,t[48]=F):F=t[48];let C;t[49]!==u||t[50]!==F||t[51]!==k||t[52]!==M||t[53]!==y?(C=(0,Ae.jsxs)(u,{value:k,onValueChange:M,children:[y,F]}),t[49]=u,t[50]=F,t[51]=k,t[52]=M,t[53]=y,t[54]=C):C=t[54];let R;t[55]!==C||t[56]!==S?(R=(0,Ae.jsxs)("div",{children:[S,C]}),t[55]=C,t[56]=S,t[57]=R):R=t[57];let L=!i.trim(),x;t[58]!==f||t[59]!==L?(x=(0,Ae.jsx)($i,{onClick:f,disabled:L,size:"sm",className:"w-full",children:"Add"}),t[58]=f,t[59]=L,t[60]=x):x=t[60];let w;t[61]!==R||t[62]!==x||t[63]!==T||t[64]!==P?(w=(0,Ae.jsxs)("div",{className:T,children:[P,R,x]}),t[61]=R,t[62]=x,t[63]=T,t[64]=P,t[65]=w):w=t[65];let I;t[66]!==h||t[67]!==w||t[68]!==E?(I=(0,Ae.jsx)(h,{className:E,children:w}),t[66]=h,t[67]=w,t[68]=E,t[69]=I):I=t[69];let O;t[70]!==p||t[71]!==I?(O=(0,Ae.jsx)(p,{children:I}),t[70]=p,t[71]=I,t[72]=O):O=t[72];let b;return t[73]!==m||t[74]!==O||t[75]!==z?(b=(0,Ae.jsxs)(m,{children:[z,O]}),t[73]=m,t[74]=O,t[75]=z,t[76]=b):b=t[76],b};function Vh(e){return(0,Ae.jsx)(D0,{value:e,children:R0(e)},e)}function ya(e,t){return e.map(r=>{let n=r,o=Object.keys(n);if(t<0||t>=o.length)return n;let i=o[t],{[i]:a,...l}=n;return l})}function ba(e,t){return t?e.map(r=>({...r,[t]:""})):e}function xa(e,t,r){return!t||!r||t===r?e:e.map(n=>{let o=n,{[t]:i,...a}=o;return{...a,[r]:o[t]}})}function Sn(e){var a;let{columnFields:t,columnIdx:r,type:n,dataType:o,newColumnName:i}=e;switch(n){case"insert":{if(!i)return Bi.error("newName is required for insert"),t;let l=Object.entries(t),s=[...l.slice(0,r),[i,o||"string"],...l.slice(r)];return Object.fromEntries(s)}case"remove":{if(r<0||r>=Object.keys(t).length)return t;let l=(a=Object.entries(t)[r])==null?void 0:a[0];if(l){let{[l]:s,...c}=t;return c}return t}case"rename":{if(!i)return Bi.error("newName is required for rename"),t;if(r<0||r>=Object.keys(t).length)return t;let l=Object.entries(t),s=[...l.slice(0,r),[i,o||"string"],...l.slice(r+1)];return Object.fromEntries(s)}}}Gi=({data:e,setData:t,columnFields:r,setColumnFields:n,editableColumns:o,edits:i,onAddEdits:a,onAddRows:l,onDeleteRows:s,onRenameColumn:c,onDeleteColumn:u,onAddColumn:h})=>{let{theme:p}=P0(),m=(0,d.useRef)(null),[f,v]=(0,d.useState)(),[k,M]=(0,d.useState)(!1),[y,S]=d.useState({columns:nt.empty(),rows:nt.empty()}),[T,P]=(0,d.useState)({}),E=W0();$0(()=>{if(i.length===0)return;let X=new Map;for(let re of i)if(ma(re))if(re.rowIdx>=e.length){X.has(re.rowIdx)||X.set(re.rowIdx,{});let ae=X.get(re.rowIdx);ae&&(ae[re.columnId]=re.value)}else t(ae=>{let _e=[...ae];return _e[re.rowIdx][re.columnId]=re.value,_e});else if(Bh(re)&&re.type===Go.Remove)t(ae=>ae.filter((_e,Le)=>Le!==re.rowIdx));else if(Wh(re))switch(re.type){case Go.Remove:t(ae=>ya(ae,re.columnIdx)),n(ae=>Sn({columnFields:ae,columnIdx:re.columnIdx,type:"remove"}));break;case Go.Insert:n(ae=>Sn({columnFields:ae,columnIdx:re.columnIdx,type:"insert",newColumnName:re.newName})),t(ae=>ba(ae,re.newName));break;case Go.Rename:{let ae=z[re.columnIdx].title,_e=re.newName;if(!ae||!_e)return;n(Le=>Sn({columnFields:Le,columnIdx:re.columnIdx,type:"rename",newColumnName:_e})),t(Le=>xa(Le,ae,_e));break}}let J=[...X.entries()].sort(([re],[ae])=>re-ae).map(([,re])=>re);J.length>0&&t(re=>[...re,...J]),E()});let z=(0,d.useMemo)(()=>{let X=[];for(let[J,re]of Object.entries(r)){let ae=o==="all"||o.includes(J);X.push({id:J,title:J,width:T[J],icon:ae?Nh(re):Kr.ProtectedColumnOverlay,style:"normal",kind:_h(re),dataType:re,hasMenu:!0,themeOverride:ae?void 0:{bgCell:p==="light"?"#F9F9FA":"#1e1e21"}})}return X},[r,T,o,p]),F=(0,d.useCallback)(X=>{let[J,re]=X,ae=e[re][z[J].title],_e=z[J].kind,Le=o==="all"||o.includes(z[J].title);if(_e===pe.Boolean){let Se=!!ae;return{kind:pe.Boolean,allowOverlay:!1,readonly:!Le,data:Se}}return _e===pe.Number&&typeof ae=="number"?{kind:pe.Number,allowOverlay:Le,readonly:!Le,displayData:String(ae),data:ae}:{kind:pe.Text,allowOverlay:Le,readonly:!Le,displayData:String(ae),data:String(ae)}},[z,e,o]),C=(0,d.useCallback)((X,J)=>{let[re,ae]=X,_e=z[re],Le=_e.title,Se=J.data;(_e.dataType==="number"||_e.dataType==="integer")&&(J.data===void 0||J.data==="")&&(Se=null),t($e=>{let De=[...$e];return De[ae][Le]=Se,De}),a([{rowIdx:ae,columnId:Le,value:Se}])},[z,a,t]),R=(0,d.useCallback)((X,J)=>{P(re=>({...re,[X.title]:J}))},[]),L=(0,d.useCallback)((X,J,re)=>{let[ae,_e]=X;switch(r[z[ae].title]){case"number":case"integer":if(Number.isNaN(Number(J.data)))return!1;break;case"boolean":if(typeof J.data!="boolean")return!1;break}return!0},[r,z]),x=(0,d.useCallback)(X=>{if(m.current){if(Wi.isMetaOrCtrl(X)&&X.key==="c"){m.current.emit("copy");return}if(Wi.isMetaOrCtrl(X)&&X.key==="v"){$h({selection:y,data:e,setData:t,columns:z,editableColumns:o,onAddEdits:a});return}if(Wi.isMetaOrCtrl(X)&&X.key==="f"){M(J=>!J),X.stopPropagation(),X.preventDefault();return}if(X.key==="Escape"){M(!1);return}}},[z,e,o,a,y,t]),w=(0,d.useCallback)(()=>{let X=Object.fromEntries(z.map(J=>{let re=J.dataType;switch(re){case"boolean":return[J.title,!1];case"number":case"integer":return[J.title,null];case"date":case"datetime":case"time":return[J.title,new Date];case"string":case"unknown":return[J.title,""];default:return Ja(re),[J.title,""]}}));l([X]),t(J=>[...J,X])},[z,l,t]),I=()=>{let X=y.rows.toArray();s(X);let J=0;for(let re of X){let ae=re-J;t(_e=>_e.filter((Le,Se)=>Se!==ae)),J++}S({columns:nt.empty(),rows:nt.empty()})},O=X0((X,J)=>{v({col:X,bounds:J})}),b=async()=>{if(f){let X=z[f.col].title;await K0(X),v(void 0)}};function G(X){I0({title:`Column '${X}' already exists`,description:"Please enter a different column name",variant:"danger"})}let _=X=>{if(f){let J=z[f.col].title;if(r[X]){G(X);return}let re=z[f.col].dataType;c(f.col,X),n(ae=>Sn({columnFields:ae,columnIdx:f.col,type:"rename",dataType:re,newColumnName:X})),t(ae=>xa(ae,J,X)),v(void 0)}},Z=()=>{f&&(u(f.col),n(X=>Sn({columnFields:X,columnIdx:f.col,type:"remove"})),t(X=>ya(X,f.col)),v(void 0))},ee=X=>{let{direction:J,columnName:re,dataType:ae}=X;if(f){let _e=f.col+(J==="left"?0:1),Le=Math.max(0,Math.min(_e,z.length));if(r[re]){G(re);return}h(Le,re),n(Se=>Sn({columnFields:Se,columnIdx:Le,type:"insert",dataType:ae,newColumnName:re})),t(Se=>ba(Se,re)),v(void 0)}},V=(f==null?void 0:f.col)===z.length-1,se=f!==void 0,oe="mr-2 h-3.5 w-3.5",ue={hint:"New row",sticky:!0,tint:!0},Te=e.length>1e5,te=o==="all";return(0,Ae.jsxs)("div",{className:"relative",children:[(0,Ae.jsx)(E0,{children:(0,Ae.jsx)(jh,{ref:m,getCellContent:F,columns:z,gridSelection:y,onGridSelectionChange:S,rows:e.length,overscrollX:50,smoothScrollX:!Te,smoothScrollY:!Te,validateCell:L,getCellsForSelection:!0,onPaste:!0,showSearch:k,fillHandle:!0,allowedFillDirections:"vertical",onKeyDown:x,height:e.length>10?450:void 0,width:"100%",rowMarkers:{kind:"both"},rowSelectionMode:"multi",onCellEdited:C,onColumnResize:R,onHeaderMenuClick:O,theme:Xh(p),trailingRowOptions:ue,onRowAppended:w,maxColumnAutoWidth:600,maxColumnWidth:600})}),(()=>{if(!se)return;let X=(0,Ae.jsxs)(Ae.Fragment,{children:[te&&(0,Ae.jsx)(Kh,{currentColumnName:z[f.col].title,onRename:_,onCancel:()=>v(void 0)}),(0,Ae.jsx)(Ka,{}),(0,Ae.jsx)(wa,{direction:"left",onAdd:(J,re)=>ee({direction:"left",columnName:J,dataType:re}),onCancel:()=>v(void 0)}),(0,Ae.jsx)(wa,{direction:"right",onAdd:(J,re)=>ee({direction:"right",columnName:J,dataType:re}),onCancel:()=>v(void 0)}),(0,Ae.jsx)(Ka,{}),!V&&te&&(0,Ae.jsxs)(Xa,{onClick:Z,className:"text-destructive focus:text-destructive",children:[(0,Ae.jsx)(B0,{className:oe}),"Delete column"]})]});return(0,Ae.jsx)(F0,{open:se,onOpenChange:J=>!J&&v(void 0),children:(0,Ae.jsxs)(L0,{style:{left:(f==null?void 0:f.bounds.x)??0,top:((f==null?void 0:f.bounds.y)??0)+((f==null?void 0:f.bounds.height)??0)},className:"fixed w-52",children:[(0,Ae.jsxs)(Xa,{onClick:b,children:[(0,Ae.jsx)(j0,{className:oe}),"Copy column name"]}),!Te&&X]})})})(),(0,Ae.jsx)("div",{className:"absolute bottom-1 right-2 w-26",children:(0,Ae.jsx)($i,{variant:"destructive",size:"sm",disabled:y.rows.length===0,className:"right-2 h-7",onClick:I,children:y.rows.length<=1?"Delete row":"Delete rows"})})]})},hs=Gi})();export{Gi as GlideDataEditor,of as __tla,hs as default};
