function l(t){return{type:t,style:"keyword"}}var _=l("keyword a"),z=l("keyword b"),k=l("keyword c"),M=l("operator"),T={type:"atom",style:"atom"},g={type:"attribute",style:"attribute"},f=l("typedef"),I={if:_,while:_,else:z,do:z,try:z,return:k,break:k,continue:k,new:k,throw:k,var:l("var"),inline:g,static:g,using:l("import"),public:g,private:g,cast:l("cast"),import:l("import"),macro:l("macro"),function:l("function"),catch:l("catch"),untyped:l("untyped"),callback:l("cb"),for:l("for"),switch:l("switch"),case:l("case"),default:l("default"),in:M,never:l("property_access"),trace:l("trace"),class:f,abstract:f,enum:f,interface:f,typedef:f,extends:f,implements:f,dynamic:f,true:T,false:T,null:T},E=/[+\-*&%=<>!?|]/;function N(t,n,r){return n.tokenize=r,r(t,n)}function $(t,n){for(var r=!1,a;(a=t.next())!=null;){if(a==n&&!r)return!0;r=!r&&a=="\\"}}var f,B;function d(t,n,r){return f=t,B=r,n}function w(t,n){var r=t.next();if(r=='"'||r=="'")return N(t,n,Q(r));if(/[\[\]{}\(\),;\:\.]/.test(r))return d(r);if(r=="0"&&t.eat(/x/i))return t.eatWhile(/[\da-f]/i),d("number","number");if(/\d/.test(r)||r=="-"&&t.eat(/\d/))return t.match(/^\d*(?:\.\d*(?!\.))?(?:[eE][+\-]?\d+)?/),d("number","number");if(n.reAllowed&&r=="~"&&t.eat(/\//))return $(t,"/"),t.eatWhile(/[gimsu]/),d("regexp","string.special");if(r=="/")return t.eat("*")?N(t,n,R):t.eat("/")?(t.skipToEnd(),d("comment","comment")):(t.eatWhile(E),d("operator",null,t.current()));if(r=="#")return t.skipToEnd(),d("conditional","meta");if(r=="@")return t.eat(/:/),t.eatWhile(/[\w_]/),d("metadata","meta");if(E.test(r))return t.eatWhile(E),d("operator",null,t.current());var a;if(/[A-Z]/.test(r))return t.eatWhile(/[\w_<>]/),a=t.current(),d("type","type",a);t.eatWhile(/[\w_]/);var a=t.current(),i=I.propertyIsEnumerable(a)&&I[a];return i&&n.kwAllowed?d(i.type,i.style,a):d("variable","variable",a)}function Q(t){return function(n,r){return $(n,t)&&(r.tokenize=w),d("string","string")}}function R(t,n){for(var r=!1,a;a=t.next();){if(a=="/"&&r){n.tokenize=w;break}r=a=="*"}return d("comment","comment")}var F={atom:!0,number:!0,variable:!0,string:!0,regexp:!0};function j(t,n,r,a,i,s){this.indented=t,this.column=n,this.type=r,this.prev=i,this.info=s,a!=null&&(this.align=a)}function U(t,n){for(var r=t.localVars;r;r=r.next)if(r.name==n)return!0}function X(t,n,r,a,i){var s=t.cc;for(o.state=t,o.stream=i,o.marked=null,o.cc=s,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);;)if((s.length?s.pop():y)(r,a)){for(;s.length&&s[s.length-1].lex;)s.pop()();return o.marked?o.marked:r=="variable"&&U(t,a)?"variableName.local":r=="variable"&&Y(t,a)?"variableName.special":n}}function Y(t,n){if(/[a-z]/.test(n.charAt(0)))return!1;for(var r=t.importedtypes.length,a=0;a<r;a++)if(t.importedtypes[a]==n)return!0}function q(t){for(var n=o.state,r=n.importedtypes;r;r=r.next)if(r.name==t)return;n.importedtypes={name:t,next:n.importedtypes}}var o={state:null,column:null,marked:null,cc:null};function v(){for(var t=arguments.length-1;t>=0;t--)o.cc.push(arguments[t])}function e(){return v.apply(null,arguments),!0}function C(t,n){for(var r=n;r;r=r.next)if(r.name==t)return!0;return!1}function A(t){var n=o.state;if(n.context){if(o.marked="def",C(t,n.localVars))return;n.localVars={name:t,next:n.localVars}}else if(n.globalVars){if(C(t,n.globalVars))return;n.globalVars={name:t,next:n.globalVars}}}var tt={name:"this",next:null};function D(){o.state.context||(o.state.localVars=tt),o.state.context={prev:o.state.context,vars:o.state.localVars}}function V(){o.state.localVars=o.state.context.vars,o.state.context=o.state.context.prev}V.lex=!0;function c(t,n){var r=function(){var a=o.state;a.lexical=new j(a.indented,o.stream.column(),t,null,a.lexical,n)};return r.lex=!0,r}function u(){var t=o.state;t.lexical.prev&&(t.lexical.type==")"&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}u.lex=!0;function p(t){function n(r){return r==t?e():t==";"?v():e(n)}return n}function y(t){return t=="@"?e(H):t=="var"?e(c("vardef"),P,p(";"),u):t=="keyword a"?e(c("form"),m,y,u):t=="keyword b"?e(c("form"),y,u):t=="{"?e(c("}"),D,Z,u,V):t==";"?e():t=="attribute"?e(G):t=="function"?e(x):t=="for"?e(c("form"),p("("),c(")"),ot,p(")"),u,y,u):t=="variable"?e(c("stat"),et):t=="switch"?e(c("form"),m,c("}","switch"),p("{"),Z,u,u):t=="case"?e(m,p(":")):t=="default"?e(p(":")):t=="catch"?e(c("form"),D,p("("),L,p(")"),y,u,V):t=="import"?e(J,p(";")):t=="typedef"?e(rt):v(c("stat"),m,p(";"),u)}function m(t){return F.hasOwnProperty(t)||t=="type"?e(b):t=="function"?e(x):t=="keyword c"?e(O):t=="("?e(c(")"),O,p(")"),u,b):t=="operator"?e(m):t=="["?e(c("]"),h(O,"]"),u,b):t=="{"?e(c("}"),h(it,"}"),u,b):e()}function O(t){return t.match(/[;\}\)\],]/)?v():v(m)}function b(t,n){if(t=="operator"&&/\+\+|--/.test(n))return e(b);if(t=="operator"||t==":")return e(m);if(t!=";"){if(t=="(")return e(c(")"),h(m,")"),u,b);if(t==".")return e(at,b);if(t=="[")return e(c("]"),m,p("]"),u,b)}}function G(t){if(t=="attribute")return e(G);if(t=="function")return e(x);if(t=="var")return e(P)}function H(t){if(t==":"||t=="variable")return e(H);if(t=="(")return e(c(")"),h(nt,")"),u,y)}function nt(t){if(t=="variable")return e()}function J(t,n){if(t=="variable"&&/[A-Z]/.test(n.charAt(0)))return q(n),e();if(t=="variable"||t=="property"||t=="."||n=="*")return e(J)}function rt(t,n){if(t=="variable"&&/[A-Z]/.test(n.charAt(0)))return q(n),e();if(t=="type"&&/[A-Z]/.test(n.charAt(0)))return e()}function et(t){return t==":"?e(u,y):v(b,p(";"),u)}function at(t){if(t=="variable")return o.marked="property",e()}function it(t){if(t=="variable"&&(o.marked="property"),F.hasOwnProperty(t))return e(p(":"),m)}function h(t,n){function r(a){return a==","?e(t,r):a==n?e():e(p(n))}return function(a){return a==n?e():v(t,r)}}function Z(t){return t=="}"?e():v(y,Z)}function P(t,n){return t=="variable"?(A(n),e(S,K)):e()}function K(t,n){if(n=="=")return e(m,K);if(t==",")return e(P)}function ot(t,n){return t=="variable"?(A(n),e(ut,m)):v()}function ut(t,n){if(n=="in")return e()}function x(t,n){if(t=="variable"||t=="type")return A(n),e(x);if(n=="new")return e(x);if(t=="(")return e(c(")"),D,h(L,")"),u,S,y,V)}function S(t){if(t==":")return e(lt)}function lt(t){if(t=="type"||t=="variable")return e();if(t=="{")return e(c("}"),h(ct,"}"),u)}function ct(t){if(t=="variable")return e(S)}function L(t,n){if(t=="variable")return A(n),e(S)}const ft={name:"haxe",startState:function(t){return{tokenize:w,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new j(-t,0,"block",!1),importedtypes:["Int","Float","String","Void","Std","Bool","Dynamic","Array"],context:null,indented:0}},token:function(t,n){if(t.sol()&&(n.lexical.hasOwnProperty("align")||(n.lexical.align=!1),n.indented=t.indentation()),t.eatSpace())return null;var r=n.tokenize(t,n);return f=="comment"?r:(n.reAllowed=!!(f=="operator"||f=="keyword c"||f.match(/^[\[{}\(,;:]$/)),n.kwAllowed=f!=".",X(n,r,f,B,t))},indent:function(t,n,r){if(t.tokenize!=w)return 0;var a=n&&n.charAt(0),i=t.lexical;i.type=="stat"&&a=="}"&&(i=i.prev);var s=i.type,W=a==s;return s=="vardef"?i.indented+4:s=="form"&&a=="{"?i.indented:s=="stat"||s=="form"?i.indented+r.unit:i.info=="switch"&&!W?i.indented+(/^(?:case|default)\b/.test(n)?r.unit:2*r.unit):i.align?i.column+(W?0:1):i.indented+(W?0:r.unit)},languageData:{indentOnInput:/^\s*[{}]$/,commentTokens:{line:"//",block:{open:"/*",close:"*/"}}}},st={name:"hxml",startState:function(){return{define:!1,inString:!1}},token:function(t,n){var i=t.peek(),r=t.sol();if(i=="#")return t.skipToEnd(),"comment";if(r&&i=="-"){var a="variable-2";return t.eat(/-/),t.peek()=="-"&&(t.eat(/-/),a="keyword a"),t.peek()=="D"&&(t.eat(/[D]/),a="keyword c",n.define=!0),t.eatWhile(/[A-Z]/i),a}var i=t.peek();return n.inString==0&&i=="'"&&(n.inString=!0,t.next()),n.inString==1?(t.skipTo("'")||t.skipToEnd(),t.peek()=="'"&&(t.next(),n.inString=!1),"string"):(t.next(),null)},languageData:{commentTokens:{line:"#"}}};export{st as n,ft as t};
