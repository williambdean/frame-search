import{s as U}from"./chunk-DZLz74EQ.js";import{c as G,d as se,l as re,n as we}from"./jotai-DDOP7CKM.js";import{t as _e}from"./react-BcIddLXZ.js";import{$t as ne,Bt as Se,Dt as Ce,E as $e,Et as Te,Jt as ke,Kt as le,Mt as oe,Rn as qe,Ut as De,Xt as Fe,Yt as Ee,Zn as me,en as ie,jt as Le,kt as Ie,nn as ze,p as Pe,qt as ce,rn as pe,s as Ve,ut as Ae,zt as Me}from"./cells-B6jS0AIj.js";import"./react-dom-D6bRRS5R.js";import"./zod-U2NFpcFA.js";import{n as ae,t as Oe}from"./jsx-runtime-DvsdsEjx.js";import"./_Uint8Array-D5Z9rM2X.js";import"./isSymbol-xTSywenE.js";import"./_arrayMap-DQI2GUNb.js";import"./toString-CBnct2wx.js";import"./toNumber-CTOPJrpu.js";import"./toInteger-Bor4StOs.js";import"./isArrayLikeObject-DKyJYtr8.js";import"./_getTag-CVRrQL_Q.js";import"./_baseIsEqual-BF8660ot.js";import"./_toKey-Di_xoXjD.js";import"./memoize-CAcr7Wct.js";import"./get-BYzWDFJH.js";import"./_baseFlatten-8yEsQJi9.js";import"./merge-BgA7kxZb.js";import"./_baseSlice-B27Cqkm6.js";import"./upperFirst-DOlTOwhh.js";import"./_hasUnicode-CPHpt5EV.js";import"./_arrayReduce-DDpPg0Qh.js";import"./startCase-DOk4LYuA.js";import"./_baseEach-Xz5DR2cc.js";import"./hasIn-WaG0qjy7.js";import"./_baseProperty-CIKnF2iY.js";import"./_createAggregator-DL8RwNg0.js";import"./now-B6JN1xKT.js";import"./debounce-70y9MzDK.js";import"./_baseMap-DMMHaI20.js";import{t as de}from"./sortBy-DOR2cy6s.js";import{t as ue}from"./add-database-form-BD_g3JVt.js";import"./hotkeys-Lbk6RHir.js";import"./invariant-DPGusy7Z.js";import{o as Be}from"./utils-DnJCRgaX.js";import"./constants-DIZnpo2K.js";import"./config-BjdJmdrN.js";import{t as Re}from"./ErrorBoundary-7JQlouA1.js";import"./useEventListener-C5BS4xuN.js";import{t as O}from"./cn-C5VTNYKf.js";import{r as Ke,t as H}from"./button-nRVaalxL.js";import"./dist-BPcMnGQn.js";import"./dist-pZAIwcZo.js";import"./once-Co7xi2Ip.js";import"./capabilities-DdXtcIOa.js";import"./createReducer-80xvKyHq.js";import{r as Je}from"./requests-D3Z6okhb.js";import"./preload-helper-BpItL31i.js";import"./dist-C13bkrcz.js";import"./dist-DZNGKufD.js";import"./dist-DBeOBCHw.js";import"./dist-Ba10OKR3.js";import"./dist-D-CsU-_R.js";import"./dist-ClBFnEcy.js";import"./stex-LEaAsvUb.js";import"./Deferred-zIiWPYX3.js";import"./uuid-Dj56ryH_.js";import"./key-DWQdrH_J.js";import"./use-toast-BiL_AQz9.js";import"./main-CD7jouuS.js";import"./marked.esm-DCf1d_lA.js";import"./connection-DnLUBy9M.js";import"./dist-Q3T6mWQ0.js";import"./useTheme-BMknLtnH.js";import"./createLucideIcon-DA8ZBm4D.js";import"./type-Cpth3na1.js";import"./check-BUgsJwxM.js";import{h as Ue}from"./select-DJ0A_oCR.js";import"./chevron-right-WxQzIptp.js";import"./circle-plus-B5Yc1YKq.js";import"./toDate-sQp07c5U.js";import"./circle-x-DGA84U3r.js";import"./dropdown-menu-1SGi7wHR.js";import"./copy-CWjpIcfl.js";import"./spinner-FaMZ5NTl.js";import{t as he}from"./plus-CmzxQYgQ.js";import"./refresh-ccw-q_wAM7pz.js";import{t as We}from"./refresh-cw-9lSVG80g.js";import"./input-BPw9p_8N.js";import"./form-b4A0F_Lr.js";import{c as xe,d as fe,f as be,l as Q,n as Xe,o as Ye,p as Ze,u as ge}from"./column-preview-ChwjCH-u.js";import"./trash-2-DtsdG6Pf.js";import{r as Ge}from"./useNonce-DECX9FAH.js";import"./badge-CFi0nvIx.js";import"./Combination-DR4iFoRS.js";import"./dist-Cei_8ikW.js";import{t as ee}from"./tooltip-BQKXsEoT.js";import"./useLifecycle-CuZnZLRp.js";import"./menu-items-DOc2hwO2.js";import"./tslib.es6-sakIzgHM.js";import"./alert-dialog-DM1h8RhU.js";import"./dialog-CEqVOFHc.js";import"./context-BMtIGcq8.js";import"./useNumberFormatter-DynX1ecE.js";import"./numbers-Hxwz5HuE.js";import"./useEvent-d8iQXgui.js";import"./useDebounce-BDmbJDbT.js";import"./ImperativeModal-CmOSTULR.js";import"./strings-DSmr2a_p.js";import"./copy-DAqXDCGN.js";import{t as He}from"./copy-icon-5DWltDxB.js";import{n as je}from"./useAsyncData-CsBCDF11.js";import"./kbd-CZFOBQmt.js";import"./label-6DIjJ2sP.js";import"./popover-BM0PuIZH.js";import{n as Qe}from"./add-missing-import-BJfCTctT.js";import{n as et}from"./icons-j8BJ30se.js";import{a as tt,o as te,t as at,u as st}from"./command-BqJiTpIC.js";import"./links-DCKgyNFq.js";import"./form-CDF8FirJ.js";import{o as rt}from"./focus-NSCHuycv.js";import{t as Ne}from"./useAddCell-BcZiZJfL.js";import"./useInstallPackage-RVnGhNcD.js";import"./toggle-JGbyXN73.js";import"./field-XT1d7zKu.js";import"./textarea-CuEW04Ze.js";import{t as nt}from"./empty-state-NyXKwoVS.js";import"./request-registry-BfJOJz6S.js";import"./write-secret-modal-DLxqNGHo.js";var q=U(_e(),1),lt=U(ae(),1),r=U(Oe(),1);const ot=s=>{let e=(0,lt.c)(8),{variableName:t,className:a}=s,l;e[0]===t?l=e[1]:(l=()=>{let u=mt(t);if(!u)return;let N=Pe(u);N&&qe(N,t)},e[0]=t,e[1]=l);let i=l,n;e[2]===a?n=e[3]:(n=O("text-link opacity-80 hover:opacity-100 hover:underline",a),e[2]=a,e[3]=n);let j;return e[4]!==i||e[5]!==n||e[6]!==t?(j=(0,r.jsx)("button",{type:"button",onClick:i,className:n,children:t}),e[4]=i,e[5]=n,e[6]=t,e[7]=j):j=e[7],j};function mt(s){let e=we.get(me)[s];if(e)return e.declaredBy[0]}var B=U(ae(),1),it=se(s=>{let e=s(ke),t=s(me),a=s(Ve);return de(e,l=>{if(!l.variable_name)return-1;let i=Object.values(t).find(j=>j.name===l.variable_name);if(!i)return 0;let n=a.inOrderIds.indexOf(i.declaredBy[0]);return n===-1?0:n})}),ct=se(s=>{let e=new Map(s(De));for(let t of pe){let a=e.get(t);a&&(a.databases.length===0&&e.delete(t),a.databases.length===1&&a.databases[0].name==="memory"&&a.databases[0].schemas.length===0&&e.delete(t))}return de([...e.values()],t=>pe.has(t.name)?1:0)});const pt=()=>{let s=(0,B.c)(32),[e,t]=q.useState(""),a=re(ce),l=G(it),i=G(ct);if(l.length===0&&i.length===0){let p;return s[0]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)(nt,{title:"No tables found",description:"Any datasets/dataframes in the global scope will be shown here.",action:(0,r.jsx)(ue,{children:(0,r.jsxs)(H,{variant:"outline",size:"sm",children:["Add database or catalog",(0,r.jsx)(he,{className:"h-4 w-4 ml-2"})]})}),icon:(0,r.jsx)(oe,{})}),s[0]=p):p=s[0],p}let n=!!e.trim(),j;s[1]===a?j=s[2]:(j=p=>{a(p.length>0),t(p)},s[1]=a,s[2]=j);let u;s[3]!==e||s[4]!==j?(u=(0,r.jsx)(tt,{placeholder:"Search tables...",className:"h-6 m-1",value:e,onValueChange:j,rootClassName:"flex-1 border-r"}),s[3]=e,s[4]=j,s[5]=u):u=s[5];let N;s[6]===n?N=s[7]:(N=n&&(0,r.jsx)("button",{type:"button",className:"float-right border-b px-2 m-0 h-full hover:bg-accent hover:text-accent-foreground",onClick:()=>t(""),children:(0,r.jsx)(Ue,{className:"h-4 w-4"})}),s[6]=n,s[7]=N);let g;s[8]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)(ue,{children:(0,r.jsx)("button",{type:"button",className:"float-right border-b px-2 m-0 h-full hover:bg-accent hover:text-accent-foreground",children:(0,r.jsx)(he,{className:"h-4 w-4"})})}),s[8]=g):g=s[8];let c;s[9]!==u||s[10]!==N?(c=(0,r.jsxs)("div",{className:"flex items-center w-full",children:[u,N,g]}),s[9]=u,s[10]=N,s[11]=c):c=s[11];let x;if(s[12]!==i||s[13]!==n||s[14]!==e){let p;s[16]!==n||s[17]!==e?(p=h=>(0,r.jsx)(dt,{connection:h,hasChildren:h.databases.length>0,children:h.databases.map(d=>(0,r.jsx)(ut,{engineName:h.name,database:d,hasSearch:n,children:(0,r.jsx)(ht,{schemas:d.schemas,defaultSchema:h.default_schema,defaultDatabase:h.default_database,engineName:h.name,databaseName:d.name,hasSearch:n,searchValue:e})},d.name))},h.name),s[16]=n,s[17]=e,s[18]=p):p=s[18],x=i.map(p),s[12]=i,s[13]=n,s[14]=e,s[15]=x}else x=s[15];let f;s[19]!==i.length||s[20]!==l.length?(f=i.length>0&&l.length>0&&(0,r.jsxs)(xe,{children:[(0,r.jsx)(et,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsx)("span",{className:"text-xs",children:"Python"})]}),s[19]=i.length,s[20]=l.length,s[21]=f):f=s[21];let m;s[22]!==e||s[23]!==l?(m=l.length>0&&(0,r.jsx)(ye,{tables:l,searchValue:e}),s[22]=e,s[23]=l,s[24]=m):m=s[24];let b;s[25]!==x||s[26]!==f||s[27]!==m?(b=(0,r.jsxs)(st,{className:"flex flex-col",children:[x,f,m]}),s[25]=x,s[26]=f,s[27]=m,s[28]=b):b=s[28];let o;return s[29]!==c||s[30]!==b?(o=(0,r.jsxs)(at,{className:"border-b bg-background rounded-none h-full pb-10 overflow-auto outline-hidden",shouldFilter:!1,children:[c,b]}),s[29]=c,s[30]=b,s[31]=o):o=s[31],o};var dt=s=>{let e=(0,B.c)(26),{connection:t,children:a,hasChildren:l}=s,i=t.name===ze,n=i?"In-Memory":t.name,{previewDataSourceConnection:j}=Je(),[u,N]=q.useState(!1),g;e[0]!==t.name||e[1]!==j?(g=async()=>{N(!0),await j({engine:t.name}),setTimeout(()=>N(!1),500)},e[0]=t.name,e[1]=j,e[2]=g):g=e[2];let c=g,x;e[3]===t.dialect?x=e[4]:(x=(0,r.jsx)(Ae,{className:"h-4 w-4 text-muted-foreground",name:t.dialect}),e[3]=t.dialect,e[4]=x);let f;e[5]===t.dialect?f=e[6]:(f=Te(t.dialect),e[5]=t.dialect,e[6]=f);let m;e[7]===f?m=e[8]:(m=(0,r.jsx)("span",{className:"text-xs",children:f}),e[7]=f,e[8]=m);let b=n,o;e[9]===b?o=e[10]:(o=(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",(0,r.jsx)(ot,{variableName:b}),")"]}),e[9]=b,e[10]=o);let p;e[11]!==c||e[12]!==i||e[13]!==u?(p=!i&&(0,r.jsx)(ee,{content:"Refresh connection",children:(0,r.jsx)(H,{variant:"ghost",size:"icon",className:"ml-auto hover:bg-transparent hover:shadow-none",onClick:c,children:(0,r.jsx)(We,{className:O("h-4 w-4 text-muted-foreground hover:text-foreground",u&&"animate-[spin_0.5s]")})})}),e[11]=c,e[12]=i,e[13]=u,e[14]=p):p=e[14];let h;e[15]!==x||e[16]!==m||e[17]!==o||e[18]!==p?(h=(0,r.jsxs)(xe,{children:[x,m,o,p]}),e[15]=x,e[16]=m,e[17]=o,e[18]=p,e[19]=h):h=e[19];let d;e[20]!==a||e[21]!==l?(d=l?a:(0,r.jsx)(Q,{content:"No databases available",className:"pl-2"}),e[20]=a,e[21]=l,e[22]=d):d=e[22];let y;return e[23]!==h||e[24]!==d?(y=(0,r.jsxs)(r.Fragment,{children:[h,d]}),e[23]=h,e[24]=d,e[25]=y):y=e[25],y},ut=s=>{let e=(0,B.c)(25),{hasSearch:t,engineName:a,database:l,children:i}=s,[n,j]=q.useState(!1),[u,N]=q.useState(!1),[g,c]=q.useState(t);g!==t&&(c(t),j(t));let x;e[0]!==n||e[1]!==u?(x=()=>{j(!n),N(!u)},e[0]=n,e[1]=u,e[2]=x):x=e[2];let f=`${a}:${l.name}`,m;e[3]===n?m=e[4]:(m=(0,r.jsx)(be,{isExpanded:n}),e[3]=n,e[4]=m);let b=u&&n?"text-foreground":"text-muted-foreground",o;e[5]===b?o=e[6]:(o=O("h-4 w-4",b),e[5]=b,e[6]=o);let p;e[7]===o?p=e[8]:(p=(0,r.jsx)(oe,{className:o}),e[7]=o,e[8]=p);let h=u&&n&&"font-semibold",d;e[9]===h?d=e[10]:(d=O(h),e[9]=h,e[10]=d);let y;e[11]===l.name?y=e[12]:(y=l.name===""?(0,r.jsx)("i",{children:"Not connected"}):l.name,e[11]=l.name,e[12]=y);let v;e[13]!==d||e[14]!==y?(v=(0,r.jsx)("span",{className:d,children:y}),e[13]=d,e[14]=y,e[15]=v):v=e[15];let w;e[16]!==x||e[17]!==v||e[18]!==f||e[19]!==m||e[20]!==p?(w=(0,r.jsxs)(te,{className:"text-sm flex flex-row gap-1 items-center cursor-pointer rounded-none",onSelect:x,value:f,children:[m,p,v]}),e[16]=x,e[17]=v,e[18]=f,e[19]=m,e[20]=p,e[21]=w):w=e[21];let _=n&&i,S;return e[22]!==w||e[23]!==_?(S=(0,r.jsxs)(r.Fragment,{children:[w,_]}),e[22]=w,e[23]=_,e[24]=S):S=e[24],S},ht=s=>{let e=(0,B.c)(20),{schemas:t,defaultSchema:a,defaultDatabase:l,engineName:i,databaseName:n,hasSearch:j,searchValue:u}=s;if(t.length===0){let c;return e[0]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(Q,{content:"No schemas available",className:"pl-6"}),e[0]=c):c=e[0],c}let N;if(e[1]!==n||e[2]!==l||e[3]!==a||e[4]!==i||e[5]!==j||e[6]!==t||e[7]!==u){let c;e[9]===u?c=e[10]:(c=m=>u?m.tables.some(b=>b.name.toLowerCase().includes(u.toLowerCase())):!0,e[9]=u,e[10]=c);let x=t.filter(c),f;e[11]!==n||e[12]!==l||e[13]!==a||e[14]!==i||e[15]!==j||e[16]!==u?(f=m=>(0,r.jsx)(xt,{databaseName:n,schema:m,hasSearch:j,children:(0,r.jsx)(ye,{tables:m.tables,searchValue:u,sqlTableContext:{engine:i,database:n,schema:m.name,defaultSchema:a,defaultDatabase:l}})},m.name),e[11]=n,e[12]=l,e[13]=a,e[14]=i,e[15]=j,e[16]=u,e[17]=f):f=e[17],N=x.map(f),e[1]=n,e[2]=l,e[3]=a,e[4]=i,e[5]=j,e[6]=t,e[7]=u,e[8]=N}else N=e[8];let g;return e[18]===N?g=e[19]:(g=(0,r.jsx)(r.Fragment,{children:N}),e[18]=N,e[19]=g),g},xt=s=>{let e=(0,B.c)(23),{databaseName:t,schema:a,children:l,hasSearch:i}=s,[n,j]=q.useState(i),[u,N]=q.useState(!1),g=`${t}:${a.name}`;if(ne(a.name))return l;let c;e[0]!==n||e[1]!==u?(c=()=>{j(!n),N(!u)},e[0]=n,e[1]=u,e[2]=c):c=e[2];let x;e[3]===n?x=e[4]:(x=(0,r.jsx)(be,{isExpanded:n}),e[3]=n,e[4]=x);let f=u&&n&&"text-foreground",m;e[5]===f?m=e[6]:(m=O("h-4 w-4 text-muted-foreground",f),e[5]=f,e[6]=m);let b;e[7]===m?b=e[8]:(b=(0,r.jsx)(Ie,{className:m}),e[7]=m,e[8]=b);let o=u&&n&&"font-semibold",p;e[9]===o?p=e[10]:(p=O(o),e[9]=o,e[10]=p);let h;e[11]!==a.name||e[12]!==p?(h=(0,r.jsx)("span",{className:p,children:a.name}),e[11]=a.name,e[12]=p,e[13]=h):h=e[13];let d;e[14]!==c||e[15]!==x||e[16]!==b||e[17]!==h||e[18]!==g?(d=(0,r.jsxs)(te,{className:"text-sm flex flex-row gap-1 items-center pl-5 cursor-pointer rounded-none",onSelect:c,value:g,children:[x,b,h]}),e[14]=c,e[15]=x,e[16]=b,e[17]=h,e[18]=g,e[19]=d):d=e[19];let y=n&&l,v;return e[20]!==y||e[21]!==d?(v=(0,r.jsxs)(r.Fragment,{children:[d,y]}),e[20]=y,e[21]=d,e[22]=v):v=e[22],v},ye=s=>{let e=(0,B.c)(24),{tables:t,sqlTableContext:a,searchValue:l}=s,{addTableList:i}=le(),[n,j]=q.useState(!1),[u,N]=q.useState(!1),g;e[0]!==i||e[1]!==a||e[2]!==t.length||e[3]!==n?(g=async()=>{if(t.length===0&&a&&!n){j(!0),N(!0);let{engine:o,database:p,schema:h}=a,d=await Se.request({engine:o,database:p,schema:h});if(!(d!=null&&d.tables))throw N(!1),Error("No tables available");i({tables:d.tables,sqlTableContext:a}),N(!1)}},e[0]=i,e[1]=a,e[2]=t.length,e[3]=n,e[4]=g):g=e[4];let c;e[5]!==a||e[6]!==t.length||e[7]!==n?(c=[t.length,a,n],e[5]=a,e[6]=t.length,e[7]=n,e[8]=c):c=e[8];let{isPending:x,error:f}=je(g,c);if(x||u){let o;return e[9]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)(fe,{message:"Loading tables...",className:"pl-12"}),e[9]=o):o=e[9],o}if(f){let o;return e[10]===f?o=e[11]:(o=(0,r.jsx)(ge,{error:f,className:"pl-12"}),e[10]=f,e[11]=o),o}if(t.length===0){let o;return e[12]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)(Q,{content:"No tables found",className:"pl-9"}),e[12]=o):o=e[12],o}let m;if(e[13]!==l||e[14]!==a||e[15]!==t){let o;e[17]===l?o=e[18]:(o=d=>l?d.name.toLowerCase().includes(l.toLowerCase()):!0,e[17]=l,e[18]=o);let p=t.filter(o),h;e[19]!==l||e[20]!==a?(h=d=>(0,r.jsx)(ft,{table:d,sqlTableContext:a,isSearching:!!l},d.name),e[19]=l,e[20]=a,e[21]=h):h=e[21],m=p.map(h),e[13]=l,e[14]=a,e[15]=t,e[16]=m}else m=e[16];let b;return e[22]===m?b=e[23]:(b=(0,r.jsx)(r.Fragment,{children:m}),e[22]=m,e[23]=b),b},ft=s=>{let e=(0,B.c)(64),{table:t,sqlTableContext:a,isSearching:l}=s,{addTable:i}=le(),[n,j]=q.useState(!1),[u,N]=q.useState(!1),g=t.columns.length>0,c;e[0]!==i||e[1]!==n||e[2]!==a||e[3]!==t.name||e[4]!==g||e[5]!==u?(c=async()=>{if(n&&!g&&a&&!u){N(!0);let{engine:E,database:Y,schema:ve}=a,Z=await Me.request({engine:E,database:Y,schema:ve,tableName:t.name});if(!(Z!=null&&Z.table))throw Error("No table details available");i({table:Z.table,sqlTableContext:a})}},e[0]=i,e[1]=n,e[2]=a,e[3]=t.name,e[4]=g,e[5]=u,e[6]=c):c=e[6];let x;e[7]!==n||e[8]!==g?(x=[n,g],e[7]=n,e[8]=g,e[9]=x):x=e[9];let{isFetching:f,isPending:m,error:b}=je(c,x),o=G(Be),p=rt(),{createNewCell:h}=$e(),d=Ne(),y;e[10]!==d||e[11]!==o||e[12]!==h||e[13]!==p||e[14]!==a||e[15]!==t?(y=()=>{Qe({autoInstantiate:o,createNewCell:h,fromCellId:p}),d((()=>{if(t.source_type==="catalog"){let E=a!=null&&a.database?`${a.database}.${t.name}`:t.name;return`${t.engine}.load_table("${E}")`}if(a)return ie({table:t,columnName:"*",sqlTableContext:a});switch(t.source_type){case"local":return`mo.ui.table(${t.name})`;case"duckdb":case"connection":return ie({table:t,columnName:"*",sqlTableContext:a});default:return Ge(t.source_type),""}})())},e[10]=d,e[11]=o,e[12]=h,e[13]=p,e[14]=a,e[15]=t,e[16]=y):y=e[16];let v=y,w;e[17]!==t.num_columns||e[18]!==t.num_rows?(w=()=>{let E=[];return t.num_rows!=null&&E.push(`${t.num_rows} rows`),t.num_columns!=null&&E.push(`${t.num_columns} columns`),E.length===0?null:(0,r.jsx)("div",{className:"flex flex-row gap-2 items-center pl-6 group-hover:hidden",children:(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:E.join(", ")})})},e[17]=t.num_columns,e[18]=t.num_rows,e[19]=w):w=e[19];let _=w,S;e[20]!==b||e[21]!==f||e[22]!==m||e[23]!==a||e[24]!==t?(S=()=>{if(m||f)return(0,r.jsx)(fe,{message:"Loading columns...",className:"pl-12"});if(b)return(0,r.jsx)(ge,{error:b,className:"pl-12"});let E=t.columns;return E.length===0?(0,r.jsx)(Q,{content:"No columns found",className:"pl-12"}):E.map(Y=>(0,r.jsx)(bt,{table:t,column:Y,sqlTableContext:a},Y.name))},e[20]=b,e[21]=f,e[22]=m,e[23]=a,e[24]=t,e[25]=S):S=e[25];let L=S,D;e[26]!==n||e[27]!==l||e[28]!==t.source_type||e[29]!==t.type?(D=()=>{if(t.source_type!=="local")return(0,r.jsx)(t.type==="table"?Ce:Le,{className:"h-3 w-3",strokeWidth:n||l?2.5:void 0})},e[26]=n,e[27]=l,e[28]=t.source_type,e[29]=t.type,e[30]=D):D=e[30];let I=D,z=a?`${a.database}.${a.schema}.${t.name}`:t.name,P=a&&(ne(a.schema)?"pl-9":"pl-12"),V=(n||l)&&"font-semibold",C;e[31]!==P||e[32]!==V?(C=O("rounded-none group h-8 cursor-pointer",P,V),e[31]=P,e[32]=V,e[33]=C):C=e[33];let $;e[34]===n?$=e[35]:($=()=>j(!n),e[34]=n,e[35]=$);let T;e[36]===I?T=e[37]:(T=I(),e[36]=I,e[37]=T);let F;e[38]===t.name?F=e[39]:(F=(0,r.jsx)("span",{className:"text-sm",children:t.name}),e[38]=t.name,e[39]=F);let A;e[40]!==T||e[41]!==F?(A=(0,r.jsxs)("div",{className:"flex gap-2 items-center flex-1",children:[T,F]}),e[40]=T,e[41]=F,e[42]=A):A=e[42];let M;e[43]===_?M=e[44]:(M=_(),e[43]=_,e[44]=M);let k;e[45]===v?k=e[46]:(k=Ke.stopPropagation(()=>v()),e[45]=v,e[46]=k);let W;e[47]===Symbol.for("react.memo_cache_sentinel")?(W=(0,r.jsx)(Ze,{className:"h-3 w-3"}),e[47]=W):W=e[47];let R;e[48]===k?R=e[49]:(R=(0,r.jsx)(ee,{content:"Add table to notebook",delayDuration:400,children:(0,r.jsx)(H,{className:"group-hover:inline-flex hidden",variant:"text",size:"icon",onClick:k,children:W})}),e[48]=k,e[49]=R);let K;e[50]!==n||e[51]!==$||e[52]!==A||e[53]!==M||e[54]!==R||e[55]!==C||e[56]!==z?(K=(0,r.jsxs)(te,{className:C,value:z,"aria-selected":n,forceMount:!0,onSelect:$,children:[A,M,R]}),e[50]=n,e[51]=$,e[52]=A,e[53]=M,e[54]=R,e[55]=C,e[56]=z,e[57]=K):K=e[57];let J;e[58]!==n||e[59]!==L?(J=n&&L(),e[58]=n,e[59]=L,e[60]=J):J=e[60];let X;return e[61]!==K||e[62]!==J?(X=(0,r.jsxs)(r.Fragment,{children:[K,J]}),e[61]=K,e[62]=J,e[63]=X):X=e[63],X},bt=s=>{var A,M;let e=(0,B.c)(48),{table:t,column:a,sqlTableContext:l}=s,[i,n]=q.useState(!1),j=G(ce),u=re(Ee);j&&i&&n(!1),u(i?k=>new Set([...k,`${t.name}:${a.name}`]):k=>(k.delete(`${t.name}:${a.name}`),new Set(k)));let N=Ne(),{columnsPreviews:g}=Fe(),c;e[0]!==a.name||e[1]!==t.primary_keys?(c=((A=t.primary_keys)==null?void 0:A.includes(a.name))||!1,e[0]=a.name,e[1]=t.primary_keys,e[2]=c):c=e[2];let x=c,f;e[3]!==a.name||e[4]!==t.indexes?(f=((M=t.indexes)==null?void 0:M.includes(a.name))||!1,e[3]=a.name,e[4]=t.indexes,e[5]=f):f=e[5];let m=f,b;e[6]===N?b=e[7]:(b=k=>{N(k)},e[6]=N,e[7]=b);let o=b,p=gt,h=i?"font-semibold":"",d;e[8]!==a.name||e[9]!==h?(d=(0,r.jsx)("span",{className:h,children:a.name}),e[8]=a.name,e[9]=h,e[10]=d):d=e[10];let y=d,v=`${t.name}.${a.name}`,w=`${t.name}.${a.name}`,_;e[11]===i?_=e[12]:(_=()=>n(!i),e[11]=i,e[12]=_);let S=l?"pl-14":"pl-7",L;e[13]===S?L=e[14]:(L=O("flex flex-row gap-2 items-center flex-1",S),e[13]=S,e[14]=L);let D;e[15]!==a.type||e[16]!==y?(D=(0,r.jsx)(Ye,{columnName:y,dataType:a.type}),e[15]=a.type,e[16]=y,e[17]=D):D=e[17];let I;e[18]===x?I=e[19]:(I=x&&p({tooltipContent:"Primary key",content:"PK"}),e[18]=x,e[19]=I);let z;e[20]===m?z=e[21]:(z=m&&p({tooltipContent:"Indexed",content:"IDX"}),e[20]=m,e[21]=z);let P;e[22]!==L||e[23]!==D||e[24]!==I||e[25]!==z?(P=(0,r.jsxs)("div",{className:L,children:[D,I,z]}),e[22]=L,e[23]=D,e[24]=I,e[25]=z,e[26]=P):P=e[26];let V;e[27]===a.name?V=e[28]:(V=(0,r.jsx)(ee,{content:"Copy column name",delayDuration:400,children:(0,r.jsx)(H,{variant:"text",size:"icon",className:"group-hover:opacity-100 opacity-0 hover:bg-muted text-muted-foreground hover:text-foreground",children:(0,r.jsx)(He,{tooltip:!1,value:a.name,className:"h-3 w-3"})})}),e[27]=a.name,e[28]=V);let C;e[29]===a.external_type?C=e[30]:(C=(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:a.external_type}),e[29]=a.external_type,e[30]=C);let $;e[31]!==P||e[32]!==V||e[33]!==C||e[34]!==v||e[35]!==w||e[36]!==_?($=(0,r.jsxs)(te,{className:"rounded-none py-1 group cursor-pointer",value:w,onSelect:_,children:[P,V,C]},v),e[31]=P,e[32]=V,e[33]=C,e[34]=v,e[35]=w,e[36]=_,e[37]=$):$=e[37];let T;e[38]!==a||e[39]!==g||e[40]!==o||e[41]!==i||e[42]!==l||e[43]!==t?(T=i&&(0,r.jsx)("div",{className:"pl-10 pr-2 py-2 bg-(--slate-1) shadow-inner border-b",children:(0,r.jsx)(Re,{children:(0,r.jsx)(Xe,{table:t,column:a,onAddColumnChart:o,preview:g.get(l?`${l.database}.${l.schema}.${t.name}:${a.name}`:`${t.name}:${a.name}`),sqlTableContext:l})})}),e[38]=a,e[39]=g,e[40]=o,e[41]=i,e[42]=l,e[43]=t,e[44]=T):T=e[44];let F;return e[45]!==$||e[46]!==T?(F=(0,r.jsxs)(r.Fragment,{children:[$,T]}),e[45]=$,e[46]=T,e[47]=F):F=e[47],F};function gt(s){let{tooltipContent:e,content:t}=s;return(0,r.jsx)(ee,{content:e,delayDuration:100,children:(0,r.jsx)("span",{className:"text-xs text-black bg-gray-100 dark:invert rounded px-1",children:t})})}var jt=U(ae(),1),Nt=()=>{let s=(0,jt.c)(1),e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(pt,{}),s[0]=e):e=s[0],e};export{Nt as default};
